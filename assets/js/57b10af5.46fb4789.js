"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[9358],{3861:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>l,contentTitle:()=>a,default:()=>p,frontMatter:()=>i,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"frameworks/angular/angular-testing","title":"Angular Testing Guide","description":"Comprehensive guide to testing Angular applications using Jasmine, Karma, and modern testing practices.","source":"@site/docs/frameworks/angular/angular-testing.md","sourceDirName":"frameworks/angular","slug":"/frameworks/angular/angular-testing","permalink":"/docs/frameworks/angular/angular-testing","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":7,"frontMatter":{"sidebar_position":7},"sidebar":"tutorialSidebar","previous":{"title":"Angular Fundamentals","permalink":"/docs/frameworks/angular/fundamentals/"},"next":{"title":"AngularJS","permalink":"/docs/frameworks/angularjs/"}}');var s=t(74848),o=t(28453);const i={sidebar_position:7},a="Angular Testing Guide",l={},c=[{value:"Overview",id:"overview",level:2},{value:"What You&#39;ll Learn",id:"what-youll-learn",level:3},{value:"Setup",id:"setup",level:2},{value:"Default Setup (Angular CLI)",id:"default-setup-angular-cli",level:3},{value:"Manual Setup",id:"manual-setup",level:3},{value:"TestBed - Angular Testing Module",id:"testbed---angular-testing-module",level:2},{value:"Basic TestBed Configuration",id:"basic-testbed-configuration",level:3},{value:"TestBed with Dependencies",id:"testbed-with-dependencies",level:3},{value:"Component Testing",id:"component-testing",level:2},{value:"Basic Component Test",id:"basic-component-test",level:3},{value:"Component with Input/Output",id:"component-with-inputoutput",level:3},{value:"Component with Service Dependency",id:"component-with-service-dependency",level:3},{value:"Service Testing",id:"service-testing",level:2},{value:"Basic Service Test",id:"basic-service-test",level:3},{value:"HTTP Service Testing",id:"http-service-testing",level:3},{value:"Testing RxJS Observables",id:"testing-rxjs-observables",level:2},{value:"Testing Async Operations",id:"testing-async-operations",level:3},{value:"Testing with Jasmine Marble Testing",id:"testing-with-jasmine-marble-testing",level:3},{value:"Testing Directives",id:"testing-directives",level:2},{value:"Testing Pipes",id:"testing-pipes",level:2},{value:"Testing Forms",id:"testing-forms",level:2},{value:"Template-Driven Forms",id:"template-driven-forms",level:3},{value:"Reactive Forms",id:"reactive-forms",level:3},{value:"Testing Routing",id:"testing-routing",level:2},{value:"Testing NgRx (State Management)",id:"testing-ngrx-state-management",level:2},{value:"Testing Reducers",id:"testing-reducers",level:3},{value:"Testing Effects",id:"testing-effects",level:3},{value:"Testing Selectors",id:"testing-selectors",level:3},{value:"E2E Testing",id:"e2e-testing",level:2},{value:"Protractor (Deprecated)",id:"protractor-deprecated",level:3},{value:"Cypress for Angular",id:"cypress-for-angular",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use TestBed Properly",id:"1-use-testbed-properly",level:3},{value:"2. Use Spies for Dependencies",id:"2-use-spies-for-dependencies",level:3},{value:"3. Test Component Logic, Not Implementation",id:"3-test-component-logic-not-implementation",level:3},{value:"4. Use detectChanges() Wisely",id:"4-use-detectchanges-wisely",level:3},{value:"5. Clean Up Subscriptions",id:"5-clean-up-subscriptions",level:3},{value:"Common Testing Patterns",id:"common-testing-patterns",level:2},{value:"Pattern: Page Object Model",id:"pattern-page-object-model",level:3},{value:"Pattern: Test Helpers",id:"pattern-test-helpers",level:3},{value:"Resources",id:"resources",level:2},{value:"Official Documentation",id:"official-documentation",level:3},{value:"Tools",id:"tools",level:3},{value:"Learning Resources",id:"learning-resources",level:3},{value:"Next Steps",id:"next-steps",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"angular-testing-guide",children:"Angular Testing Guide"})}),"\n",(0,s.jsx)(n.p,{children:"Comprehensive guide to testing Angular applications using Jasmine, Karma, and modern testing practices."}),"\n",(0,s.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,s.jsx)(n.p,{children:"Angular provides a powerful testing infrastructure built on Jasmine and Karma. This guide covers testing components, services, directives, pipes, and more with TypeScript type safety."}),"\n",(0,s.jsx)(n.h3,{id:"what-youll-learn",children:"What You'll Learn"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"TestBed Configuration"})," - Angular's testing module"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Component Testing"})," - DOM interaction and change detection"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Service Testing"})," - Dependency injection and HTTP"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"RxJS Testing"})," - Observables and async operations"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Routing Testing"})," - Router and navigation"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"NgRx Testing"})," - State management testing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"E2E Testing"})," - End-to-end with Protractor/Cypress"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"setup",children:"Setup"}),"\n",(0,s.jsx)(n.h3,{id:"default-setup-angular-cli",children:"Default Setup (Angular CLI)"}),"\n",(0,s.jsx)(n.p,{children:"Angular CLI projects come with testing pre-configured:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create new Angular project with testing\nng new my-app\n\n# Run tests\nng test\n\n# Run tests with code coverage\nng test --code-coverage\n\n# Run tests in headless mode (CI)\nng test --browsers=ChromeHeadless --watch=false\n"})}),"\n",(0,s.jsx)(n.h3,{id:"manual-setup",children:"Manual Setup"}),"\n",(0,s.jsx)(n.p,{children:"If you need to set up testing manually:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev @angular/core @angular/platform-browser-dynamic\nnpm install --save-dev jasmine-core karma karma-jasmine karma-chrome-launcher\nnpm install --save-dev @types/jasmine\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"karma.conf.js"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-javascript",children:"module.exports = function(config) {\n  config.set({\n    basePath: '',\n    frameworks: ['jasmine', '@angular-devkit/build-angular'],\n    plugins: [\n      require('karma-jasmine'),\n      require('karma-chrome-launcher'),\n      require('karma-coverage'),\n      require('@angular-devkit/build-angular/plugins/karma')\n    ],\n    client: {\n      jasmine: {\n        random: false\n      },\n      clearContext: false\n    },\n    coverageReporter: {\n      dir: require('path').join(__dirname, './coverage'),\n      subdir: '.',\n      reporters: [\n        { type: 'html' },\n        { type: 'text-summary' },\n        { type: 'lcovonly' }\n      ]\n    },\n    reporters: ['progress', 'coverage'],\n    port: 9876,\n    colors: true,\n    logLevel: config.LOG_INFO,\n    autoWatch: true,\n    browsers: ['Chrome'],\n    singleRun: false,\n    restartOnFileChange: true\n  });\n};\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testbed---angular-testing-module",children:"TestBed - Angular Testing Module"}),"\n",(0,s.jsx)(n.p,{children:"TestBed is Angular's primary testing utility for configuring and creating an Angular testing module."}),"\n",(0,s.jsx)(n.h3,{id:"basic-testbed-configuration",children:"Basic TestBed Configuration"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TestBed } from '@angular/core/testing';\nimport { UserService } from './user.service';\n\ndescribe('UserService', () => {\n  let service: UserService;\n\n  beforeEach(() => {\n    TestBed.configureTestingModule({\n      providers: [UserService]\n    });\n    service = TestBed.inject(UserService);\n  });\n\n  it('should be created', () => {\n    expect(service).toBeTruthy();\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"testbed-with-dependencies",children:"TestBed with Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule } from '@angular/common/http/testing';\nimport { UserService } from './user.service';\nimport { LoggerService } from './logger.service';\n\ndescribe('UserService with dependencies', () => {\n  let service: UserService;\n  let loggerSpy: jasmine.SpyObj<LoggerService>;\n\n  beforeEach(() => {\n    // Create spy object\n    const spy = jasmine.createSpyObj('LoggerService', ['log', 'error']);\n\n    TestBed.configureTestingModule({\n      imports: [HttpClientTestingModule],\n      providers: [\n        UserService,\n        { provide: LoggerService, useValue: spy }\n      ]\n    });\n\n    service = TestBed.inject(UserService);\n    loggerSpy = TestBed.inject(LoggerService) as jasmine.SpyObj<LoggerService>;\n  });\n\n  it('should log user creation', () => {\n    service.createUser({ name: 'John', email: 'john@example.com' });\n\n    expect(loggerSpy.log).toHaveBeenCalledWith('User created');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"component-testing",children:"Component Testing"}),"\n",(0,s.jsx)(n.h3,{id:"basic-component-test",children:"Basic Component Test"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"counter.component.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Component } from '@angular/core';\n\n@Component({\n  selector: 'app-counter',\n  template: `\n    <div>\n      <p>Count: {{ count }}</p>\n      <button (click)=\"increment()\">Increment</button>\n      <button (click)=\"decrement()\">Decrement</button>\n    </div>\n  `\n})\nexport class CounterComponent {\n  count = 0;\n\n  increment(): void {\n    this.count++;\n  }\n\n  decrement(): void {\n    this.count--;\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"counter.component.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { CounterComponent } from './counter.component';\n\ndescribe('CounterComponent', () => {\n  let component: CounterComponent;\n  let fixture: ComponentFixture<CounterComponent>;\n  let compiled: HTMLElement;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [CounterComponent]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(CounterComponent);\n    component = fixture.componentInstance;\n    compiled = fixture.nativeElement;\n    fixture.detectChanges();\n  });\n\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n\n  it('should display initial count', () => {\n    const countText = compiled.querySelector('p')?.textContent;\n    expect(countText).toBe('Count: 0');\n  });\n\n  it('should increment count', () => {\n    const button = compiled.querySelectorAll('button')[0];\n    button.click();\n    fixture.detectChanges();\n\n    expect(component.count).toBe(1);\n    expect(compiled.querySelector('p')?.textContent).toBe('Count: 1');\n  });\n\n  it('should decrement count', () => {\n    component.count = 5;\n    fixture.detectChanges();\n\n    const button = compiled.querySelectorAll('button')[1];\n    button.click();\n    fixture.detectChanges();\n\n    expect(component.count).toBe(4);\n    expect(compiled.querySelector('p')?.textContent).toBe('Count: 4');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-with-inputoutput",children:"Component with Input/Output"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user-card.component.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Component, Input, Output, EventEmitter } from '@angular/core';\n\nexport interface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\n@Component({\n  selector: 'app-user-card',\n  template: `\n    <div class=\"user-card\">\n      <h3>{{ user.name }}</h3>\n      <p>{{ user.email }}</p>\n      <button (click)=\"onDelete()\">Delete</button>\n    </div>\n  `\n})\nexport class UserCardComponent {\n  @Input() user!: User;\n  @Output() delete = new EventEmitter<number>();\n\n  onDelete(): void {\n    this.delete.emit(this.user.id);\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user-card.component.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { UserCardComponent, User } from './user-card.component';\n\ndescribe('UserCardComponent', () => {\n  let component: UserCardComponent;\n  let fixture: ComponentFixture<UserCardComponent>;\n  let compiled: HTMLElement;\n\n  const mockUser: User = {\n    id: 1,\n    name: 'John Doe',\n    email: 'john@example.com'\n  };\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [UserCardComponent]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(UserCardComponent);\n    component = fixture.componentInstance;\n    compiled = fixture.nativeElement;\n  });\n\n  it('should display user information', () => {\n    component.user = mockUser;\n    fixture.detectChanges();\n\n    expect(compiled.querySelector('h3')?.textContent).toBe('John Doe');\n    expect(compiled.querySelector('p')?.textContent).toBe('john@example.com');\n  });\n\n  it('should emit delete event with user id', () => {\n    component.user = mockUser;\n    let emittedId: number | undefined;\n\n    component.delete.subscribe((id: number) => {\n      emittedId = id;\n    });\n\n    const button = compiled.querySelector('button');\n    button?.click();\n\n    expect(emittedId).toBe(1);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"component-with-service-dependency",children:"Component with Service Dependency"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user-list.component.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Component, OnInit } from '@angular/core';\nimport { UserService } from './user.service';\nimport { User } from './user.model';\n\n@Component({\n  selector: 'app-user-list',\n  template: `\n    <div>\n      <h2>Users</h2>\n      <div *ngIf=\"loading\">Loading...</div>\n      <div *ngIf=\"error\" class=\"error\">{{ error }}</div>\n      <ul *ngIf=\"!loading && !error\">\n        <li *ngFor=\"let user of users\">{{ user.name }}</li>\n      </ul>\n    </div>\n  `\n})\nexport class UserListComponent implements OnInit {\n  users: User[] = [];\n  loading = false;\n  error: string | null = null;\n\n  constructor(private userService: UserService) {}\n\n  ngOnInit(): void {\n    this.loading = true;\n    this.userService.getUsers().subscribe({\n      next: (users) => {\n        this.users = users;\n        this.loading = false;\n      },\n      error: (err) => {\n        this.error = 'Failed to load users';\n        this.loading = false;\n      }\n    });\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user-list.component.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { of, throwError } from 'rxjs';\nimport { UserListComponent } from './user-list.component';\nimport { UserService } from './user.service';\nimport { User } from './user.model';\n\ndescribe('UserListComponent', () => {\n  let component: UserListComponent;\n  let fixture: ComponentFixture<UserListComponent>;\n  let userService: jasmine.SpyObj<UserService>;\n  let compiled: HTMLElement;\n\n  const mockUsers: User[] = [\n    { id: 1, name: 'Alice', email: 'alice@example.com' },\n    { id: 2, name: 'Bob', email: 'bob@example.com' }\n  ];\n\n  beforeEach(async () => {\n    const userServiceSpy = jasmine.createSpyObj('UserService', ['getUsers']);\n\n    await TestBed.configureTestingModule({\n      declarations: [UserListComponent],\n      providers: [\n        { provide: UserService, useValue: userServiceSpy }\n      ]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(UserListComponent);\n    component = fixture.componentInstance;\n    compiled = fixture.nativeElement;\n    userService = TestBed.inject(UserService) as jasmine.SpyObj<UserService>;\n  });\n\n  it('should display loading state initially', () => {\n    userService.getUsers.and.returnValue(of(mockUsers));\n\n    component.ngOnInit();\n\n    expect(component.loading).toBe(true);\n  });\n\n  it('should display users after loading', () => {\n    userService.getUsers.and.returnValue(of(mockUsers));\n\n    fixture.detectChanges();\n\n    expect(component.loading).toBe(false);\n    expect(component.users.length).toBe(2);\n\n    const listItems = compiled.querySelectorAll('li');\n    expect(listItems.length).toBe(2);\n    expect(listItems[0].textContent).toBe('Alice');\n    expect(listItems[1].textContent).toBe('Bob');\n  });\n\n  it('should display error message on failure', () => {\n    userService.getUsers.and.returnValue(\n      throwError(() => new Error('Network error'))\n    );\n\n    fixture.detectChanges();\n\n    expect(component.loading).toBe(false);\n    expect(component.error).toBe('Failed to load users');\n    expect(compiled.querySelector('.error')?.textContent).toBe('Failed to load users');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"service-testing",children:"Service Testing"}),"\n",(0,s.jsx)(n.h3,{id:"basic-service-test",children:"Basic Service Test"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"calculator.service.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Injectable } from '@angular/core';\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class CalculatorService {\n  add(a: number, b: number): number {\n    return a + b;\n  }\n\n  subtract(a: number, b: number): number {\n    return a - b;\n  }\n\n  divide(a: number, b: number): number {\n    if (b === 0) {\n      throw new Error('Cannot divide by zero');\n    }\n    return a / b;\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"calculator.service.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TestBed } from '@angular/core/testing';\nimport { CalculatorService } from './calculator.service';\n\ndescribe('CalculatorService', () => {\n  let service: CalculatorService;\n\n  beforeEach(() => {\n    TestBed.configureTestingModule({});\n    service = TestBed.inject(CalculatorService);\n  });\n\n  it('should be created', () => {\n    expect(service).toBeTruthy();\n  });\n\n  it('should add two numbers', () => {\n    expect(service.add(5, 3)).toBe(8);\n  });\n\n  it('should subtract two numbers', () => {\n    expect(service.subtract(10, 4)).toBe(6);\n  });\n\n  it('should throw error when dividing by zero', () => {\n    expect(() => service.divide(10, 0)).toThrowError('Cannot divide by zero');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"http-service-testing",children:"HTTP Service Testing"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.service.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Injectable } from '@angular/core';\nimport { HttpClient, HttpErrorResponse } from '@angular/common/http';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\n\nexport interface User {\n  id: number;\n  name: string;\n  email: string;\n}\n\n@Injectable({\n  providedIn: 'root'\n})\nexport class UserService {\n  private apiUrl = 'https://api.example.com/users';\n\n  constructor(private http: HttpClient) {}\n\n  getUsers(): Observable<User[]> {\n    return this.http.get<User[]>(this.apiUrl).pipe(\n      catchError(this.handleError)\n    );\n  }\n\n  getUserById(id: number): Observable<User> {\n    return this.http.get<User>(`${this.apiUrl}/${id}`).pipe(\n      catchError(this.handleError)\n    );\n  }\n\n  createUser(user: Omit<User, 'id'>): Observable<User> {\n    return this.http.post<User>(this.apiUrl, user).pipe(\n      catchError(this.handleError)\n    );\n  }\n\n  updateUser(id: number, user: Partial<User>): Observable<User> {\n    return this.http.patch<User>(`${this.apiUrl}/${id}`, user).pipe(\n      catchError(this.handleError)\n    );\n  }\n\n  deleteUser(id: number): Observable<void> {\n    return this.http.delete<void>(`${this.apiUrl}/${id}`).pipe(\n      catchError(this.handleError)\n    );\n  }\n\n  private handleError(error: HttpErrorResponse): Observable<never> {\n    let errorMessage = 'An error occurred';\n    if (error.error instanceof ErrorEvent) {\n      errorMessage = `Error: ${error.error.message}`;\n    } else {\n      errorMessage = `Server returned code ${error.status}`;\n    }\n    return throwError(() => new Error(errorMessage));\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.service.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TestBed } from '@angular/core/testing';\nimport { HttpClientTestingModule, HttpTestingController } from '@angular/common/http/testing';\nimport { UserService, User } from './user.service';\n\ndescribe('UserService', () => {\n  let service: UserService;\n  let httpMock: HttpTestingController;\n\n  const mockUsers: User[] = [\n    { id: 1, name: 'Alice', email: 'alice@example.com' },\n    { id: 2, name: 'Bob', email: 'bob@example.com' }\n  ];\n\n  beforeEach(() => {\n    TestBed.configureTestingModule({\n      imports: [HttpClientTestingModule],\n      providers: [UserService]\n    });\n\n    service = TestBed.inject(UserService);\n    httpMock = TestBed.inject(HttpTestingController);\n  });\n\n  afterEach(() => {\n    httpMock.verify(); // Verify no outstanding requests\n  });\n\n  it('should be created', () => {\n    expect(service).toBeTruthy();\n  });\n\n  it('should retrieve all users', (done) => {\n    service.getUsers().subscribe({\n      next: (users) => {\n        expect(users.length).toBe(2);\n        expect(users).toEqual(mockUsers);\n        done();\n      }\n    });\n\n    const req = httpMock.expectOne('https://api.example.com/users');\n    expect(req.request.method).toBe('GET');\n    req.flush(mockUsers);\n  });\n\n  it('should retrieve user by id', (done) => {\n    const mockUser = mockUsers[0];\n\n    service.getUserById(1).subscribe({\n      next: (user) => {\n        expect(user).toEqual(mockUser);\n        done();\n      }\n    });\n\n    const req = httpMock.expectOne('https://api.example.com/users/1');\n    expect(req.request.method).toBe('GET');\n    req.flush(mockUser);\n  });\n\n  it('should create a new user', (done) => {\n    const newUser = { name: 'Charlie', email: 'charlie@example.com' };\n    const createdUser = { id: 3, ...newUser };\n\n    service.createUser(newUser).subscribe({\n      next: (user) => {\n        expect(user).toEqual(createdUser);\n        done();\n      }\n    });\n\n    const req = httpMock.expectOne('https://api.example.com/users');\n    expect(req.request.method).toBe('POST');\n    expect(req.request.body).toEqual(newUser);\n    req.flush(createdUser);\n  });\n\n  it('should update a user', (done) => {\n    const updates = { name: 'Alice Updated' };\n    const updatedUser = { ...mockUsers[0], ...updates };\n\n    service.updateUser(1, updates).subscribe({\n      next: (user) => {\n        expect(user.name).toBe('Alice Updated');\n        done();\n      }\n    });\n\n    const req = httpMock.expectOne('https://api.example.com/users/1');\n    expect(req.request.method).toBe('PATCH');\n    expect(req.request.body).toEqual(updates);\n    req.flush(updatedUser);\n  });\n\n  it('should delete a user', (done) => {\n    service.deleteUser(1).subscribe({\n      next: () => {\n        done();\n      }\n    });\n\n    const req = httpMock.expectOne('https://api.example.com/users/1');\n    expect(req.request.method).toBe('DELETE');\n    req.flush(null);\n  });\n\n  it('should handle errors', (done) => {\n    service.getUsers().subscribe({\n      error: (error) => {\n        expect(error.message).toContain('Server returned code 500');\n        done();\n      }\n    });\n\n    const req = httpMock.expectOne('https://api.example.com/users');\n    req.flush('Server error', { status: 500, statusText: 'Server Error' });\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-rxjs-observables",children:"Testing RxJS Observables"}),"\n",(0,s.jsx)(n.h3,{id:"testing-async-operations",children:"Testing Async Operations"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TestBed, fakeAsync, tick } from '@angular/core/testing';\nimport { of, delay } from 'rxjs';\n\ndescribe('Async Observable Testing', () => {\n  it('should test observable with fakeAsync', fakeAsync(() => {\n    let result: string | undefined;\n\n    of('Hello').pipe(delay(1000)).subscribe((value) => {\n      result = value;\n    });\n\n    // Initially undefined\n    expect(result).toBeUndefined();\n\n    // Fast-forward time by 1000ms\n    tick(1000);\n\n    // Now we have the result\n    expect(result).toBe('Hello');\n  }));\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"testing-with-jasmine-marble-testing",children:"Testing with Jasmine Marble Testing"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev jasmine-marbles\n"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { cold, hot, getTestScheduler } from 'jasmine-marbles';\nimport { map } from 'rxjs/operators';\n\ndescribe('Marble Testing', () => {\n  it('should map values', () => {\n    const source = cold('--a--b--c--|', { a: 1, b: 2, c: 3 });\n    const expected = cold('--x--y--z--|', { x: 2, y: 4, z: 6 });\n\n    const result = source.pipe(map((x) => x * 2));\n\n    expect(result).toBeObservable(expected);\n  });\n\n  it('should handle errors', () => {\n    const source = cold('--a--b--#', { a: 1, b: 2 }, new Error('error'));\n    const expected = cold('--x--y--#', { x: 2, y: 4 }, new Error('error'));\n\n    const result = source.pipe(map((x) => x * 2));\n\n    expect(result).toBeObservable(expected);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-directives",children:"Testing Directives"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"highlight.directive.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Directive, ElementRef, Input, OnChanges } from '@angular/core';\n\n@Directive({\n  selector: '[appHighlight]'\n})\nexport class HighlightDirective implements OnChanges {\n  @Input() appHighlight = '';\n\n  constructor(private el: ElementRef) {}\n\n  ngOnChanges(): void {\n    this.el.nativeElement.style.backgroundColor = this.appHighlight || 'yellow';\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"highlight.directive.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Component } from '@angular/core';\nimport { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { HighlightDirective } from './highlight.directive';\n\n@Component({\n  template: `<div [appHighlight]=\"color\">Test</div>`\n})\nclass TestComponent {\n  color = '';\n}\n\ndescribe('HighlightDirective', () => {\n  let component: TestComponent;\n  let fixture: ComponentFixture<TestComponent>;\n  let div: HTMLElement;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [HighlightDirective, TestComponent]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(TestComponent);\n    component = fixture.componentInstance;\n    div = fixture.nativeElement.querySelector('div');\n  });\n\n  it('should apply default yellow background', () => {\n    fixture.detectChanges();\n    expect(div.style.backgroundColor).toBe('yellow');\n  });\n\n  it('should apply custom color', () => {\n    component.color = 'lightblue';\n    fixture.detectChanges();\n    expect(div.style.backgroundColor).toBe('lightblue');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-pipes",children:"Testing Pipes"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"truncate.pipe.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n  name: 'truncate'\n})\nexport class TruncatePipe implements PipeTransform {\n  transform(value: string, limit: number = 50, trail: string = '...'): string {\n    if (!value) return '';\n    if (value.length <= limit) return value;\n    return value.substring(0, limit) + trail;\n  }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"truncate.pipe.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TruncatePipe } from './truncate.pipe';\n\ndescribe('TruncatePipe', () => {\n  let pipe: TruncatePipe;\n\n  beforeEach(() => {\n    pipe = new TruncatePipe();\n  });\n\n  it('should create an instance', () => {\n    expect(pipe).toBeTruthy();\n  });\n\n  it('should return empty string for null/undefined', () => {\n    expect(pipe.transform('')).toBe('');\n  });\n\n  it('should not truncate short strings', () => {\n    const text = 'Hello World';\n    expect(pipe.transform(text)).toBe('Hello World');\n  });\n\n  it('should truncate long strings with default limit', () => {\n    const text = 'A'.repeat(100);\n    const result = pipe.transform(text);\n    expect(result.length).toBe(53); // 50 + '...'\n    expect(result.endsWith('...')).toBe(true);\n  });\n\n  it('should truncate with custom limit', () => {\n    const text = 'Hello World, this is a test';\n    const result = pipe.transform(text, 10);\n    expect(result).toBe('Hello Worl...');\n  });\n\n  it('should truncate with custom trail', () => {\n    const text = 'Hello World, this is a test';\n    const result = pipe.transform(text, 10, '---');\n    expect(result).toBe('Hello Worl---');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-forms",children:"Testing Forms"}),"\n",(0,s.jsx)(n.h3,{id:"template-driven-forms",children:"Template-Driven Forms"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"login-form.component.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Component } from \'@angular/core\';\n\n@Component({\n  selector: \'app-login-form\',\n  template: `\n    <form #loginForm="ngForm" (ngSubmit)="onSubmit()">\n      <input\n        name="email"\n        type="email"\n        [(ngModel)]="email"\n        required\n        email\n        #emailField="ngModel"\n      />\n      <div *ngIf="emailField.invalid && emailField.touched">\n        <span *ngIf="emailField.errors?.[\'required\']">Email is required</span>\n        <span *ngIf="emailField.errors?.[\'email\']">Invalid email</span>\n      </div>\n\n      <input\n        name="password"\n        type="password"\n        [(ngModel)]="password"\n        required\n        minlength="6"\n        #passwordField="ngModel"\n      />\n      <div *ngIf="passwordField.invalid && passwordField.touched">\n        <span *ngIf="passwordField.errors?.[\'required\']">Password is required</span>\n        <span *ngIf="passwordField.errors?.[\'minlength\']">Min 6 characters</span>\n      </div>\n\n      <button type="submit" [disabled]="loginForm.invalid">Login</button>\n    </form>\n  `\n})\nexport class LoginFormComponent {\n  email = \'\';\n  password = \'\';\n  submitted = false;\n\n  onSubmit(): void {\n    this.submitted = true;\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"login-form.component.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { FormsModule } from '@angular/forms';\nimport { LoginFormComponent } from './login-form.component';\n\ndescribe('LoginFormComponent (Template-Driven)', () => {\n  let component: LoginFormComponent;\n  let fixture: ComponentFixture<LoginFormComponent>;\n  let compiled: HTMLElement;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [LoginFormComponent],\n      imports: [FormsModule]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(LoginFormComponent);\n    component = fixture.componentInstance;\n    compiled = fixture.nativeElement;\n    fixture.detectChanges();\n  });\n\n  it('should create', () => {\n    expect(component).toBeTruthy();\n  });\n\n  it('should disable submit button when form is invalid', () => {\n    const button = compiled.querySelector('button') as HTMLButtonElement;\n    expect(button.disabled).toBe(true);\n  });\n\n  it('should enable submit button when form is valid', async () => {\n    component.email = 'test@example.com';\n    component.password = 'password123';\n    fixture.detectChanges();\n    await fixture.whenStable();\n\n    const button = compiled.querySelector('button') as HTMLButtonElement;\n    expect(button.disabled).toBe(false);\n  });\n\n  it('should show email validation errors', async () => {\n    const emailInput = compiled.querySelector('input[name=\"email\"]') as HTMLInputElement;\n\n    emailInput.value = '';\n    emailInput.dispatchEvent(new Event('input'));\n    emailInput.dispatchEvent(new Event('blur'));\n    fixture.detectChanges();\n    await fixture.whenStable();\n\n    expect(compiled.textContent).toContain('Email is required');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"reactive-forms",children:"Reactive Forms"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"register-form.component.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:'import { Component, OnInit } from \'@angular/core\';\nimport { FormBuilder, FormGroup, Validators } from \'@angular/forms\';\n\n@Component({\n  selector: \'app-register-form\',\n  template: `\n    <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">\n      <input formControlName="email" type="email" />\n      <div *ngIf="email?.invalid && email?.touched">\n        <span *ngIf="email?.errors?.[\'required\']">Email is required</span>\n        <span *ngIf="email?.errors?.[\'email\']">Invalid email</span>\n      </div>\n\n      <input formControlName="password" type="password" />\n      <div *ngIf="password?.invalid && password?.touched">\n        <span *ngIf="password?.errors?.[\'required\']">Password is required</span>\n        <span *ngIf="password?.errors?.[\'minlength\']">Min 8 characters</span>\n      </div>\n\n      <button type="submit" [disabled]="registerForm.invalid">Register</button>\n    </form>\n  `\n})\nexport class RegisterFormComponent implements OnInit {\n  registerForm!: FormGroup;\n  submitted = false;\n\n  constructor(private fb: FormBuilder) {}\n\n  ngOnInit(): void {\n    this.registerForm = this.fb.group({\n      email: [\'\', [Validators.required, Validators.email]],\n      password: [\'\', [Validators.required, Validators.minLength(8)]]\n    });\n  }\n\n  get email() {\n    return this.registerForm.get(\'email\');\n  }\n\n  get password() {\n    return this.registerForm.get(\'password\');\n  }\n\n  onSubmit(): void {\n    if (this.registerForm.valid) {\n      this.submitted = true;\n    }\n  }\n}\n'})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"register-form.component.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { ReactiveFormsModule } from '@angular/forms';\nimport { RegisterFormComponent } from './register-form.component';\n\ndescribe('RegisterFormComponent (Reactive)', () => {\n  let component: RegisterFormComponent;\n  let fixture: ComponentFixture<RegisterFormComponent>;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [RegisterFormComponent],\n      imports: [ReactiveFormsModule]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(RegisterFormComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  });\n\n  it('should create form with email and password controls', () => {\n    expect(component.registerForm.contains('email')).toBe(true);\n    expect(component.registerForm.contains('password')).toBe(true);\n  });\n\n  it('should make email required', () => {\n    const control = component.registerForm.get('email');\n    control?.setValue('');\n    expect(control?.valid).toBe(false);\n    expect(control?.hasError('required')).toBe(true);\n  });\n\n  it('should validate email format', () => {\n    const control = component.registerForm.get('email');\n    control?.setValue('invalid-email');\n    expect(control?.hasError('email')).toBe(true);\n\n    control?.setValue('valid@example.com');\n    expect(control?.hasError('email')).toBe(false);\n  });\n\n  it('should validate password minimum length', () => {\n    const control = component.registerForm.get('password');\n    control?.setValue('short');\n    expect(control?.hasError('minlength')).toBe(true);\n\n    control?.setValue('longpassword');\n    expect(control?.hasError('minlength')).toBe(false);\n  });\n\n  it('should be invalid when empty', () => {\n    expect(component.registerForm.valid).toBe(false);\n  });\n\n  it('should be valid when filled correctly', () => {\n    component.registerForm.patchValue({\n      email: 'test@example.com',\n      password: 'password123'\n    });\n    expect(component.registerForm.valid).toBe(true);\n  });\n\n  it('should submit when form is valid', () => {\n    component.registerForm.patchValue({\n      email: 'test@example.com',\n      password: 'password123'\n    });\n\n    component.onSubmit();\n    expect(component.submitted).toBe(true);\n  });\n\n  it('should not submit when form is invalid', () => {\n    component.registerForm.patchValue({\n      email: 'invalid',\n      password: 'short'\n    });\n\n    component.onSubmit();\n    expect(component.submitted).toBe(false);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-routing",children:"Testing Routing"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"app-routing.module.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { HomeComponent } from './home/home.component';\nimport { AboutComponent } from './about/about.component';\nimport { UserDetailComponent } from './user-detail/user-detail.component';\n\nconst routes: Routes = [\n  { path: '', component: HomeComponent },\n  { path: 'about', component: AboutComponent },\n  { path: 'users/:id', component: UserDetailComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forRoot(routes)],\n  exports: [RouterModule]\n})\nexport class AppRoutingModule {}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"navigation.component.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { Router } from '@angular/router';\nimport { Location } from '@angular/common';\nimport { RouterTestingModule } from '@angular/router/testing';\nimport { NavigationComponent } from './navigation.component';\nimport { HomeComponent } from '../home/home.component';\nimport { AboutComponent } from '../about/about.component';\n\ndescribe('Router Navigation', () => {\n  let router: Router;\n  let location: Location;\n  let fixture: ComponentFixture<NavigationComponent>;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [NavigationComponent, HomeComponent, AboutComponent],\n      imports: [\n        RouterTestingModule.withRoutes([\n          { path: '', component: HomeComponent },\n          { path: 'about', component: AboutComponent }\n        ])\n      ]\n    }).compileComponents();\n\n    router = TestBed.inject(Router);\n    location = TestBed.inject(Location);\n    fixture = TestBed.createComponent(NavigationComponent);\n  });\n\n  it('should navigate to home', async () => {\n    await router.navigate(['']);\n    expect(location.path()).toBe('');\n  });\n\n  it('should navigate to about page', async () => {\n    await router.navigate(['about']);\n    expect(location.path()).toBe('/about');\n  });\n});\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Testing Route Parameters"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { ComponentFixture, TestBed } from '@angular/core/testing';\nimport { ActivatedRoute } from '@angular/router';\nimport { of } from 'rxjs';\nimport { UserDetailComponent } from './user-detail.component';\n\ndescribe('UserDetailComponent with Route Params', () => {\n  let component: UserDetailComponent;\n  let fixture: ComponentFixture<UserDetailComponent>;\n\n  beforeEach(async () => {\n    await TestBed.configureTestingModule({\n      declarations: [UserDetailComponent],\n      providers: [\n        {\n          provide: ActivatedRoute,\n          useValue: {\n            params: of({ id: '123' }),\n            snapshot: { params: { id: '123' } }\n          }\n        }\n      ]\n    }).compileComponents();\n\n    fixture = TestBed.createComponent(UserDetailComponent);\n    component = fixture.componentInstance;\n    fixture.detectChanges();\n  });\n\n  it('should get user id from route params', () => {\n    expect(component.userId).toBe('123');\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"testing-ngrx-state-management",children:"Testing NgRx (State Management)"}),"\n",(0,s.jsx)(n.h3,{id:"testing-reducers",children:"Testing Reducers"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.reducer.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { createReducer, on } from '@ngrx/store';\nimport { loadUsers, loadUsersSuccess, loadUsersFailure } from './user.actions';\n\nexport interface UserState {\n  users: any[];\n  loading: boolean;\n  error: string | null;\n}\n\nexport const initialState: UserState = {\n  users: [],\n  loading: false,\n  error: null\n};\n\nexport const userReducer = createReducer(\n  initialState,\n  on(loadUsers, (state) => ({ ...state, loading: true, error: null })),\n  on(loadUsersSuccess, (state, { users }) => ({\n    ...state,\n    users,\n    loading: false\n  })),\n  on(loadUsersFailure, (state, { error }) => ({\n    ...state,\n    loading: false,\n    error\n  }))\n);\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.reducer.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { userReducer, initialState } from './user.reducer';\nimport { loadUsers, loadUsersSuccess, loadUsersFailure } from './user.actions';\n\ndescribe('User Reducer', () => {\n  it('should return initial state', () => {\n    const action = { type: 'Unknown' };\n    const state = userReducer(undefined, action);\n    expect(state).toBe(initialState);\n  });\n\n  it('should set loading to true on loadUsers', () => {\n    const action = loadUsers();\n    const state = userReducer(initialState, action);\n\n    expect(state.loading).toBe(true);\n    expect(state.error).toBe(null);\n  });\n\n  it('should load users on loadUsersSuccess', () => {\n    const users = [{ id: 1, name: 'Alice' }];\n    const action = loadUsersSuccess({ users });\n    const state = userReducer(initialState, action);\n\n    expect(state.users).toEqual(users);\n    expect(state.loading).toBe(false);\n  });\n\n  it('should set error on loadUsersFailure', () => {\n    const error = 'Failed to load';\n    const action = loadUsersFailure({ error });\n    const state = userReducer(initialState, action);\n\n    expect(state.error).toBe(error);\n    expect(state.loading).toBe(false);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"testing-effects",children:"Testing Effects"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.effects.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { Injectable } from '@angular/core';\nimport { Actions, createEffect, ofType } from '@ngrx/effects';\nimport { of } from 'rxjs';\nimport { map, catchError, switchMap } from 'rxjs/operators';\nimport { UserService } from './user.service';\nimport { loadUsers, loadUsersSuccess, loadUsersFailure } from './user.actions';\n\n@Injectable()\nexport class UserEffects {\n  loadUsers$ = createEffect(() =>\n    this.actions$.pipe(\n      ofType(loadUsers),\n      switchMap(() =>\n        this.userService.getUsers().pipe(\n          map((users) => loadUsersSuccess({ users })),\n          catchError((error) => of(loadUsersFailure({ error: error.message })))\n        )\n      )\n    )\n  );\n\n  constructor(private actions$: Actions, private userService: UserService) {}\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.effects.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { TestBed } from '@angular/core/testing';\nimport { provideMockActions } from '@ngrx/effects/testing';\nimport { Observable, of, throwError } from 'rxjs';\nimport { UserEffects } from './user.effects';\nimport { UserService } from './user.service';\nimport { loadUsers, loadUsersSuccess, loadUsersFailure } from './user.actions';\n\ndescribe('UserEffects', () => {\n  let actions$: Observable<any>;\n  let effects: UserEffects;\n  let userService: jasmine.SpyObj<UserService>;\n\n  const mockUsers = [{ id: 1, name: 'Alice', email: 'alice@example.com' }];\n\n  beforeEach(() => {\n    const userServiceSpy = jasmine.createSpyObj('UserService', ['getUsers']);\n\n    TestBed.configureTestingModule({\n      providers: [\n        UserEffects,\n        provideMockActions(() => actions$),\n        { provide: UserService, useValue: userServiceSpy }\n      ]\n    });\n\n    effects = TestBed.inject(UserEffects);\n    userService = TestBed.inject(UserService) as jasmine.SpyObj<UserService>;\n  });\n\n  it('should return loadUsersSuccess on success', (done) => {\n    userService.getUsers.and.returnValue(of(mockUsers));\n    actions$ = of(loadUsers());\n\n    effects.loadUsers$.subscribe((action) => {\n      expect(action).toEqual(loadUsersSuccess({ users: mockUsers }));\n      done();\n    });\n  });\n\n  it('should return loadUsersFailure on error', (done) => {\n    const error = new Error('Network error');\n    userService.getUsers.and.returnValue(throwError(() => error));\n    actions$ = of(loadUsers());\n\n    effects.loadUsers$.subscribe((action) => {\n      expect(action).toEqual(loadUsersFailure({ error: 'Network error' }));\n      done();\n    });\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"testing-selectors",children:"Testing Selectors"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.selectors.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { createFeatureSelector, createSelector } from '@ngrx/store';\nimport { UserState } from './user.reducer';\n\nexport const selectUserState = createFeatureSelector<UserState>('users');\n\nexport const selectAllUsers = createSelector(\n  selectUserState,\n  (state) => state.users\n);\n\nexport const selectUsersLoading = createSelector(\n  selectUserState,\n  (state) => state.loading\n);\n\nexport const selectUsersError = createSelector(\n  selectUserState,\n  (state) => state.error\n);\n\nexport const selectUserById = (id: number) =>\n  createSelector(selectAllUsers, (users) => users.find((user) => user.id === id));\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"user.selectors.spec.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"import { UserState } from './user.reducer';\nimport { selectAllUsers, selectUsersLoading, selectUserById } from './user.selectors';\n\ndescribe('User Selectors', () => {\n  const mockState: { users: UserState } = {\n    users: {\n      users: [\n        { id: 1, name: 'Alice', email: 'alice@example.com' },\n        { id: 2, name: 'Bob', email: 'bob@example.com' }\n      ],\n      loading: false,\n      error: null\n    }\n  };\n\n  it('should select all users', () => {\n    const result = selectAllUsers(mockState);\n    expect(result.length).toBe(2);\n    expect(result).toEqual(mockState.users.users);\n  });\n\n  it('should select loading state', () => {\n    const result = selectUsersLoading(mockState);\n    expect(result).toBe(false);\n  });\n\n  it('should select user by id', () => {\n    const result = selectUserById(1)(mockState);\n    expect(result).toEqual({ id: 1, name: 'Alice', email: 'alice@example.com' });\n  });\n\n  it('should return undefined for non-existent user', () => {\n    const result = selectUserById(999)(mockState);\n    expect(result).toBeUndefined();\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"e2e-testing",children:"E2E Testing"}),"\n",(0,s.jsx)(n.h3,{id:"protractor-deprecated",children:"Protractor (Deprecated)"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Note"}),": Protractor is deprecated. Consider using Cypress or Playwright instead."]}),"\n",(0,s.jsx)(n.h3,{id:"cypress-for-angular",children:"Cypress for Angular"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"npm install --save-dev cypress @cypress/schematic\nng add @cypress/schematic\n"})}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"cypress/e2e/app.cy.ts"}),":"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"describe('My App', () => {\n  beforeEach(() => {\n    cy.visit('/');\n  });\n\n  it('should display welcome message', () => {\n    cy.contains('Welcome to my-app');\n  });\n\n  it('should navigate to about page', () => {\n    cy.get('a[href=\"/about\"]').click();\n    cy.url().should('include', '/about');\n    cy.contains('About Us');\n  });\n\n  it('should fill and submit form', () => {\n    cy.get('input[name=\"email\"]').type('test@example.com');\n    cy.get('input[name=\"password\"]').type('password123');\n    cy.get('button[type=\"submit\"]').click();\n\n    cy.contains('Login successful');\n  });\n\n  it('should display user list', () => {\n    cy.intercept('GET', '/api/users', { fixture: 'users.json' });\n    cy.visit('/users');\n\n    cy.get('.user-card').should('have.length', 3);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.h3,{id:"1-use-testbed-properly",children:"1. Use TestBed Properly"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good - Reset TestBed between tests\nbeforeEach(async () => {\n  await TestBed.configureTestingModule({\n    // configuration\n  }).compileComponents();\n});\n\n// \u274c Avoid - Reusing TestBed across tests\n"})}),"\n",(0,s.jsx)(n.h3,{id:"2-use-spies-for-dependencies",children:"2. Use Spies for Dependencies"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good - Use jasmine spies\nconst userServiceSpy = jasmine.createSpyObj('UserService', ['getUsers']);\nuserServiceSpy.getUsers.and.returnValue(of(mockUsers));\n\n// \u274c Avoid - Real dependencies in unit tests\n"})}),"\n",(0,s.jsx)(n.h3,{id:"3-test-component-logic-not-implementation",children:"3. Test Component Logic, Not Implementation"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good - Test behavior\nit('should display users when loaded', () => {\n  component.users = mockUsers;\n  fixture.detectChanges();\n  expect(compiled.querySelectorAll('.user').length).toBe(2);\n});\n\n// \u274c Avoid - Testing private methods\nit('should call private method', () => {\n  component['privateMethod'](); // Don't test private methods\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"4-use-detectchanges-wisely",children:"4. Use detectChanges() Wisely"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good - Call detectChanges after changes\ncomponent.title = 'New Title';\nfixture.detectChanges();\nexpect(compiled.querySelector('h1')?.textContent).toBe('New Title');\n\n// \u274c Avoid - Forgetting detectChanges\ncomponent.title = 'New Title';\nexpect(compiled.querySelector('h1')?.textContent).toBe('New Title'); // Fails!\n"})}),"\n",(0,s.jsx)(n.h3,{id:"5-clean-up-subscriptions",children:"5. Clean Up Subscriptions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// \u2705 Good - Use done callback for async\nit('should load users', (done) => {\n  service.getUsers().subscribe({\n    next: (users) => {\n      expect(users.length).toBe(2);\n      done();\n    }\n  });\n});\n\n// \u2705 Good - Use fakeAsync/tick\nit('should load users', fakeAsync(() => {\n  let result;\n  service.getUsers().subscribe((users) => {\n    result = users;\n  });\n  tick();\n  expect(result.length).toBe(2);\n}));\n"})}),"\n",(0,s.jsx)(n.h2,{id:"common-testing-patterns",children:"Common Testing Patterns"}),"\n",(0,s.jsx)(n.h3,{id:"pattern-page-object-model",children:"Pattern: Page Object Model"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// user-list.page.ts\nexport class UserListPage {\n  constructor(private fixture: ComponentFixture<UserListComponent>) {}\n\n  get users() {\n    return this.fixture.nativeElement.querySelectorAll('.user-card');\n  }\n\n  get loadingSpinner() {\n    return this.fixture.nativeElement.querySelector('.loading');\n  }\n\n  get errorMessage() {\n    return this.fixture.nativeElement.querySelector('.error')?.textContent;\n  }\n\n  clickUser(index: number): void {\n    this.users[index].click();\n  }\n}\n\n// Usage in test\ndescribe('UserListComponent', () => {\n  let page: UserListPage;\n\n  beforeEach(() => {\n    page = new UserListPage(fixture);\n  });\n\n  it('should display users', () => {\n    expect(page.users.length).toBe(3);\n  });\n});\n"})}),"\n",(0,s.jsx)(n.h3,{id:"pattern-test-helpers",children:"Pattern: Test Helpers"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-typescript",children:"// test-helpers.ts\nexport function createMockUser(overrides?: Partial<User>): User {\n  return {\n    id: 1,\n    name: 'Test User',\n    email: 'test@example.com',\n    ...overrides\n  };\n}\n\nexport function triggerClick(element: HTMLElement): void {\n  element.click();\n  element.dispatchEvent(new Event('click'));\n}\n\n// Usage\nconst user = createMockUser({ name: 'Alice' });\n"})}),"\n",(0,s.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsx)(n.h3,{id:"official-documentation",children:"Official Documentation"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://angular.io/guide/testing",children:"Angular Testing Guide"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://jasmine.github.io/",children:"Jasmine Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://karma-runner.github.io/",children:"Karma Documentation"})}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"tools",children:"Tools"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Jasmine"})," - Testing framework"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Karma"})," - Test runner"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Protractor"})," - E2E (deprecated)"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Cypress"})," - Modern E2E testing"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Playwright"})," - E2E testing alternative"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"jasmine-marbles"})," - RxJS testing"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"learning-resources",children:"Learning Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://testing-library.com/docs/angular-testing-library/intro/",children:"Angular Testing Library"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://ngrx.io/guide/store/testing",children:"NgRx Testing Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://docs.cypress.io/guides/component-testing/angular/overview",children:"Cypress Angular Guide"})}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,s.jsx)(n.p,{children:"After mastering Angular testing:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["Explore ",(0,s.jsx)(n.strong,{children:"E2E Testing"})," with Cypress or Playwright"]}),"\n",(0,s.jsxs)(n.li,{children:["Learn ",(0,s.jsx)(n.strong,{children:"Performance Testing"})," for Angular apps"]}),"\n",(0,s.jsxs)(n.li,{children:["Practice ",(0,s.jsx)(n.strong,{children:"Accessibility Testing"})," with axe-core"]}),"\n",(0,s.jsxs)(n.li,{children:["Study ",(0,s.jsx)(n.strong,{children:"Visual Regression Testing"})," with Percy or Chromatic"]}),"\n",(0,s.jsxs)(n.li,{children:["Master ",(0,s.jsx)(n.strong,{children:"NgRx Testing"})," for complex state management"]}),"\n"]})]})}function p(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>i,x:()=>a});var r=t(96540);const s={},o=r.createContext(s);function i(e){const n=r.useContext(o);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),r.createElement(o.Provider,{value:n},e.children)}}}]);