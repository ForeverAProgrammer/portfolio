"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[3213],{5032:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>o,contentTitle:()=>r,default:()=>g,frontMatter:()=>a,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"design-patterns/creational/singleton","title":"Singleton Pattern","description":"Ensure a class has only one instance and provide a global point of access to it.","source":"@site/docs/design-patterns/creational/singleton.md","sourceDirName":"design-patterns/creational","slug":"/design-patterns/creational/singleton","permalink":"/portfolio/docs/design-patterns/creational/singleton","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Creational Patterns","permalink":"/portfolio/docs/design-patterns/creational/"},"next":{"title":"Factory Method Pattern","permalink":"/portfolio/docs/design-patterns/creational/factory-method"}}');var l=i(4848),s=i(8453);const a={sidebar_position:1},r="Singleton Pattern",o={},c=[{value:"Problem",id:"problem",level:2},{value:"Design Principles Applied",id:"design-principles-applied",level:2},{value:"UML Diagram",id:"uml-diagram",level:2},{value:"Implementation Approaches",id:"implementation-approaches",level:2},{value:"1. Eager Initialization (Thread-Safe)",id:"1-eager-initialization-thread-safe",level:3},{value:"2. Lazy Initialization (Not Thread-Safe)",id:"2-lazy-initialization-not-thread-safe",level:3},{value:"3. Thread-Safe Lazy Initialization (Synchronized)",id:"3-thread-safe-lazy-initialization-synchronized",level:3},{value:"4. Double-Checked Locking (Efficient)",id:"4-double-checked-locking-efficient",level:3},{value:"5. Bill Pugh Solution (Best Practice)",id:"5-bill-pugh-solution-best-practice",level:3},{value:"6. Enum Singleton (Joshua Bloch Recommendation)",id:"6-enum-singleton-joshua-bloch-recommendation",level:3},{value:"Real-World Example: Logger",id:"real-world-example-logger",level:2},{value:"Real-World Example: Configuration Manager",id:"real-world-example-configuration-manager",level:2},{value:"Breaking Singleton",id:"breaking-singleton",level:2},{value:"1. Reflection Attack",id:"1-reflection-attack",level:3},{value:"2. Serialization Breaking",id:"2-serialization-breaking",level:3},{value:"3. Cloning Breaking",id:"3-cloning-breaking",level:3},{value:"Benefits",id:"benefits",level:2},{value:"Drawbacks",id:"drawbacks",level:2},{value:"When to Use",id:"when-to-use",level:2},{value:"Alternatives to Singleton",id:"alternatives-to-singleton",level:2},{value:"Dependency Injection",id:"dependency-injection",level:3},{value:"Monostate Pattern (Alternative)",id:"monostate-pattern-alternative",level:3},{value:"Real-World Java Examples",id:"real-world-java-examples",level:2},{value:"Runtime Class",id:"runtime-class",level:3},{value:"Desktop Class",id:"desktop-class",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Summary",id:"summary",level:2}];function d(n){const e={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,s.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"singleton-pattern",children:"Singleton Pattern"})}),"\n",(0,l.jsx)(e.p,{children:"Ensure a class has only one instance and provide a global point of access to it."}),"\n",(0,l.jsx)(e.h2,{id:"problem",children:"Problem"}),"\n",(0,l.jsx)(e.p,{children:"You need to ensure that a class has exactly one instance and provide a single global access point to that instance."}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Common Scenarios:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Database connection pools"}),"\n",(0,l.jsx)(e.li,{children:"Configuration managers"}),"\n",(0,l.jsx)(e.li,{children:"Logger instances"}),"\n",(0,l.jsx)(e.li,{children:"Thread pools"}),"\n",(0,l.jsx)(e.li,{children:"Caches"}),"\n",(0,l.jsx)(e.li,{children:"Device drivers (printer spooler)"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"design-principles-applied",children:"Design Principles Applied"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Single Responsibility"})," - Class manages its own single instance"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Encapsulation"})," - Private constructor prevents external instantiation"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"uml-diagram",children:"UML Diagram"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502      Singleton         \u2502\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524\n\u2502 - uniqueInstance       \u2502 \u2190\u2500\u2510\n\u2502                        \u2502   \u2502 Self-reference\n\u251c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2524   \u2502\n\u2502 - Singleton()          \u2502   \u2502 Private constructor\n\u2502 + getInstance()        \u2502\u2500\u2500\u2500\u2518 Returns unique instance\n\u2502 + singletonOperation() \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(e.h2,{id:"implementation-approaches",children:"Implementation Approaches"}),"\n",(0,l.jsx)(e.h3,{id:"1-eager-initialization-thread-safe",children:"1. Eager Initialization (Thread-Safe)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class Singleton {\n    // Instance created at class loading time\n    private static final Singleton instance = new Singleton();\n\n    // Private constructor prevents instantiation\n    private Singleton() {\n        System.out.println("Singleton instance created");\n    }\n\n    public static Singleton getInstance() {\n        return instance;\n    }\n\n    public void doSomething() {\n        System.out.println("Singleton doing something");\n    }\n}\n\n// Usage\npublic class EagerSingletonDemo {\n    public static void main(String[] args) {\n        Singleton s1 = Singleton.getInstance();\n        Singleton s2 = Singleton.getInstance();\n\n        System.out.println("Same instance? " + (s1 == s2)); // true\n\n        s1.doSomething();\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Thread-safe without synchronization"}),"\n",(0,l.jsx)(e.li,{children:"Simple and straightforward"}),"\n",(0,l.jsx)(e.li,{children:"No lazy initialization issues"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Instance created even if never used"}),"\n",(0,l.jsx)(e.li,{children:"No control over instantiation timing"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"2-lazy-initialization-not-thread-safe",children:"2. Lazy Initialization (Not Thread-Safe)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class LazySingleton {\n    private static LazySingleton instance;\n\n    private LazySingleton() {\n        System.out.println("LazySingleton instance created");\n    }\n\n    // NOT thread-safe!\n    public static LazySingleton getInstance() {\n        if (instance == null) {\n            instance = new LazySingleton();\n        }\n        return instance;\n    }\n}\n'})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Problem:"})," Two threads can create multiple instances!"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"Thread t1 = new Thread(() -> {\n    LazySingleton s1 = LazySingleton.getInstance();\n});\n\nThread t2 = new Thread(() -> {\n    LazySingleton s2 = LazySingleton.getInstance();\n});\n\n// Both threads might create separate instances!\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-thread-safe-lazy-initialization-synchronized",children:"3. Thread-Safe Lazy Initialization (Synchronized)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class ThreadSafeSingleton {\n    private static ThreadSafeSingleton instance;\n\n    private ThreadSafeSingleton() {\n    }\n\n    // Thread-safe but slow\n    public static synchronized ThreadSafeSingleton getInstance() {\n        if (instance == null) {\n            instance = new ThreadSafeSingleton();\n        }\n        return instance;\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Thread-safe"}),"\n",(0,l.jsx)(e.li,{children:"Lazy initialization"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Synchronization overhead on every call"}),"\n",(0,l.jsx)(e.li,{children:"Performance bottleneck"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"4-double-checked-locking-efficient",children:"4. Double-Checked Locking (Efficient)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class DoubleCheckedSingleton {\n    // volatile ensures visibility across threads\n    private static volatile DoubleCheckedSingleton instance;\n\n    private DoubleCheckedSingleton() {\n    }\n\n    public static DoubleCheckedSingleton getInstance() {\n        // First check (no locking)\n        if (instance == null) {\n            synchronized (DoubleCheckedSingleton.class) {\n                // Second check (with locking)\n                if (instance == null) {\n                    instance = new DoubleCheckedSingleton();\n                }\n            }\n        }\n        return instance;\n    }\n}\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Why volatile is important:"}),"\nWithout ",(0,l.jsx)(e.code,{children:"volatile"}),", partially constructed objects could be visible to other threads."]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Thread-safe"}),"\n",(0,l.jsx)(e.li,{children:"Lazy initialization"}),"\n",(0,l.jsx)(e.li,{children:"Good performance (minimal synchronization)"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Complex to understand"}),"\n",(0,l.jsx)(e.li,{children:"Requires Java 5+ for volatile to work correctly"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"5-bill-pugh-solution-best-practice",children:"5. Bill Pugh Solution (Best Practice)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class BillPughSingleton {\n    private BillPughSingleton() {\n    }\n\n    // Inner static class - loaded only when getInstance() is called\n    private static class SingletonHelper {\n        private static final BillPughSingleton INSTANCE = new BillPughSingleton();\n    }\n\n    public static BillPughSingleton getInstance() {\n        return SingletonHelper.INSTANCE;\n    }\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Thread-safe without synchronization"}),"\n",(0,l.jsx)(e.li,{children:"Lazy initialization"}),"\n",(0,l.jsx)(e.li,{children:"Simple and clean"}),"\n",(0,l.jsx)(e.li,{children:"Best performance"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"None! This is the recommended approach"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"6-enum-singleton-joshua-bloch-recommendation",children:"6. Enum Singleton (Joshua Bloch Recommendation)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public enum EnumSingleton {\n    INSTANCE;\n\n    private int value;\n\n    public int getValue() {\n        return value;\n    }\n\n    public void setValue(int value) {\n        this.value = value;\n    }\n\n    public void doSomething() {\n        System.out.println("Enum singleton doing something");\n    }\n}\n\n// Usage\npublic class EnumSingletonDemo {\n    public static void main(String[] args) {\n        EnumSingleton singleton = EnumSingleton.INSTANCE;\n        singleton.setValue(42);\n        System.out.println(singleton.getValue());\n\n        EnumSingleton another = EnumSingleton.INSTANCE;\n        System.out.println("Same instance? " + (singleton == another)); // true\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Pros:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Thread-safe"}),"\n",(0,l.jsx)(e.li,{children:"Serialization handled automatically"}),"\n",(0,l.jsx)(e.li,{children:"Prevents reflection attacks"}),"\n",(0,l.jsx)(e.li,{children:"Simplest implementation"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Cons:"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"No lazy initialization"}),"\n",(0,l.jsx)(e.li,{children:"Enum-specific syntax"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"real-world-example-logger",children:"Real-World Example: Logger"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class Logger {\n    private static volatile Logger instance;\n    private final List<String> logs;\n\n    private Logger() {\n        logs = new ArrayList<>();\n    }\n\n    public static Logger getInstance() {\n        if (instance == null) {\n            synchronized (Logger.class) {\n                if (instance == null) {\n                    instance = new Logger();\n                }\n            }\n        }\n        return instance;\n    }\n\n    public void log(String message) {\n        String timestamp = java.time.LocalDateTime.now().toString();\n        String logEntry = "[" + timestamp + "] " + message;\n        logs.add(logEntry);\n        System.out.println(logEntry);\n    }\n\n    public void printLogs() {\n        System.out.println("\\n=== All Logs ===");\n        logs.forEach(System.out::println);\n    }\n\n    public void clearLogs() {\n        logs.clear();\n        System.out.println("Logs cleared");\n    }\n}\n\n// Usage\npublic class LoggerDemo {\n    public static void main(String[] args) {\n        Logger logger1 = Logger.getInstance();\n        logger1.log("Application started");\n        logger1.log("Processing data");\n\n        // Same instance everywhere\n        Logger logger2 = Logger.getInstance();\n        logger2.log("Data processed successfully");\n\n        System.out.println("\\nSame logger? " + (logger1 == logger2));\n\n        logger1.printLogs();\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"real-world-example-configuration-manager",children:"Real-World Example: Configuration Manager"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class ConfigurationManager {\n    private static ConfigurationManager instance;\n    private Properties config;\n\n    private ConfigurationManager() {\n        config = new Properties();\n        loadConfiguration();\n    }\n\n    private void loadConfiguration() {\n        // Load from file or database\n        config.setProperty("database.url", "jdbc:mysql://localhost:3306/mydb");\n        config.setProperty("database.user", "admin");\n        config.setProperty("max.connections", "100");\n        config.setProperty("timeout", "30");\n    }\n\n    public static synchronized ConfigurationManager getInstance() {\n        if (instance == null) {\n            instance = new ConfigurationManager();\n        }\n        return instance;\n    }\n\n    public String getProperty(String key) {\n        return config.getProperty(key);\n    }\n\n    public void setProperty(String key, String value) {\n        config.setProperty(key, value);\n    }\n\n    public void printConfiguration() {\n        System.out.println("\\n=== Configuration ===");\n        config.forEach((key, value) ->\n            System.out.println(key + " = " + value));\n    }\n}\n\n// Usage\npublic class ConfigDemo {\n    public static void main(String[] args) {\n        ConfigurationManager config = ConfigurationManager.getInstance();\n\n        System.out.println("Database URL: " +\n            config.getProperty("database.url"));\n        System.out.println("Max Connections: " +\n            config.getProperty("max.connections"));\n\n        config.printConfiguration();\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"breaking-singleton",children:"Breaking Singleton"}),"\n",(0,l.jsx)(e.h3,{id:"1-reflection-attack",children:"1. Reflection Attack"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class ReflectionAttack {\n    public static void main(String[] args) throws Exception {\n        Singleton instance1 = Singleton.getInstance();\n\n        // Use reflection to create another instance\n        Constructor<Singleton> constructor =\n            Singleton.class.getDeclaredConstructor();\n        constructor.setAccessible(true);\n        Singleton instance2 = constructor.newInstance();\n\n        System.out.println("Same instance? " + (instance1 == instance2)); // false!\n    }\n}\n'})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Protection:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'public class ProtectedSingleton {\n    private static ProtectedSingleton instance;\n\n    private ProtectedSingleton() {\n        // Prevent reflection attacks\n        if (instance != null) {\n            throw new RuntimeException("Use getInstance() method");\n        }\n    }\n\n    public static ProtectedSingleton getInstance() {\n        if (instance == null) {\n            instance = new ProtectedSingleton();\n        }\n        return instance;\n    }\n}\n'})}),"\n",(0,l.jsx)(e.h3,{id:"2-serialization-breaking",children:"2. Serialization Breaking"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class SerializableSingleton implements Serializable {\n    private static SerializableSingleton instance;\n\n    private SerializableSingleton() {\n    }\n\n    public static SerializableSingleton getInstance() {\n        if (instance == null) {\n            instance = new SerializableSingleton();\n        }\n        return instance;\n    }\n\n    // Fix serialization issue\n    protected Object readResolve() {\n        return getInstance();\n    }\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"3-cloning-breaking",children:"3. Cloning Breaking"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class CloneProtectedSingleton implements Cloneable {\n    private static CloneProtectedSingleton instance;\n\n    private CloneProtectedSingleton() {\n    }\n\n    public static CloneProtectedSingleton getInstance() {\n        if (instance == null) {\n            instance = new CloneProtectedSingleton();\n        }\n        return instance;\n    }\n\n    // Prevent cloning\n    @Override\n    protected Object clone() throws CloneNotSupportedException {\n        throw new CloneNotSupportedException();\n    }\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"benefits",children:"Benefits"}),"\n",(0,l.jsxs)(e.p,{children:["\u2705 ",(0,l.jsx)(e.strong,{children:"Controlled access to sole instance"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Strict control over instantiation"}),"\n",(0,l.jsx)(e.li,{children:"Single point of access"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u2705 ",(0,l.jsx)(e.strong,{children:"Reduced namespace pollution"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Better than global variables"}),"\n",(0,l.jsx)(e.li,{children:"No name conflicts"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u2705 ",(0,l.jsx)(e.strong,{children:"Permits refinement of operations and representation"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Can be subclassed (carefully)"}),"\n",(0,l.jsx)(e.li,{children:"Can change implementation"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u2705 ",(0,l.jsx)(e.strong,{children:"Lazy initialization"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Create instance only when needed (with some approaches)"}),"\n",(0,l.jsx)(e.li,{children:"Save resources"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"drawbacks",children:"Drawbacks"}),"\n",(0,l.jsxs)(e.p,{children:["\u274c ",(0,l.jsx)(e.strong,{children:"Global state"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Hidden dependencies"}),"\n",(0,l.jsx)(e.li,{children:"Hard to test"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u274c ",(0,l.jsx)(e.strong,{children:"Violates Single Responsibility"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Class controls its own creation"}),"\n",(0,l.jsx)(e.li,{children:"Does its job AND manages instance"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u274c ",(0,l.jsx)(e.strong,{children:"Difficult to unit test"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Hard to mock or stub"}),"\n",(0,l.jsx)(e.li,{children:"State persists between tests"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u274c ",(0,l.jsx)(e.strong,{children:"Concurrency issues"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Must handle thread safety"}),"\n",(0,l.jsx)(e.li,{children:"Can become bottleneck"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"when-to-use",children:"When to Use"}),"\n",(0,l.jsxs)(e.p,{children:["\u2705 ",(0,l.jsx)(e.strong,{children:"Use Singleton When:"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Exactly one instance is needed system-wide"}),"\n",(0,l.jsx)(e.li,{children:"Instance must be accessible from anywhere"}),"\n",(0,l.jsx)(e.li,{children:"Instance should be created lazily"}),"\n",(0,l.jsx)(e.li,{children:"Examples: logging, configuration, driver objects"}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:["\u274c ",(0,l.jsx)(e.strong,{children:"Don't Use When:"})]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"You just need a namespace for utility methods (use static class)"}),"\n",(0,l.jsx)(e.li,{children:"You might need multiple instances later"}),"\n",(0,l.jsx)(e.li,{children:"Testing is difficult with global state"}),"\n",(0,l.jsx)(e.li,{children:"Better alternatives exist (dependency injection)"}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"alternatives-to-singleton",children:"Alternatives to Singleton"}),"\n",(0,l.jsx)(e.h3,{id:"dependency-injection",children:"Dependency Injection"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// Instead of Singleton\npublic class UserService {\n    private Logger logger = Logger.getInstance(); // Tight coupling\n\n    public void createUser(String name) {\n        logger.log("Creating user: " + name);\n    }\n}\n\n// Better: Inject dependency\npublic class UserService {\n    private final Logger logger;\n\n    // Inject through constructor\n    public UserService(Logger logger) {\n        this.logger = logger;\n    }\n\n    public void createUser(String name) {\n        logger.log("Creating user: " + name);\n    }\n}\n\n// Usage with DI\nLogger logger = new Logger();\nUserService userService = new UserService(logger);\n'})}),"\n",(0,l.jsx)(e.h3,{id:"monostate-pattern-alternative",children:"Monostate Pattern (Alternative)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// All instances share same state\npublic class Monostate {\n    private static String sharedState;\n\n    public String getState() {\n        return sharedState;\n    }\n\n    public void setState(String state) {\n        Monostate.sharedState = state;\n    }\n}\n\n// Multiple instances, same state\nMonostate m1 = new Monostate();\nMonostate m2 = new Monostate();\nm1.setState("shared");\nSystem.out.println(m2.getState()); // "shared"\n'})}),"\n",(0,l.jsx)(e.h2,{id:"real-world-java-examples",children:"Real-World Java Examples"}),"\n",(0,l.jsx)(e.h3,{id:"runtime-class",children:"Runtime Class"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// Java\'s Runtime is a singleton\nRuntime runtime = Runtime.getRuntime();\nSystem.out.println("Available processors: " +\n    runtime.availableProcessors());\nSystem.out.println("Free memory: " + runtime.freeMemory());\n'})}),"\n",(0,l.jsx)(e.h3,{id:"desktop-class",children:"Desktop Class"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:'// Desktop class uses singleton pattern\nDesktop desktop = Desktop.getDesktop();\ndesktop.browse(new URI("https://example.com"));\n'})}),"\n",(0,l.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"Use Enum for simple singletons"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public enum Settings {\n    INSTANCE;\n    // Your singleton code\n}\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"Use Bill Pugh for complex singletons"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"public class ComplexSingleton {\n    private ComplexSingleton() { }\n\n    private static class Holder {\n        private static final ComplexSingleton INSTANCE =\n            new ComplexSingleton();\n    }\n\n    public static ComplexSingleton getInstance() {\n        return Holder.INSTANCE;\n    }\n}\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"Make it testable"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"// Use interface\npublic interface Logger {\n    void log(String message);\n}\n\npublic class FileLogger implements Logger {\n    // Singleton implementation\n}\n\n// Easy to mock in tests\npublic class UserService {\n    private final Logger logger;\n\n    public UserService(Logger logger) {\n        this.logger = logger;\n    }\n}\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"4",children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.strong,{children:"Document thread safety"})}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-java",children:"/**\n * Thread-safe singleton using double-checked locking.\n * Safe for concurrent access.\n */\npublic class ThreadSafeSingleton {\n    // Implementation\n}\n"})}),"\n",(0,l.jsx)(e.h2,{id:"summary",children:"Summary"}),"\n",(0,l.jsx)(e.p,{children:"The Singleton Pattern ensures a class has only one instance with:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Private constructor"}),"\n",(0,l.jsx)(e.li,{children:"Static instance variable"}),"\n",(0,l.jsx)(e.li,{children:"Static access method"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Recommended Approaches:"})}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Enum Singleton"})," - For simple cases"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Bill Pugh Singleton"})," - For complex initialization"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Consider Dependency Injection"})," - For better testability"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Key Takeaway:"})," Use Singleton sparingly and consider if dependency injection might be a better solution for testability and flexibility."]})]})}function g(n={}){const{wrapper:e}={...(0,s.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>r});var t=i(6540);const l={},s=t.createContext(l);function a(n){const e=t.useContext(s);return t.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:a(n.components),t.createElement(s.Provider,{value:e},n.children)}}}]);