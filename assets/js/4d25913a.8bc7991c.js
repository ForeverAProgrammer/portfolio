"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[4262],{5755:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>o,contentTitle:()=>i,default:()=>p,frontMatter:()=>l,metadata:()=>t,toc:()=>c});const t=JSON.parse('{"id":"cloud/aws/eks","title":"EKS - Elastic Kubernetes Service","description":"What is EKS?","source":"@site/docs/cloud/aws/eks.md","sourceDirName":"cloud/aws","slug":"/cloud/aws/eks","permalink":"/portfolio/docs/cloud/aws/eks","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"ECR - Elastic Container Registry","permalink":"/portfolio/docs/cloud/aws/ecr"},"next":{"title":"Cost Optimization","permalink":"/portfolio/docs/cloud/aws/cost-optimization"}}');var a=s(4848),r=s(8453);const l={sidebar_position:4},i="EKS - Elastic Kubernetes Service",o={},c=[{value:"What is EKS?",id:"what-is-eks",level:2},{value:"Key Features",id:"key-features",level:2},{value:"EKS Architecture",id:"eks-architecture",level:2},{value:"Creating an EKS Cluster",id:"creating-an-eks-cluster",level:2},{value:"Deploying Applications to EKS",id:"deploying-applications-to-eks",level:2},{value:"EKS with Application Load Balancer",id:"eks-with-application-load-balancer",level:2},{value:"EKS Best Practices",id:"eks-best-practices",level:2},{value:"Monitoring EKS",id:"monitoring-eks",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(n.header,{children:(0,a.jsx)(n.h1,{id:"eks---elastic-kubernetes-service",children:"EKS - Elastic Kubernetes Service"})}),"\n",(0,a.jsx)(n.h2,{id:"what-is-eks",children:"What is EKS?"}),"\n",(0,a.jsxs)(n.p,{children:[(0,a.jsx)(n.strong,{children:"Amazon EKS"})," is a managed Kubernetes service that makes it easy to run Kubernetes on AWS without needing to install and operate your own Kubernetes control plane."]}),"\n",(0,a.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Managed Control Plane"})," - AWS manages Kubernetes masters"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Highly Available"})," - Control plane across multiple AZs"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Secure"})," - IAM integration, VPC isolation"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Scalable"})," - Supports thousands of pods"]}),"\n",(0,a.jsxs)(n.li,{children:[(0,a.jsx)(n.strong,{children:"Compatible"})," - Standard Kubernetes, works with existing tools"]}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"eks-architecture",children:"EKS Architecture"}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502           AWS Managed                    \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510           \u2502\n\u2502   \u2502  Kubernetes              \u2502           \u2502\n\u2502   \u2502  Control Plane           \u2502           \u2502\n\u2502   \u2502  (Masters, etcd, API)    \u2502           \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u253c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                \u2502 Kubernetes API\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502        Your AWS Account                  \u2502\n\u2502   \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510       \u2502\n\u2502   \u2502  EKS Node Group              \u2502       \u2502\n\u2502   \u2502  (Worker Nodes)              \u2502       \u2502\n\u2502   \u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u2500\u2500\u2500\u2510     \u2502       \u2502\n\u2502   \u2502  \u2502Pod  \u2502 \u2502Pod  \u2502 \u2502Pod  \u2502     \u2502       \u2502\n\u2502   \u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2518     \u2502       \u2502\n\u2502   \u2502  (EC2 or Fargate)            \u2502       \u2502\n\u2502   \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,a.jsx)(n.h2,{id:"creating-an-eks-cluster",children:"Creating an EKS Cluster"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Prerequisites:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Install kubectl\ncurl -LO "https://dl.k8s.io/release/$(curl -L -s https://dl.k8s.io/release/stable.txt)/bin/linux/amd64/kubectl"\nchmod +x kubectl\nsudo mv kubectl /usr/local/bin/\n\n# Install eksctl\ncurl --silent --location "https://github.com/weaveworks/eksctl/releases/latest/download/eksctl_$(uname -s)_amd64.tar.gz" | tar xz -C /tmp\nsudo mv /tmp/eksctl /usr/local/bin\n\n# Install AWS CLI\npip install awscli --upgrade\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Using eksctl (Easiest):"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create cluster (takes ~15 minutes)\neksctl create cluster \\\n  --name my-cluster \\\n  --region us-east-1 \\\n  --nodegroup-name standard-workers \\\n  --node-type t3.medium \\\n  --nodes 3 \\\n  --nodes-min 1 \\\n  --nodes-max 4 \\\n  --managed\n\n# Update kubeconfig\naws eks update-kubeconfig \\\n  --region us-east-1 \\\n  --name my-cluster\n\n# Verify connection\nkubectl get nodes\n\n# Delete cluster\neksctl delete cluster --name my-cluster\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Using CloudFormation:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"AWSTemplateFormatVersion: '2010-09-09'\nDescription: 'EKS Cluster'\n\nResources:\n  EKSClusterRole:\n    Type: AWS::IAM::Role\n    Properties:\n      AssumeRolePolicyDocument:\n        Version: '2012-10-17'\n        Statement:\n          - Effect: Allow\n            Principal:\n              Service: eks.amazonaws.com\n            Action: sts:AssumeRole\n      ManagedPolicyArns:\n        - arn:aws:iam::aws:policy/AmazonEKSClusterPolicy\n\n  EKSCluster:\n    Type: AWS::EKS::Cluster\n    Properties:\n      Name: my-cluster\n      Version: '1.27'\n      RoleArn: !GetAtt EKSClusterRole.Arn\n      ResourcesVpcConfig:\n        SubnetIds:\n          - !Ref PrivateSubnet1\n          - !Ref PrivateSubnet2\n        SecurityGroupIds:\n          - !Ref ClusterSecurityGroup\n\n  NodeInstanceRole:\n    Type: AWS::IAM::Role\n    Properties:\n      AssumeRolePolicyDocument:\n        Version: '2012-10-17'\n        Statement:\n          - Effect: Allow\n            Principal:\n              Service: ec2.amazonaws.com\n            Action: sts:AssumeRole\n      ManagedPolicyArns:\n        - arn:aws:iam::aws:policy/AmazonEKSWorkerNodePolicy\n        - arn:aws:iam::aws:policy/AmazonEC2ContainerRegistryReadOnly\n        - arn:aws:iam::aws:policy/AmazonEKS_CNI_Policy\n\n  NodeGroup:\n    Type: AWS::EKS::Nodegroup\n    DependsOn: EKSCluster\n    Properties:\n      ClusterName: !Ref EKSCluster\n      NodegroupName: standard-workers\n      NodeRole: !GetAtt NodeInstanceRole.Arn\n      Subnets:\n        - !Ref PrivateSubnet1\n        - !Ref PrivateSubnet2\n      ScalingConfig:\n        DesiredSize: 3\n        MinSize: 1\n        MaxSize: 4\n      InstanceTypes:\n        - t3.medium\n\nOutputs:\n  ClusterName:\n    Value: !Ref EKSCluster\n  ClusterEndpoint:\n    Value: !GetAtt EKSCluster.Endpoint\n"})}),"\n",(0,a.jsx)(n.h2,{id:"deploying-applications-to-eks",children:"Deploying Applications to EKS"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"1. Create Deployment:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:'# deployment.yaml\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-app\nspec:\n  replicas: 3\n  selector:\n    matchLabels:\n      app: my-app\n  template:\n    metadata:\n      labels:\n        app: my-app\n    spec:\n      containers:\n      - name: my-app\n        image: 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:latest\n        ports:\n        - containerPort: 8080\n        resources:\n          requests:\n            memory: "256Mi"\n            cpu: "250m"\n          limits:\n            memory: "512Mi"\n            cpu: "500m"\n'})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"2. Create Service:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"# service.yaml\napiVersion: v1\nkind: Service\nmetadata:\n  name: my-app-service\nspec:\n  type: LoadBalancer\n  selector:\n    app: my-app\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 8080\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"3. Deploy:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Apply manifests\nkubectl apply -f deployment.yaml\nkubectl apply -f service.yaml\n\n# Check status\nkubectl get deployments\nkubectl get pods\nkubectl get services\n\n# Get load balancer URL\nkubectl get service my-app-service\n"})}),"\n",(0,a.jsx)(n.h2,{id:"eks-with-application-load-balancer",children:"EKS with Application Load Balancer"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Install AWS Load Balancer Controller:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Create IAM policy\ncurl -o iam_policy.json https://raw.githubusercontent.com/kubernetes-sigs/aws-load-balancer-controller/v2.4.4/docs/install/iam_policy.json\n\naws iam create-policy \\\n  --policy-name AWSLoadBalancerControllerIAMPolicy \\\n  --policy-document file://iam_policy.json\n\n# Create service account\neksctl create iamserviceaccount \\\n  --cluster=my-cluster \\\n  --namespace=kube-system \\\n  --name=aws-load-balancer-controller \\\n  --attach-policy-arn=arn:aws:iam::123456789012:policy/AWSLoadBalancerControllerIAMPolicy \\\n  --approve\n\n# Install controller using Helm\nhelm repo add eks https://aws.github.io/eks-charts\nhelm install aws-load-balancer-controller eks/aws-load-balancer-controller \\\n  -n kube-system \\\n  --set clusterName=my-cluster \\\n  --set serviceAccount.create=false \\\n  --set serviceAccount.name=aws-load-balancer-controller\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Create Ingress:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: Ingress\nmetadata:\n  name: my-app-ingress\n  annotations:\n    kubernetes.io/ingress.class: alb\n    alb.ingress.kubernetes.io/scheme: internet-facing\n    alb.ingress.kubernetes.io/target-type: ip\nspec:\n  rules:\n  - http:\n      paths:\n      - path: /\n        pathType: Prefix\n        backend:\n          service:\n            name: my-app-service\n            port:\n              number: 80\n"})}),"\n",(0,a.jsx)(n.h2,{id:"eks-best-practices",children:"EKS Best Practices"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"1. Use IAM Roles for Service Accounts (IRSA)"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ServiceAccount\nmetadata:\n  name: my-app-sa\n  annotations:\n    eks.amazonaws.com/role-arn: arn:aws:iam::123456789012:role/MyAppRole\n---\napiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: my-app\nspec:\n  template:\n    spec:\n      serviceAccountName: my-app-sa\n      containers:\n      - name: my-app\n        image: my-app:latest\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"2. Enable Pod Security Policies"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"3. Use Cluster Autoscaler"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"# Install cluster autoscaler\nkubectl apply -f https://raw.githubusercontent.com/kubernetes/autoscaler/master/cluster-autoscaler/cloudprovider/aws/examples/cluster-autoscaler-autodiscover.yaml\n\n# Edit deployment to add cluster name\nkubectl -n kube-system edit deployment.apps/cluster-autoscaler\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"4. Implement Network Policies"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: deny-all-ingress\nspec:\n  podSelector: {}\n  policyTypes:\n  - Ingress\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"5. Use Managed Node Groups"})}),"\n",(0,a.jsxs)(n.ul,{children:["\n",(0,a.jsx)(n.li,{children:"Automatic updates"}),"\n",(0,a.jsx)(n.li,{children:"Easy scaling"}),"\n",(0,a.jsx)(n.li,{children:"Better integration"}),"\n"]}),"\n",(0,a.jsx)(n.h2,{id:"monitoring-eks",children:"Monitoring EKS"}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Install Metrics Server:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f https://github.com/kubernetes-sigs/metrics-server/releases/latest/download/components.yaml\n\n# View metrics\nkubectl top nodes\nkubectl top pods\n"})}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Container Insights:"})}),"\n",(0,a.jsx)(n.pre,{children:(0,a.jsx)(n.code,{className:"language-bash",children:'# Install CloudWatch Container Insights\ncurl https://raw.githubusercontent.com/aws-samples/amazon-cloudwatch-container-insights/latest/k8s-deployment-manifest-templates/deployment-mode/daemonset/container-insights-monitoring/quickstart/cwagent-fluentd-quickstart.yaml | sed "s/{{cluster_name}}/my-cluster/;s/{{region_name}}/us-east-1/" | kubectl apply -f -\n'})}),"\n",(0,a.jsx)(n.hr,{}),"\n",(0,a.jsx)(n.p,{children:(0,a.jsx)(n.strong,{children:"Run production-grade Kubernetes clusters on AWS with EKS for container orchestration at scale!"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,a.jsx)(n,{...e,children:(0,a.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>l,x:()=>i});var t=s(6540);const a={},r=t.createContext(a);function l(e){const n=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function i(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(a):e.components||a:l(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);