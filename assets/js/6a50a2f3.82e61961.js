"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[8047],{5010:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>l,contentTitle:()=>c,default:()=>u,frontMatter:()=>a,metadata:()=>i,toc:()=>o});const i=JSON.parse('{"id":"devops/security","title":"DevOps Security","description":"Master DevOps security practices including container security and secrets management. Learn to secure your infrastructure, applications, and CI/CD pipelines.","source":"@site/docs/devops/security.md","sourceDirName":"devops","slug":"/devops/security","permalink":"/portfolio/docs/devops/security","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":5,"frontMatter":{"sidebar_position":5},"sidebar":"tutorialSidebar","previous":{"title":"Monitoring & Logging","permalink":"/portfolio/docs/devops/monitoring/"},"next":{"title":"GitOps","permalink":"/portfolio/docs/devops/gitops"}}');var r=s(4848),t=s(8453);const a={sidebar_position:5},c="DevOps Security",l={},o=[{value:"Security in DevOps (DevSecOps)",id:"security-in-devops-devsecops",level:2},{value:"Core Principles",id:"core-principles",level:3},{value:"Container Security",id:"container-security",level:2},{value:"Security Layers",id:"security-layers",level:3},{value:"Container Image Security",id:"container-image-security",level:2},{value:"Use Official and Minimal Base Images",id:"use-official-and-minimal-base-images",level:3},{value:"Multi-Stage Builds",id:"multi-stage-builds",level:3},{value:"Don&#39;t Run as Root",id:"dont-run-as-root",level:3},{value:"Read-Only Root Filesystem",id:"read-only-root-filesystem",level:3},{value:"Vulnerability Scanning",id:"vulnerability-scanning",level:2},{value:"Trivy (Comprehensive Scanner)",id:"trivy-comprehensive-scanner",level:3},{value:"Clair (Google Container Analysis)",id:"clair-google-container-analysis",level:3},{value:"Snyk",id:"snyk",level:3},{value:"Integrate in CI/CD",id:"integrate-in-cicd",level:3},{value:"Container Runtime Security",id:"container-runtime-security",level:2},{value:"Security Context (Kubernetes)",id:"security-context-kubernetes",level:3},{value:"Pod Security Standards",id:"pod-security-standards",level:3},{value:"AppArmor Profile",id:"apparmor-profile",level:3},{value:"Secrets Management",id:"secrets-management",level:2},{value:"Never Hard-Code Secrets",id:"never-hard-code-secrets",level:3},{value:"Kubernetes Secrets",id:"kubernetes-secrets",level:3},{value:"HashiCorp Vault",id:"hashicorp-vault",level:2},{value:"Install Vault",id:"install-vault",level:3},{value:"Store and Retrieve Secrets",id:"store-and-retrieve-secrets",level:3},{value:"Vault in Kubernetes",id:"vault-in-kubernetes",level:3},{value:"AWS Secrets Manager",id:"aws-secrets-manager",level:2},{value:"Store Secrets",id:"store-secrets",level:3},{value:"Use in Application",id:"use-in-application",level:3},{value:"Secret Scanning in Git",id:"secret-scanning-in-git",level:2},{value:"git-secrets (Pre-commit Hook)",id:"git-secrets-pre-commit-hook",level:3},{value:"Gitleaks",id:"gitleaks",level:3},{value:"Network Security",id:"network-security",level:2},{value:"Kubernetes Network Policies",id:"kubernetes-network-policies",level:3},{value:"Service Mesh (Istio)",id:"service-mesh-istio",level:3},{value:"CI/CD Security",id:"cicd-security",level:2},{value:"Secure CI/CD Pipeline",id:"secure-cicd-pipeline",level:3},{value:"GitHub Actions Security",id:"github-actions-security",level:3},{value:"Best Practices Checklist",id:"best-practices-checklist",level:2},{value:"Container Security",id:"container-security-1",level:3},{value:"Secrets Management",id:"secrets-management-1",level:3},{value:"Network Security",id:"network-security-1",level:3},{value:"CI/CD Security",id:"cicd-security-1",level:3},{value:"Resources",id:"resources",level:2},{value:"Tools",id:"tools",level:3},{value:"Documentation",id:"documentation",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"devops-security",children:"DevOps Security"})}),"\n",(0,r.jsx)(n.p,{children:"Master DevOps security practices including container security and secrets management. Learn to secure your infrastructure, applications, and CI/CD pipelines."}),"\n",(0,r.jsx)(n.h2,{id:"security-in-devops-devsecops",children:"Security in DevOps (DevSecOps)"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"DevSecOps"})," integrates security practices into the DevOps workflow, making security everyone's responsibility from development through deployment."]}),"\n",(0,r.jsx)(n.h3,{id:"core-principles",children:"Core Principles"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Shift Left"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Security testing early in development"}),"\n",(0,r.jsx)(n.li,{children:"Find vulnerabilities before production"}),"\n",(0,r.jsx)(n.li,{children:"Automated security scanning in CI/CD"}),"\n",(0,r.jsx)(n.li,{children:"Developer security training"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Continuous Security"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Security as code"}),"\n",(0,r.jsx)(n.li,{children:"Automated compliance checks"}),"\n",(0,r.jsx)(n.li,{children:"Continuous monitoring"}),"\n",(0,r.jsx)(n.li,{children:"Regular security audits"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Least Privilege"})}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"Minimum necessary permissions"}),"\n",(0,r.jsx)(n.li,{children:"Time-limited access"}),"\n",(0,r.jsx)(n.li,{children:"Regular access reviews"}),"\n",(0,r.jsx)(n.li,{children:"Just-in-time (JIT) access"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"container-security",children:"Container Security"}),"\n",(0,r.jsx)(n.h3,{id:"security-layers",children:"Security Layers"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   1. Image Security             \u2502\n\u2502   - Scan for vulnerabilities    \u2502\n\u2502   - Use trusted base images     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   2. Runtime Security            \u2502\n\u2502   - Non-root users              \u2502\n\u2502   - Resource limits             \u2502\n\u2502   - Read-only filesystems       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   3. Host Security               \u2502\n\u2502   - Hardened OS                 \u2502\n\u2502   - Updated kernel              \u2502\n\u2502   - Minimal attack surface      \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n          \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   4. Network Security            \u2502\n\u2502   - Network policies            \u2502\n\u2502   - Service mesh                \u2502\n\u2502   - Encrypted communication     \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"container-image-security",children:"Container Image Security"}),"\n",(0,r.jsx)(n.h3,{id:"use-official-and-minimal-base-images",children:"Use Official and Minimal Base Images"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"# \u274c BAD - Large attack surface\nFROM ubuntu:latest\n\n# \u2705 GOOD - Minimal, updated base image\nFROM alpine:3.18\n\n# \u2705 BETTER - Distroless (minimal runtime)\nFROM gcr.io/distroless/static-debian11\n\n# \u2705 BEST - Specific version, minimal\nFROM alpine:3.18.4\n"})}),"\n",(0,r.jsx)(n.h3,{id:"multi-stage-builds",children:"Multi-Stage Builds"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'# Build stage - includes build tools\nFROM golang:1.21-alpine AS builder\nWORKDIR /app\nCOPY . .\nRUN go build -o myapp\n\n# Runtime stage - minimal, no build tools\nFROM alpine:3.18\nWORKDIR /app\nCOPY --from=builder /app/myapp .\n\n# Non-root user\nRUN adduser -D appuser\nUSER appuser\n\nCMD ["./myapp"]\n'})}),"\n",(0,r.jsx)(n.h3,{id:"dont-run-as-root",children:"Don't Run as Root"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:"# Create non-root user\nRUN groupadd -r appuser && useradd -r -g appuser appuser\n\n# Or in Alpine\nRUN addgroup -S appuser && adduser -S appuser -G appuser\n\n# Set ownership\nCOPY --chown=appuser:appuser . /app\n\n# Switch to non-root user\nUSER appuser\n\n# \u2705 Container runs as appuser, not root\n"})}),"\n",(0,r.jsx)(n.h3,{id:"read-only-root-filesystem",children:"Read-Only Root Filesystem"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'# Dockerfile\nFROM alpine:3.18\nRUN adduser -D appuser\nUSER appuser\nWORKDIR /app\nCOPY app .\nCMD ["./app"]\n'})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Docker run:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"docker run --read-only \\\n  --tmpfs /tmp \\\n  --tmpfs /var/run \\\n  myapp:latest\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Kubernetes:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: secure-pod\nspec:\n  containers:\n  - name: myapp\n    image: myapp:latest\n    securityContext:\n      readOnlyRootFilesystem: true\n      runAsNonRoot: true\n      runAsUser: 1000\n    volumeMounts:\n    - name: tmp\n      mountPath: /tmp\n  volumes:\n  - name: tmp\n    emptyDir: {}\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"vulnerability-scanning",children:"Vulnerability Scanning"}),"\n",(0,r.jsx)(n.h3,{id:"trivy-comprehensive-scanner",children:"Trivy (Comprehensive Scanner)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Install Trivy\nwget -qO - https://aquasecurity.github.io/trivy-repo/deb/public.key | sudo apt-key add -\necho "deb https://aquasecurity.github.io/trivy-repo/deb $(lsb_release -sc) main" | sudo tee /etc/apt/sources.list.d/trivy.list\nsudo apt update && sudo apt install trivy\n\n# Scan Docker image\ntrivy image nginx:latest\n\n# Scan with severity filter\ntrivy image --severity HIGH,CRITICAL myapp:1.0.0\n\n# Scan filesystem\ntrivy fs /path/to/project\n\n# Generate report\ntrivy image --format json --output results.json myapp:1.0.0\n'})}),"\n",(0,r.jsx)(n.h3,{id:"clair-google-container-analysis",children:"Clair (Google Container Analysis)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Run Clair\ndocker run -d --name clair \\\n  -p 6060:6060 \\\n  quay.io/coreos/clair:latest\n\n# Scan with clairctl\nclairctl analyze myapp:latest\n"})}),"\n",(0,r.jsx)(n.h3,{id:"snyk",children:"Snyk"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install Snyk\nnpm install -g snyk\n\n# Authenticate\nsnyk auth\n\n# Scan Docker image\nsnyk container test myapp:latest\n\n# Monitor image\nsnyk container monitor myapp:latest\n"})}),"\n",(0,r.jsx)(n.h3,{id:"integrate-in-cicd",children:"Integrate in CI/CD"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"GitHub Actions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"name: Security Scan\n\non: [push]\n\njobs:\n  scan:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Build image\n        run: docker build -t myapp:${{ github.sha }} .\n\n      - name: Run Trivy scan\n        uses: aquasecurity/trivy-action@master\n        with:\n          image-ref: myapp:${{ github.sha }}\n          severity: 'CRITICAL,HIGH'\n          exit-code: '1'  # Fail build on vulnerabilities\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"container-runtime-security",children:"Container Runtime Security"}),"\n",(0,r.jsx)(n.h3,{id:"security-context-kubernetes",children:"Security Context (Kubernetes)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: secure-pod\nspec:\n  securityContext:\n    runAsNonRoot: true\n    runAsUser: 1000\n    fsGroup: 2000\n    seccompProfile:\n      type: RuntimeDefault\n\n  containers:\n  - name: myapp\n    image: myapp:latest\n    securityContext:\n      allowPrivilegeEscalation: false\n      readOnlyRootFilesystem: true\n      runAsNonRoot: true\n      capabilities:\n        drop:\n          - ALL\n        add:\n          - NET_BIND_SERVICE\n\n    resources:\n      limits:\n        memory: "512Mi"\n        cpu: "500m"\n      requests:\n        memory: "256Mi"\n        cpu: "250m"\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pod-security-standards",children:"Pod Security Standards"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Restricted Policy (Most Secure):"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Namespace\nmetadata:\n  name: production\n  labels:\n    pod-security.kubernetes.io/enforce: restricted\n    pod-security.kubernetes.io/audit: restricted\n    pod-security.kubernetes.io/warn: restricted\n"})}),"\n",(0,r.jsx)(n.h3,{id:"apparmor-profile",children:"AppArmor Profile"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: secured-pod\n  annotations:\n    container.apparmor.security.beta.kubernetes.io/myapp: runtime/default\nspec:\n  containers:\n  - name: myapp\n    image: myapp:latest\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"secrets-management",children:"Secrets Management"}),"\n",(0,r.jsx)(n.h3,{id:"never-hard-code-secrets",children:"Never Hard-Code Secrets"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-dockerfile",children:'# \u274c NEVER DO THIS\nENV API_KEY="abc123secret"\nENV DB_PASSWORD="SuperSecret123!"\n\n# \u274c NEVER COMMIT THIS\n# config.yml\ndatabase:\n  password: "hardcoded_password"\n\n# \u2705 Use environment variables or secret managers\n'})}),"\n",(0,r.jsx)(n.h3,{id:"kubernetes-secrets",children:"Kubernetes Secrets"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Create Secret:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# From literal values\nkubectl create secret generic db-credentials \\\n  --from-literal=username=admin \\\n  --from-literal=password=SuperSecret123!\n\n# From file\nkubectl create secret generic api-key \\\n  --from-file=api-key.txt\n\n# From YAML (base64 encoded)\necho -n 'SuperSecret123!' | base64\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"secrets.yaml:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Secret\nmetadata:\n  name: db-credentials\ntype: Opaque\ndata:\n  username: YWRtaW4=  # base64 encoded 'admin'\n  password: U3VwZXJTZWNyZXQxMjMh  # base64 encoded 'SuperSecret123!'\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Use Secrets in Pod:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Pod\nmetadata:\n  name: myapp\nspec:\n  containers:\n  - name: myapp\n    image: myapp:latest\n    env:\n      # Single secret as environment variable\n      - name: DB_PASSWORD\n        valueFrom:\n          secretKeyRef:\n            name: db-credentials\n            key: password\n\n      # All secrets as environment variables\n    envFrom:\n      - secretRef:\n          name: db-credentials\n\n    # Mount secrets as files\n    volumeMounts:\n    - name: secret-volume\n      mountPath: /etc/secrets\n      readOnly: true\n\n  volumes:\n  - name: secret-volume\n    secret:\n      secretName: db-credentials\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"hashicorp-vault",children:"HashiCorp Vault"}),"\n",(0,r.jsx)(n.h3,{id:"install-vault",children:"Install Vault"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Download and install\nwget https://releases.hashicorp.com/vault/1.15.0/vault_1.15.0_linux_amd64.zip\nunzip vault_1.15.0_linux_amd64.zip\nsudo mv vault /usr/local/bin/\n\n# Start Vault dev server (NOT for production)\nvault server -dev\n"})}),"\n",(0,r.jsx)(n.h3,{id:"store-and-retrieve-secrets",children:"Store and Retrieve Secrets"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Set VAULT_ADDR\nexport VAULT_ADDR='http://127.0.0.1:8200'\n\n# Store secret\nvault kv put secret/myapp/db password=SuperSecret123! username=admin\n\n# Retrieve secret\nvault kv get secret/myapp/db\n\n# Get specific field\nvault kv get -field=password secret/myapp/db\n"})}),"\n",(0,r.jsx)(n.h3,{id:"vault-in-kubernetes",children:"Vault in Kubernetes"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Install Vault using Helm:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"helm repo add hashicorp https://helm.releases.hashicorp.com\nhelm install vault hashicorp/vault\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Inject Secrets into Pods:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'apiVersion: v1\nkind: Pod\nmetadata:\n  name: myapp\n  annotations:\n    vault.hashicorp.com/agent-inject: "true"\n    vault.hashicorp.com/role: "myapp"\n    vault.hashicorp.com/agent-inject-secret-database: "secret/data/myapp/db"\n    vault.hashicorp.com/agent-inject-template-database: |\n      {{- with secret "secret/data/myapp/db" -}}\n      export DB_PASSWORD="{{ .Data.data.password }}"\n      export DB_USERNAME="{{ .Data.data.username }}"\n      {{- end }}\nspec:\n  serviceAccountName: myapp\n  containers:\n  - name: myapp\n    image: myapp:latest\n    command: ["/bin/sh"]\n    args:\n      - -c\n      - source /vault/secrets/database && ./app\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"aws-secrets-manager",children:"AWS Secrets Manager"}),"\n",(0,r.jsx)(n.h3,{id:"store-secrets",children:"Store Secrets"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:'# Create secret\naws secretsmanager create-secret \\\n  --name prod/db/credentials \\\n  --secret-string \'{"username":"admin","password":"SuperSecret123!"}\'\n\n# Retrieve secret\naws secretsmanager get-secret-value \\\n  --secret-id prod/db/credentials\n\n# Update secret\naws secretsmanager update-secret \\\n  --secret-id prod/db/credentials \\\n  --secret-string \'{"username":"admin","password":"NewPassword456!"}\'\n'})}),"\n",(0,r.jsx)(n.h3,{id:"use-in-application",children:"Use in Application"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Python:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-python",children:"import boto3\nimport json\n\ndef get_secret():\n    client = boto3.client('secretsmanager', region_name='us-east-1')\n    response = client.get_secret_value(SecretId='prod/db/credentials')\n    secret = json.loads(response['SecretString'])\n    return secret\n\n# Use secret\nsecret = get_secret()\ndb_password = secret['password']\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"In Kubernetes with External Secrets Operator:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: external-secrets.io/v1beta1\nkind: SecretStore\nmetadata:\n  name: aws-secrets\nspec:\n  provider:\n    aws:\n      service: SecretsManager\n      region: us-east-1\n      auth:\n        jwt:\n          serviceAccountRef:\n            name: myapp\n\n---\napiVersion: external-secrets.io/v1beta1\nkind: ExternalSecret\nmetadata:\n  name: db-credentials\nspec:\n  refreshInterval: 1h\n  secretStoreRef:\n    name: aws-secrets\n    kind: SecretStore\n  target:\n    name: db-credentials\n  data:\n  - secretKey: password\n    remoteRef:\n      key: prod/db/credentials\n      property: password\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"secret-scanning-in-git",children:"Secret Scanning in Git"}),"\n",(0,r.jsx)(n.h3,{id:"git-secrets-pre-commit-hook",children:"git-secrets (Pre-commit Hook)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install git-secrets\ngit clone https://github.com/awslabs/git-secrets\ncd git-secrets\nsudo make install\n\n# Initialize in repo\ncd /path/to/your/repo\ngit secrets --install\ngit secrets --register-aws\n\n# Scan all history\ngit secrets --scan-history\n"})}),"\n",(0,r.jsx)(n.h3,{id:"gitleaks",children:"Gitleaks"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Install gitleaks\nbrew install gitleaks\n\n# Scan repository\ngitleaks detect --source . --verbose\n\n# Scan in CI/CD\ngitleaks detect --source . --report-format json --report-path gitleaks-report.json\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"GitHub Actions:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"name: Secret Scanning\n\non: [push, pull_request]\n\njobs:\n  gitleaks:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n        with:\n          fetch-depth: 0\n\n      - name: Run Gitleaks\n        uses: gitleaks/gitleaks-action@v2\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"network-security",children:"Network Security"}),"\n",(0,r.jsx)(n.h3,{id:"kubernetes-network-policies",children:"Kubernetes Network Policies"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Deny All Ingress:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: deny-all-ingress\n  namespace: production\nspec:\n  podSelector: {}\n  policyTypes:\n  - Ingress\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Allow Specific Traffic:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"apiVersion: networking.k8s.io/v1\nkind: NetworkPolicy\nmetadata:\n  name: allow-frontend-to-backend\n  namespace: production\nspec:\n  podSelector:\n    matchLabels:\n      app: backend\n  policyTypes:\n  - Ingress\n  ingress:\n  - from:\n    - podSelector:\n        matchLabels:\n          app: frontend\n    ports:\n    - protocol: TCP\n      port: 8080\n"})}),"\n",(0,r.jsx)(n.h3,{id:"service-mesh-istio",children:"Service Mesh (Istio)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'# Mutual TLS (mTLS) between services\napiVersion: security.istio.io/v1beta1\nkind: PeerAuthentication\nmetadata:\n  name: default\n  namespace: production\nspec:\n  mtls:\n    mode: STRICT\n\n# Authorization policy\napiVersion: security.istio.io/v1beta1\nkind: AuthorizationPolicy\nmetadata:\n  name: frontend-to-backend\n  namespace: production\nspec:\n  selector:\n    matchLabels:\n      app: backend\n  action: ALLOW\n  rules:\n  - from:\n    - source:\n        principals: ["cluster.local/ns/production/sa/frontend"]\n'})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"cicd-security",children:"CI/CD Security"}),"\n",(0,r.jsx)(n.h3,{id:"secure-cicd-pipeline",children:"Secure CI/CD Pipeline"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   1. Code Commit                     \u2502\n\u2502   - Branch protection               \u2502\n\u2502   - Signed commits                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   2. Secret Scanning                 \u2502\n\u2502   - Gitleaks, git-secrets           \u2502\n\u2502   - Block if secrets found          \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   3. Code Analysis                   \u2502\n\u2502   - SAST (static analysis)          \u2502\n\u2502   - Dependency scanning             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   4. Build                           \u2502\n\u2502   - Reproducible builds             \u2502\n\u2502   - Sign artifacts                  \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   5. Container Scan                  \u2502\n\u2502   - Trivy, Clair, Snyk              \u2502\n\u2502   - Block on critical vulns         \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   6. Deploy                          \u2502\n\u2502   - Least privilege credentials     \u2502\n\u2502   - Audit logging                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,r.jsx)(n.h3,{id:"github-actions-security",children:"GitHub Actions Security"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:"name: Secure Pipeline\n\non:\n  push:\n    branches: [main]\n\npermissions:\n  contents: read  # Least privilege\n\njobs:\n  security:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Secret scanning\n        uses: gitleaks/gitleaks-action@v2\n\n      - name: Dependency scanning\n        uses: snyk/actions/node@master\n        env:\n          SNYK_TOKEN: ${{ secrets.SNYK_TOKEN }}\n\n      - name: SAST\n        uses: github/codeql-action/init@v2\n\n      - name: Build\n        run: docker build -t myapp:${{ github.sha }} .\n\n      - name: Container scan\n        uses: aquasecurity/trivy-action@master\n        with:\n          image-ref: myapp:${{ github.sha }}\n          severity: 'CRITICAL,HIGH'\n          exit-code: '1'\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"best-practices-checklist",children:"Best Practices Checklist"}),"\n",(0,r.jsx)(n.h3,{id:"container-security-1",children:"Container Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Use minimal base images"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Run as non-root user"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Read-only root filesystem"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Scan for vulnerabilities"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Sign images"}),"\n",(0,r.jsxs)(n.li,{children:["\u2705 Use specific image tags (not ",(0,r.jsx)(n.code,{children:"latest"}),")"]}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Remove unnecessary packages"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Use multi-stage builds"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"secrets-management-1",children:"Secrets Management"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Never hard-code secrets"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Use secret managers (Vault, AWS Secrets Manager)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Rotate secrets regularly"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Scan for secrets in Git"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Encrypt secrets at rest"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Use short-lived credentials"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Audit secret access"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Minimum necessary permissions"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"network-security-1",children:"Network Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Implement network policies"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Use mTLS for service-to-service communication"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Encrypt traffic (TLS)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Segment networks"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Monitor network traffic"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Use service mesh for advanced security"}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"cicd-security-1",children:"CI/CD Security"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:"\u2705 Scan code for secrets"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Static code analysis (SAST)"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Dependency scanning"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Container vulnerability scanning"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Least privilege for CI/CD"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Sign artifacts"}),"\n",(0,r.jsx)(n.li,{children:"\u2705 Audit logging"}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,r.jsx)(n.h3,{id:"tools",children:"Tools"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/aquasecurity/trivy",children:"Trivy"})," - Vulnerability scanner"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.vaultproject.io/",children:"HashiCorp Vault"})," - Secrets management"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://github.com/gitleaks/gitleaks",children:"Gitleaks"})," - Secret scanning"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://falco.org/",children:"Falco"})," - Runtime security"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.a,{href:"https://www.openpolicyagent.org/",children:"Open Policy Agent"})," - Policy enforcement"]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"documentation",children:"Documentation"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://owasp.org/www-project-docker-top-10/",children:"OWASP Container Security"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://kubernetes.io/docs/concepts/security/",children:"Kubernetes Security"})}),"\n",(0,r.jsx)(n.li,{children:(0,r.jsx)(n.a,{href:"https://www.cisecurity.org/benchmark/docker",children:"CIS Docker Benchmark"})}),"\n"]}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Secure your infrastructure and applications with DevSecOps best practices!"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>c});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function c(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);