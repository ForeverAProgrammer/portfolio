"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[210],{6757:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>p,frontMatter:()=>a,metadata:()=>i,toc:()=>l});const i=JSON.parse('{"id":"cloud/aws/ecr","title":"ECR - Elastic Container Registry","description":"What is ECR?","source":"@site/docs/cloud/aws/ecr.md","sourceDirName":"cloud/aws","slug":"/cloud/aws/ecr","permalink":"/portfolio/docs/cloud/aws/ecr","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"EC2 - Elastic Compute Cloud","permalink":"/portfolio/docs/cloud/aws/ec2"},"next":{"title":"EKS - Elastic Kubernetes Service","permalink":"/portfolio/docs/cloud/aws/eks"}}');var r=s(4848),t=s(8453);const a={sidebar_position:3},o="ECR - Elastic Container Registry",c={},l=[{value:"What is ECR?",id:"what-is-ecr",level:2},{value:"Key Features",id:"key-features",level:2},{value:"Creating an ECR Repository",id:"creating-an-ecr-repository",level:2},{value:"Pushing Images to ECR",id:"pushing-images-to-ecr",level:2},{value:"ECR Lifecycle Policies",id:"ecr-lifecycle-policies",level:2},{value:"ECR Image Scanning",id:"ecr-image-scanning",level:2}];function d(e){const n={code:"code",h1:"h1",h2:"h2",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"ecr---elastic-container-registry",children:"ECR - Elastic Container Registry"})}),"\n",(0,r.jsx)(n.h2,{id:"what-is-ecr",children:"What is ECR?"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Amazon ECR"})," is a fully managed Docker container registry that makes it easy to store, manage, and deploy Docker container images."]}),"\n",(0,r.jsx)(n.h2,{id:"key-features",children:"Key Features"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Secure"})," - Images encrypted at rest, IAM integration"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Scalable"})," - Highly available, no capacity limits"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Integrated"})," - Works seamlessly with ECS, EKS, Lambda"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"Cost-Effective"})," - Pay only for storage and data transfer"]}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"creating-an-ecr-repository",children:"Creating an ECR Repository"}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using AWS Console:"})}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Navigate to ECR service"}),"\n",(0,r.jsx)(n.li,{children:'Click "Create repository"'}),"\n",(0,r.jsx)(n.li,{children:"Enter repository name"}),"\n",(0,r.jsx)(n.li,{children:"Configure settings (encryption, scan on push)"}),"\n",(0,r.jsx)(n.li,{children:"Create repository"}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using AWS CLI:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Create repository\naws ecr create-repository \\\n  --repository-name my-app \\\n  --image-scanning-configuration scanOnPush=true \\\n  --encryption-configuration encryptionType=AES256\n\n# List repositories\naws ecr describe-repositories\n\n# Delete repository\naws ecr delete-repository \\\n  --repository-name my-app \\\n  --force\n"})}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Using CloudFormation:"})}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-yaml",children:'Resources:\n  MyECRRepository:\n    Type: AWS::ECR::Repository\n    Properties:\n      RepositoryName: my-app\n      ImageScanningConfiguration:\n        ScanOnPush: true\n      EncryptionConfiguration:\n        EncryptionType: AES256\n      LifecyclePolicy:\n        LifecyclePolicyText: |\n          {\n            "rules": [{\n              "rulePriority": 1,\n              "description": "Keep last 10 images",\n              "selection": {\n                "tagStatus": "any",\n                "countType": "imageCountMoreThan",\n                "countNumber": 10\n              },\n              "action": { "type": "expire" }\n            }]\n          }\n\nOutputs:\n  RepositoryUri:\n    Description: ECR Repository URI\n    Value: !GetAtt MyECRRepository.RepositoryUri\n'})}),"\n",(0,r.jsx)(n.h2,{id:"pushing-images-to-ecr",children:"Pushing Images to ECR"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# 1. Authenticate Docker to ECR\naws ecr get-login-password --region us-east-1 | \\\n  docker login --username AWS --password-stdin \\\n  123456789012.dkr.ecr.us-east-1.amazonaws.com\n\n# 2. Build your Docker image\ndocker build -t my-app .\n\n# 3. Tag the image\ndocker tag my-app:latest \\\n  123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:latest\n\n# 4. Push to ECR\ndocker push 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:latest\n\n# 5. Pull from ECR\ndocker pull 123456789012.dkr.ecr.us-east-1.amazonaws.com/my-app:latest\n"})}),"\n",(0,r.jsx)(n.h2,{id:"ecr-lifecycle-policies",children:"ECR Lifecycle Policies"}),"\n",(0,r.jsx)(n.p,{children:"Automatically clean up old images:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-json",children:'{\n  "rules": [\n    {\n      "rulePriority": 1,\n      "description": "Expire untagged images older than 14 days",\n      "selection": {\n        "tagStatus": "untagged",\n        "countType": "sinceImagePushed",\n        "countUnit": "days",\n        "countNumber": 14\n      },\n      "action": {\n        "type": "expire"\n      }\n    },\n    {\n      "rulePriority": 2,\n      "description": "Keep last 5 production images",\n      "selection": {\n        "tagStatus": "tagged",\n        "tagPrefixList": ["prod"],\n        "countType": "imageCountMoreThan",\n        "countNumber": 5\n      },\n      "action": {\n        "type": "expire"\n      }\n    }\n  ]\n}\n'})}),"\n",(0,r.jsx)(n.h2,{id:"ecr-image-scanning",children:"ECR Image Scanning"}),"\n",(0,r.jsx)(n.p,{children:"Scan images for vulnerabilities:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-bash",children:"# Start image scan\naws ecr start-image-scan \\\n  --repository-name my-app \\\n  --image-id imageTag=latest\n\n# Get scan results\naws ecr describe-image-scan-findings \\\n  --repository-name my-app \\\n  --image-id imageTag=latest\n"})}),"\n",(0,r.jsx)(n.hr,{}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.strong,{children:"Securely store and manage container images with ECR for seamless deployment!"})})]})}function p(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(d,{...e})}):d(e)}},8453:(e,n,s)=>{s.d(n,{R:()=>a,x:()=>o});var i=s(6540);const r={},t=i.createContext(r);function a(e){const n=i.useContext(t);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),i.createElement(t.Provider,{value:n},e.children)}}}]);