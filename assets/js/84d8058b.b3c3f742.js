"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[9464],{21642:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>r,default:()=>u,frontMatter:()=>a,metadata:()=>s,toc:()=>o});const s=JSON.parse('{"id":"devops/cicd","title":"CI/CD Setup","description":"Step-by-step tutorials for setting up continuous integration and deployment pipelines.","source":"@site/docs/devops/cicd.md","sourceDirName":"devops","slug":"/devops/cicd","permalink":"/docs/devops/cicd","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Kubernetes Handbook","permalink":"/docs/devops/kubernetes"},"next":{"title":"Infrastructure as Code","permalink":"/docs/devops/infrastructure-as-code/"}}');var t=i(74848),l=i(28453);const a={sidebar_position:4},r="CI/CD Setup",c={},o=[{value:"What is CI/CD?",id:"what-is-cicd",level:2},{value:"Benefits of CI/CD",id:"benefits-of-cicd",level:2},{value:"Popular CI/CD Tools",id:"popular-cicd-tools",level:2},{value:"GitLab CI/CD",id:"gitlab-cicd",level:2},{value:"Basic Pipeline",id:"basic-pipeline",level:3},{value:"Docker Build Pipeline",id:"docker-build-pipeline",level:3},{value:"Kubernetes Deployment",id:"kubernetes-deployment",level:3},{value:"GitHub Actions",id:"github-actions",level:2},{value:"Basic Workflow",id:"basic-workflow",level:3},{value:"Docker Build and Push",id:"docker-build-and-push",level:3},{value:"Jenkins",id:"jenkins",level:2},{value:"Jenkinsfile",id:"jenkinsfile",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"1. Use Caching",id:"1-use-caching",level:3},{value:"2. Environment Variables and Secrets",id:"2-environment-variables-and-secrets",level:3},{value:"3. Parallel Jobs",id:"3-parallel-jobs",level:3},{value:"4. Conditional Execution",id:"4-conditional-execution",level:3},{value:"5. Artifacts and Reports",id:"5-artifacts-and-reports",level:3},{value:"Security Scanning",id:"security-scanning",level:2},{value:"Code Quality Scanning",id:"code-quality-scanning",level:3},{value:"Container Scanning",id:"container-scanning",level:3},{value:"Multi-Environment Deployment",id:"multi-environment-deployment",level:2},{value:"Development",id:"development",level:3},{value:"Staging",id:"staging",level:3},{value:"Production",id:"production",level:3},{value:"Monitoring Pipeline Performance",id:"monitoring-pipeline-performance",level:2},{value:"Next Steps",id:"next-steps",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,l.R)(),...n.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(e.header,{children:(0,t.jsx)(e.h1,{id:"cicd-setup",children:"CI/CD Setup"})}),"\n",(0,t.jsx)(e.p,{children:"Step-by-step tutorials for setting up continuous integration and deployment pipelines."}),"\n",(0,t.jsx)(e.h2,{id:"what-is-cicd",children:"What is CI/CD?"}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Continuous Integration (CI)"})," is the practice of automatically building and testing code changes."]}),"\n",(0,t.jsxs)(e.p,{children:[(0,t.jsx)(e.strong,{children:"Continuous Deployment (CD)"})," automates the release of validated code to production."]}),"\n",(0,t.jsx)(e.h2,{id:"benefits-of-cicd",children:"Benefits of CI/CD"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Faster delivery of features"}),"\n",(0,t.jsx)(e.li,{children:"Early bug detection"}),"\n",(0,t.jsx)(e.li,{children:"Improved code quality"}),"\n",(0,t.jsx)(e.li,{children:"Automated testing and deployment"}),"\n",(0,t.jsx)(e.li,{children:"Consistent build processes"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"popular-cicd-tools",children:"Popular CI/CD Tools"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"GitLab CI/CD"})," - Integrated with GitLab"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"GitHub Actions"})," - Native to GitHub"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Jenkins"})," - Open-source automation server"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"CircleCI"})," - Cloud-based CI/CD"]}),"\n",(0,t.jsxs)(e.li,{children:[(0,t.jsx)(e.strong,{children:"Travis CI"})," - Continuous integration service"]}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"gitlab-cicd",children:"GitLab CI/CD"}),"\n",(0,t.jsx)(e.h3,{id:"basic-pipeline",children:"Basic Pipeline"}),"\n",(0,t.jsxs)(e.p,{children:["Create ",(0,t.jsx)(e.code,{children:".gitlab-ci.yml"})," in your repository root:"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"stages:\n  - build\n  - test\n  - deploy\n\nvariables:\n  NODE_VERSION: \"18\"\n\nbuild:\n  stage: build\n  image: node:${NODE_VERSION}\n  script:\n    - npm install\n    - npm run build\n  artifacts:\n    paths:\n      - dist/\n    expire_in: 1 hour\n\ntest:\n  stage: test\n  image: node:${NODE_VERSION}\n  script:\n    - npm install\n    - npm run test\n  coverage: '/Lines\\s*:\\s*(\\d+\\.\\d+)%/'\n\ndeploy:\n  stage: deploy\n  image: alpine:latest\n  script:\n    - apk add --no-cache openssh-client\n    - ssh user@server 'cd /app && ./deploy.sh'\n  only:\n    - main\n  environment:\n    name: production\n    url: https://myapp.com\n"})}),"\n",(0,t.jsx)(e.h3,{id:"docker-build-pipeline",children:"Docker Build Pipeline"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"docker-build:\n  stage: build\n  image: docker:latest\n  services:\n    - docker:dind\n  before_script:\n    - docker login -u $CI_REGISTRY_USER -p $CI_REGISTRY_PASSWORD $CI_REGISTRY\n  script:\n    - docker build -t $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA .\n    - docker build -t $CI_REGISTRY_IMAGE:latest .\n    - docker push $CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n    - docker push $CI_REGISTRY_IMAGE:latest\n"})}),"\n",(0,t.jsx)(e.h3,{id:"kubernetes-deployment",children:"Kubernetes Deployment"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"deploy-k8s:\n  stage: deploy\n  image: bitnami/kubectl:latest\n  script:\n    - kubectl config use-context production\n    - kubectl set image deployment/app app=$CI_REGISTRY_IMAGE:$CI_COMMIT_SHA\n    - kubectl rollout status deployment/app\n  only:\n    - main\n"})}),"\n",(0,t.jsx)(e.h2,{id:"github-actions",children:"GitHub Actions"}),"\n",(0,t.jsx)(e.h3,{id:"basic-workflow",children:"Basic Workflow"}),"\n",(0,t.jsxs)(e.p,{children:["Create ",(0,t.jsx)(e.code,{children:".github/workflows/ci.yml"}),":"]}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"name: CI/CD Pipeline\n\non:\n  push:\n    branches: [ main, develop ]\n  pull_request:\n    branches: [ main ]\n\njobs:\n  build:\n    runs-on: ubuntu-latest\n\n    steps:\n    - uses: actions/checkout@v3\n\n    - name: Setup Node.js\n      uses: actions/setup-node@v3\n      with:\n        node-version: '18'\n        cache: 'npm'\n\n    - name: Install dependencies\n      run: npm ci\n\n    - name: Run tests\n      run: npm test\n\n    - name: Build\n      run: npm run build\n\n    - name: Upload artifacts\n      uses: actions/upload-artifact@v3\n      with:\n        name: build\n        path: dist/\n\n  deploy:\n    needs: build\n    runs-on: ubuntu-latest\n    if: github.ref == 'refs/heads/main'\n\n    steps:\n    - name: Download artifacts\n      uses: actions/download-artifact@v3\n      with:\n        name: build\n\n    - name: Deploy to production\n      run: |\n        echo \"Deploying to production...\"\n        # Add your deployment commands here\n"})}),"\n",(0,t.jsx)(e.h3,{id:"docker-build-and-push",children:"Docker Build and Push"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"  docker:\n    runs-on: ubuntu-latest\n    steps:\n    - uses: actions/checkout@v3\n\n    - name: Set up Docker Buildx\n      uses: docker/setup-buildx-action@v2\n\n    - name: Login to DockerHub\n      uses: docker/login-action@v2\n      with:\n        username: ${{ secrets.DOCKERHUB_USERNAME }}\n        password: ${{ secrets.DOCKERHUB_TOKEN }}\n\n    - name: Build and push\n      uses: docker/build-push-action@v4\n      with:\n        context: .\n        push: true\n        tags: |\n          username/app:latest\n          username/app:${{ github.sha }}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"jenkins",children:"Jenkins"}),"\n",(0,t.jsx)(e.h3,{id:"jenkinsfile",children:"Jenkinsfile"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-groovy",children:"pipeline {\n    agent any\n\n    environment {\n        DOCKER_IMAGE = \"myapp\"\n        DOCKER_TAG = \"${env.BUILD_NUMBER}\"\n    }\n\n    stages {\n        stage('Checkout') {\n            steps {\n                checkout scm\n            }\n        }\n\n        stage('Build') {\n            steps {\n                sh 'npm install'\n                sh 'npm run build'\n            }\n        }\n\n        stage('Test') {\n            steps {\n                sh 'npm test'\n            }\n            post {\n                always {\n                    junit 'test-results/**/*.xml'\n                }\n            }\n        }\n\n        stage('Docker Build') {\n            steps {\n                sh \"docker build -t ${DOCKER_IMAGE}:${DOCKER_TAG} .\"\n                sh \"docker tag ${DOCKER_IMAGE}:${DOCKER_TAG} ${DOCKER_IMAGE}:latest\"\n            }\n        }\n\n        stage('Deploy') {\n            when {\n                branch 'main'\n            }\n            steps {\n                sh \"docker push ${DOCKER_IMAGE}:${DOCKER_TAG}\"\n                sh \"docker push ${DOCKER_IMAGE}:latest\"\n                sh './deploy.sh'\n            }\n        }\n    }\n\n    post {\n        success {\n            echo 'Pipeline succeeded!'\n        }\n        failure {\n            echo 'Pipeline failed!'\n        }\n    }\n}\n"})}),"\n",(0,t.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,t.jsx)(e.h3,{id:"1-use-caching",children:"1. Use Caching"}),"\n",(0,t.jsx)(e.p,{children:"Speed up builds by caching dependencies:"}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"GitLab CI:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"cache:\n  paths:\n    - node_modules/\n  key: ${CI_COMMIT_REF_SLUG}\n"})}),"\n",(0,t.jsx)(e.p,{children:(0,t.jsx)(e.strong,{children:"GitHub Actions:"})}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"- uses: actions/cache@v3\n  with:\n    path: ~/.npm\n    key: ${{ runner.os }}-node-${{ hashFiles('**/package-lock.json') }}\n"})}),"\n",(0,t.jsx)(e.h3,{id:"2-environment-variables-and-secrets",children:"2. Environment Variables and Secrets"}),"\n",(0,t.jsx)(e.p,{children:"Never commit secrets to your repository. Use your CI/CD platform's secret management:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"# GitLab CI\ndeploy:\n  script:\n    - echo $DATABASE_URL\n    - echo $API_KEY\n"})}),"\n",(0,t.jsx)(e.h3,{id:"3-parallel-jobs",children:"3. Parallel Jobs"}),"\n",(0,t.jsx)(e.p,{children:"Run independent jobs in parallel:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:'test:\n  parallel:\n    matrix:\n      - NODE_VERSION: ["16", "18", "20"]\n'})}),"\n",(0,t.jsx)(e.h3,{id:"4-conditional-execution",children:"4. Conditional Execution"}),"\n",(0,t.jsx)(e.p,{children:"Only run jobs when needed:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"# Only on main branch\nonly:\n  - main\n\n# Only on tags\nonly:\n  - tags\n\n# Except for certain branches\nexcept:\n  - develop\n"})}),"\n",(0,t.jsx)(e.h3,{id:"5-artifacts-and-reports",children:"5. Artifacts and Reports"}),"\n",(0,t.jsx)(e.p,{children:"Preserve build outputs and test reports:"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"artifacts:\n  paths:\n    - dist/\n  reports:\n    junit: test-results.xml\n    coverage_report:\n      coverage_format: cobertura\n      path: coverage/cobertura-coverage.xml\n"})}),"\n",(0,t.jsx)(e.h2,{id:"security-scanning",children:"Security Scanning"}),"\n",(0,t.jsx)(e.h3,{id:"code-quality-scanning",children:"Code Quality Scanning"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"code-quality:\n  stage: test\n  script:\n    - npm run lint\n    - npm run security-audit\n  allow_failure: true\n"})}),"\n",(0,t.jsx)(e.h3,{id:"container-scanning",children:"Container Scanning"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"container-scan:\n  stage: test\n  image: aquasec/trivy:latest\n  script:\n    - trivy image --exit-code 1 --severity CRITICAL myapp:latest\n"})}),"\n",(0,t.jsx)(e.h2,{id:"multi-environment-deployment",children:"Multi-Environment Deployment"}),"\n",(0,t.jsx)(e.h3,{id:"development",children:"Development"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"deploy-dev:\n  stage: deploy\n  script:\n    - ./deploy.sh dev\n  environment:\n    name: development\n    url: https://dev.myapp.com\n  only:\n    - develop\n"})}),"\n",(0,t.jsx)(e.h3,{id:"staging",children:"Staging"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"deploy-staging:\n  stage: deploy\n  script:\n    - ./deploy.sh staging\n  environment:\n    name: staging\n    url: https://staging.myapp.com\n  only:\n    - main\n"})}),"\n",(0,t.jsx)(e.h3,{id:"production",children:"Production"}),"\n",(0,t.jsx)(e.pre,{children:(0,t.jsx)(e.code,{className:"language-yaml",children:"deploy-prod:\n  stage: deploy\n  script:\n    - ./deploy.sh production\n  environment:\n    name: production\n    url: https://myapp.com\n  when: manual\n  only:\n    - main\n"})}),"\n",(0,t.jsx)(e.h2,{id:"monitoring-pipeline-performance",children:"Monitoring Pipeline Performance"}),"\n",(0,t.jsx)(e.p,{children:"Track pipeline metrics:"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsx)(e.li,{children:"Build duration"}),"\n",(0,t.jsx)(e.li,{children:"Success/failure rates"}),"\n",(0,t.jsx)(e.li,{children:"Time to deployment"}),"\n",(0,t.jsx)(e.li,{children:"Test coverage trends"}),"\n"]}),"\n",(0,t.jsx)(e.h2,{id:"next-steps",children:"Next Steps"}),"\n",(0,t.jsxs)(e.ul,{children:["\n",(0,t.jsxs)(e.li,{children:["Explore ",(0,t.jsx)(e.a,{href:"/docs/devops/docker",children:"Docker Guide"})," for containerization"]}),"\n",(0,t.jsxs)(e.li,{children:["Learn about ",(0,t.jsx)(e.a,{href:"/docs/devops/kubernetes",children:"Kubernetes Handbook"})," for orchestration"]}),"\n",(0,t.jsxs)(e.li,{children:["Review ",(0,t.jsx)(e.a,{href:"./",children:"DevOps Best Practices"})]}),"\n"]})]})}function u(n={}){const{wrapper:e}={...(0,l.R)(),...n.components};return e?(0,t.jsx)(e,{...n,children:(0,t.jsx)(d,{...n})}):d(n)}},28453:(n,e,i)=>{i.d(e,{R:()=>a,x:()=>r});var s=i(96540);const t={},l=s.createContext(t);function a(n){const e=s.useContext(l);return s.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function r(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(t):n.components||t:a(n.components),s.createElement(l.Provider,{value:e},n.children)}}}]);