"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[371],{6651:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>c,contentTitle:()=>o,default:()=>u,frontMatter:()=>i,metadata:()=>a,toc:()=>l});const a=JSON.parse('{"id":"devops/infrastructure-as-code/terraform","title":"Terraform","description":"Master Terraform for multi-cloud infrastructure provisioning using declarative configuration. Learn to automate infrastructure across AWS, Azure, and GCP.","source":"@site/docs/devops/infrastructure-as-code/terraform.md","sourceDirName":"devops/infrastructure-as-code","slug":"/devops/infrastructure-as-code/terraform","permalink":"/portfolio/docs/devops/infrastructure-as-code/terraform","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"tutorialSidebar","previous":{"title":"Infrastructure as Code","permalink":"/portfolio/docs/devops/infrastructure-as-code/"},"next":{"title":"Ansible","permalink":"/portfolio/docs/devops/infrastructure-as-code/ansible"}}');var s=r(4848),t=r(8453);const i={sidebar_position:1},o="Terraform",c={},l=[{value:"What is Terraform?",id:"what-is-terraform",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Installation",id:"installation",level:2},{value:"Terraform Workflow",id:"terraform-workflow",level:2},{value:"HCL Syntax Basics",id:"hcl-syntax-basics",level:2},{value:"Resource Block",id:"resource-block",level:3},{value:"Variable Block",id:"variable-block",level:3},{value:"Output Block",id:"output-block",level:3},{value:"Data Source",id:"data-source",level:3},{value:"Complete Example: AWS Infrastructure",id:"complete-example-aws-infrastructure",level:2},{value:"Project Structure",id:"project-structure",level:3},{value:"provider.tf",id:"providertf",level:3},{value:"variables.tf",id:"variablestf",level:3},{value:"main.tf",id:"maintf",level:3},{value:"outputs.tf",id:"outputstf",level:3},{value:"terraform.tfvars",id:"terraformtfvars",level:3},{value:"Terraform Modules",id:"terraform-modules",level:2},{value:"Creating a Module",id:"creating-a-module",level:3},{value:"Using a Module",id:"using-a-module",level:3},{value:"State Management",id:"state-management",level:2},{value:"Local State (Not Recommended for Teams)",id:"local-state-not-recommended-for-teams",level:3},{value:"Remote State (Recommended)",id:"remote-state-recommended",level:3},{value:"State Commands",id:"state-commands",level:3},{value:"Workspaces",id:"workspaces",level:2},{value:"Advanced Features",id:"advanced-features",level:2},{value:"For Each",id:"for-each",level:3},{value:"Dynamic Blocks",id:"dynamic-blocks",level:3},{value:"Conditional Expressions",id:"conditional-expressions",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Common Commands",id:"common-commands",level:2},{value:"Resources",id:"resources",level:2}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,t.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.header,{children:(0,s.jsx)(n.h1,{id:"terraform",children:"Terraform"})}),"\n",(0,s.jsx)(n.p,{children:"Master Terraform for multi-cloud infrastructure provisioning using declarative configuration. Learn to automate infrastructure across AWS, Azure, and GCP."}),"\n",(0,s.jsx)(n.h2,{id:"what-is-terraform",children:"What is Terraform?"}),"\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Terraform"})," is an open-source Infrastructure as Code (IaC) tool created by HashiCorp that allows you to define and provision infrastructure using a declarative configuration language called HCL (HashiCorp Configuration Language)."]}),"\n",(0,s.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Multi-Cloud"})," - AWS, Azure, GCP, and 1000+ providers"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Declarative"})," - Define what you want, Terraform handles how"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"State Management"})," - Tracks infrastructure state"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Plan Before Apply"})," - Preview changes before execution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Resource Graph"})," - Automatic dependency resolution"]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Modules"})," - Reusable infrastructure components"]}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"installation",children:"Installation"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Linux/macOS:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Download Terraform\nwget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip\nunzip terraform_1.6.0_linux_amd64.zip\nsudo mv terraform /usr/local/bin/\n\n# Verify installation\nterraform version\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Using Package Managers:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'# macOS (Homebrew)\nbrew install terraform\n\n# Ubuntu/Debian\nwget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg\necho "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main" | sudo tee /etc/apt/sources.list.d/hashicorp.list\nsudo apt update && sudo apt install terraform\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"terraform-workflow",children:"Terraform Workflow"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  1. terraform init                \u2502\n\u2502  Initialize working directory     \u2502\n\u2502  Download providers              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  2. terraform plan                \u2502\n\u2502  Preview changes                  \u2502\n\u2502  Show what will be created       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  3. terraform apply               \u2502\n\u2502  Create/update infrastructure     \u2502\n\u2502  Ask for confirmation            \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  4. terraform destroy             \u2502\n\u2502  Remove all infrastructure        \u2502\n\u2502  (when needed)                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"hcl-syntax-basics",children:"HCL Syntax Basics"}),"\n",(0,s.jsx)(n.h3,{id:"resource-block",children:"Resource Block"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'resource "aws_instance" "web" {\n  ami           = "ami-0c55b159cbfafe1f0"\n  instance_type = "t3.micro"\n\n  tags = {\n    Name = "WebServer"\n  }\n}\n\n# Syntax:\n# resource "<TYPE>" "<NAME>" {\n#   <ARGUMENT> = <VALUE>\n# }\n'})}),"\n",(0,s.jsx)(n.h3,{id:"variable-block",children:"Variable Block"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'variable "instance_type" {\n  description = "EC2 instance type"\n  type        = string\n  default     = "t3.micro"\n}\n\nvariable "instance_count" {\n  description = "Number of instances"\n  type        = number\n  default     = 1\n}\n\nvariable "tags" {\n  description = "Resource tags"\n  type        = map(string)\n  default     = {\n    Environment = "dev"\n    Project     = "myapp"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"output-block",children:"Output Block"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'output "instance_ip" {\n  description = "Public IP of instance"\n  value       = aws_instance.web.public_ip\n}\n\noutput "instance_id" {\n  value = aws_instance.web.id\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"data-source",children:"Data Source"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'data "aws_ami" "ubuntu" {\n  most_recent = true\n  owners      = ["099720109477"] # Canonical\n\n  filter {\n    name   = "name"\n    values = ["ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"]\n  }\n}\n\nresource "aws_instance" "web" {\n  ami           = data.aws_ami.ubuntu.id\n  instance_type = "t3.micro"\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"complete-example-aws-infrastructure",children:"Complete Example: AWS Infrastructure"}),"\n",(0,s.jsx)(n.h3,{id:"project-structure",children:"Project Structure"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"terraform-project/\n\u251c\u2500\u2500 main.tf           # Main configuration\n\u251c\u2500\u2500 variables.tf      # Variable definitions\n\u251c\u2500\u2500 outputs.tf        # Output definitions\n\u251c\u2500\u2500 terraform.tfvars  # Variable values\n\u2514\u2500\u2500 provider.tf       # Provider configuration\n"})}),"\n",(0,s.jsx)(n.h3,{id:"providertf",children:"provider.tf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'terraform {\n  required_version = ">= 1.0"\n\n  required_providers {\n    aws = {\n      source  = "hashicorp/aws"\n      version = "~> 5.0"\n    }\n  }\n\n  backend "s3" {\n    bucket         = "my-terraform-state"\n    key            = "prod/terraform.tfstate"\n    region         = "us-east-1"\n    encrypt        = true\n    dynamodb_table = "terraform-locks"\n  }\n}\n\nprovider "aws" {\n  region = var.aws_region\n\n  default_tags {\n    tags = {\n      ManagedBy = "Terraform"\n      Project   = var.project_name\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"variablestf",children:"variables.tf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'variable "aws_region" {\n  description = "AWS region"\n  type        = string\n  default     = "us-east-1"\n}\n\nvariable "project_name" {\n  description = "Project name"\n  type        = string\n}\n\nvariable "environment" {\n  description = "Environment (dev, staging, prod)"\n  type        = string\n  validation {\n    condition     = contains(["dev", "staging", "prod"], var.environment)\n    error_message = "Environment must be dev, staging, or prod."\n  }\n}\n\nvariable "instance_type" {\n  description = "EC2 instance type"\n  type        = string\n  default     = "t3.micro"\n}\n\nvariable "vpc_cidr" {\n  description = "VPC CIDR block"\n  type        = string\n  default     = "10.0.0.0/16"\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"maintf",children:"main.tf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'# VPC\nresource "aws_vpc" "main" {\n  cidr_block           = var.vpc_cidr\n  enable_dns_hostnames = true\n  enable_dns_support   = true\n\n  tags = {\n    Name = "${var.project_name}-vpc"\n  }\n}\n\n# Internet Gateway\nresource "aws_internet_gateway" "main" {\n  vpc_id = aws_vpc.main.id\n\n  tags = {\n    Name = "${var.project_name}-igw"\n  }\n}\n\n# Public Subnet\nresource "aws_subnet" "public" {\n  count                   = 2\n  vpc_id                  = aws_vpc.main.id\n  cidr_block              = cidrsubnet(var.vpc_cidr, 8, count.index)\n  availability_zone       = data.aws_availability_zones.available.names[count.index]\n  map_public_ip_on_launch = true\n\n  tags = {\n    Name = "${var.project_name}-public-${count.index + 1}"\n  }\n}\n\n# Route Table\nresource "aws_route_table" "public" {\n  vpc_id = aws_vpc.main.id\n\n  route {\n    cidr_block = "0.0.0.0/0"\n    gateway_id = aws_internet_gateway.main.id\n  }\n\n  tags = {\n    Name = "${var.project_name}-public-rt"\n  }\n}\n\n# Route Table Association\nresource "aws_route_table_association" "public" {\n  count          = 2\n  subnet_id      = aws_subnet.public[count.index].id\n  route_table_id = aws_route_table.public.id\n}\n\n# Security Group\nresource "aws_security_group" "web" {\n  name        = "${var.project_name}-web-sg"\n  description = "Security group for web servers"\n  vpc_id      = aws_vpc.main.id\n\n  ingress {\n    description = "HTTP"\n    from_port   = 80\n    to_port     = 80\n    protocol    = "tcp"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n\n  ingress {\n    description = "HTTPS"\n    from_port   = 443\n    to_port     = 443\n    protocol    = "tcp"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n\n  ingress {\n    description = "SSH"\n    from_port   = 22\n    to_port     = 22\n    protocol    = "tcp"\n    cidr_blocks = ["0.0.0.0/0"]  # Restrict in production!\n  }\n\n  egress {\n    from_port   = 0\n    to_port     = 0\n    protocol    = "-1"\n    cidr_blocks = ["0.0.0.0/0"]\n  }\n\n  tags = {\n    Name = "${var.project_name}-web-sg"\n  }\n}\n\n# Data source for AMI\ndata "aws_ami" "ubuntu" {\n  most_recent = true\n  owners      = ["099720109477"]\n\n  filter {\n    name   = "name"\n    values = ["ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*"]\n  }\n}\n\n# EC2 Instance\nresource "aws_instance" "web" {\n  count         = var.environment == "prod" ? 2 : 1\n  ami           = data.aws_ami.ubuntu.id\n  instance_type = var.instance_type\n  subnet_id     = aws_subnet.public[count.index % 2].id\n\n  vpc_security_group_ids = [aws_security_group.web.id]\n\n  user_data = <<-EOF\n              #!/bin/bash\n              apt-get update\n              apt-get install -y nginx\n              systemctl start nginx\n              systemctl enable nginx\n              echo "<h1>Hello from ${var.project_name} - Instance ${count.index + 1}</h1>" > /var/www/html/index.html\n              EOF\n\n  tags = {\n    Name = "${var.project_name}-web-${count.index + 1}"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"outputstf",children:"outputs.tf"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'output "vpc_id" {\n  description = "VPC ID"\n  value       = aws_vpc.main.id\n}\n\noutput "instance_ips" {\n  description = "Public IPs of web servers"\n  value       = aws_instance.web[*].public_ip\n}\n\noutput "instance_ids" {\n  description = "Instance IDs"\n  value       = aws_instance.web[*].id\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"terraformtfvars",children:"terraform.tfvars"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'project_name  = "myapp"\nenvironment   = "dev"\naws_region    = "us-east-1"\ninstance_type = "t3.micro"\nvpc_cidr      = "10.0.0.0/16"\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"terraform-modules",children:"Terraform Modules"}),"\n",(0,s.jsx)(n.h3,{id:"creating-a-module",children:"Creating a Module"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"modules/\n\u2514\u2500\u2500 vpc/\n    \u251c\u2500\u2500 main.tf\n    \u251c\u2500\u2500 variables.tf\n    \u2514\u2500\u2500 outputs.tf\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"modules/vpc/main.tf:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'resource "aws_vpc" "this" {\n  cidr_block           = var.cidr_block\n  enable_dns_hostnames = var.enable_dns_hostnames\n  enable_dns_support   = var.enable_dns_support\n\n  tags = merge(\n    var.tags,\n    {\n      Name = var.name\n    }\n  )\n}\n\nresource "aws_subnet" "public" {\n  count                   = length(var.public_subnet_cidrs)\n  vpc_id                  = aws_vpc.this.id\n  cidr_block              = var.public_subnet_cidrs[count.index]\n  availability_zone       = var.azs[count.index]\n  map_public_ip_on_launch = true\n\n  tags = merge(\n    var.tags,\n    {\n      Name = "${var.name}-public-${count.index + 1}"\n    }\n  )\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"modules/vpc/variables.tf:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'variable "name" {\n  description = "Name of VPC"\n  type        = string\n}\n\nvariable "cidr_block" {\n  description = "CIDR block for VPC"\n  type        = string\n}\n\nvariable "public_subnet_cidrs" {\n  description = "List of public subnet CIDR blocks"\n  type        = list(string)\n}\n\nvariable "azs" {\n  description = "Availability zones"\n  type        = list(string)\n}\n\nvariable "enable_dns_hostnames" {\n  description = "Enable DNS hostnames"\n  type        = bool\n  default     = true\n}\n\nvariable "enable_dns_support" {\n  description = "Enable DNS support"\n  type        = bool\n  default     = true\n}\n\nvariable "tags" {\n  description = "Tags to apply to resources"\n  type        = map(string)\n  default     = {}\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"modules/vpc/outputs.tf:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'output "vpc_id" {\n  description = "VPC ID"\n  value       = aws_vpc.this.id\n}\n\noutput "public_subnet_ids" {\n  description = "Public subnet IDs"\n  value       = aws_subnet.public[*].id\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"using-a-module",children:"Using a Module"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'module "vpc" {\n  source = "./modules/vpc"\n\n  name                 = "my-vpc"\n  cidr_block           = "10.0.0.0/16"\n  public_subnet_cidrs  = ["10.0.1.0/24", "10.0.2.0/24"]\n  azs                  = ["us-east-1a", "us-east-1b"]\n\n  tags = {\n    Environment = "production"\n    ManagedBy   = "Terraform"\n  }\n}\n\n# Use module outputs\nresource "aws_instance" "web" {\n  subnet_id = module.vpc.public_subnet_ids[0]\n  # ... other configuration\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"state-management",children:"State Management"}),"\n",(0,s.jsx)(n.h3,{id:"local-state-not-recommended-for-teams",children:"Local State (Not Recommended for Teams)"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:"# terraform.tfstate stored locally\n# Simple but problematic for teams\n"})}),"\n",(0,s.jsx)(n.h3,{id:"remote-state-recommended",children:"Remote State (Recommended)"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"S3 Backend:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'terraform {\n  backend "s3" {\n    bucket         = "my-terraform-state"\n    key            = "prod/terraform.tfstate"\n    region         = "us-east-1"\n    encrypt        = true\n    dynamodb_table = "terraform-locks"\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Create S3 Backend:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Create S3 bucket\naws s3 mb s3://my-terraform-state --region us-east-1\n\n# Enable versioning\naws s3api put-bucket-versioning \\\n  --bucket my-terraform-state \\\n  --versioning-configuration Status=Enabled\n\n# Create DynamoDB table for locking\naws dynamodb create-table \\\n  --table-name terraform-locks \\\n  --attribute-definitions AttributeName=LockID,AttributeType=S \\\n  --key-schema AttributeName=LockID,KeyType=HASH \\\n  --billing-mode PAY_PER_REQUEST\n"})}),"\n",(0,s.jsx)(n.h3,{id:"state-commands",children:"State Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List resources in state\nterraform state list\n\n# Show resource details\nterraform state show aws_instance.web\n\n# Move resource in state\nterraform state mv aws_instance.web aws_instance.web_server\n\n# Remove resource from state (doesn't destroy)\nterraform state rm aws_instance.web\n\n# Pull remote state\nterraform state pull\n\n# Import existing resource\nterraform import aws_instance.web i-0123456789abcdef\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"workspaces",children:"Workspaces"}),"\n",(0,s.jsx)(n.p,{children:"Manage multiple environments with the same configuration:"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# List workspaces\nterraform workspace list\n\n# Create new workspace\nterraform workspace new dev\nterraform workspace new staging\nterraform workspace new prod\n\n# Switch workspace\nterraform workspace select dev\n\n# Show current workspace\nterraform workspace show\n\n# Delete workspace\nterraform workspace delete dev\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Use workspace in configuration:"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'resource "aws_instance" "web" {\n  instance_type = terraform.workspace == "prod" ? "t3.large" : "t3.micro"\n\n  tags = {\n    Environment = terraform.workspace\n  }\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"advanced-features",children:"Advanced Features"}),"\n",(0,s.jsx)(n.h3,{id:"for-each",children:"For Each"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'variable "users" {\n  type = map(object({\n    role = string\n  }))\n  default = {\n    "alice" = { role = "admin" }\n    "bob"   = { role = "user" }\n    "carol" = { role = "user" }\n  }\n}\n\nresource "aws_iam_user" "users" {\n  for_each = var.users\n  name     = each.key\n\n  tags = {\n    Role = each.value.role\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"dynamic-blocks",children:"Dynamic Blocks"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'variable "ingress_rules" {\n  type = list(object({\n    from_port   = number\n    to_port     = number\n    protocol    = string\n    cidr_blocks = list(string)\n  }))\n  default = [\n    {\n      from_port   = 80\n      to_port     = 80\n      protocol    = "tcp"\n      cidr_blocks = ["0.0.0.0/0"]\n    },\n    {\n      from_port   = 443\n      to_port     = 443\n      protocol    = "tcp"\n      cidr_blocks = ["0.0.0.0/0"]\n    }\n  ]\n}\n\nresource "aws_security_group" "web" {\n  name = "web-sg"\n\n  dynamic "ingress" {\n    for_each = var.ingress_rules\n    content {\n      from_port   = ingress.value.from_port\n      to_port     = ingress.value.to_port\n      protocol    = ingress.value.protocol\n      cidr_blocks = ingress.value.cidr_blocks\n    }\n  }\n}\n'})}),"\n",(0,s.jsx)(n.h3,{id:"conditional-expressions",children:"Conditional Expressions"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'resource "aws_instance" "web" {\n  ami           = var.ami_id\n  instance_type = var.environment == "prod" ? "t3.large" : "t3.micro"\n\n  # Create instance only in production\n  count = var.environment == "prod" ? 1 : 0\n}\n'})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"1. Use Version Control"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:'git init\ngit add .\ngit commit -m "Initial Terraform configuration"\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"2. Use Remote State"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'terraform {\n  backend "s3" {\n    # ... configuration\n  }\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"3. Use Variables"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'# Don\'t hardcode values\n# Use variables for flexibility\nvariable "instance_type" {}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"4. Use Modules for Reusability"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-hcl",children:'module "vpc" {\n  source = "./modules/vpc"\n  # ...\n}\n'})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"5. Always Run Plan Before Apply"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"terraform plan -out=tfplan\nterraform apply tfplan\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"6. Use .gitignore"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{children:"# .gitignore\n.terraform/\n*.tfstate\n*.tfstate.backup\n.terraform.lock.hcl\n*.tfvars  # If contains secrets\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"7. Format and Validate"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"terraform fmt -recursive\nterraform validate\n"})}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"8. Use Linting and Security Scanning"})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"tfsec .\ncheckov -d .\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"common-commands",children:"Common Commands"}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-bash",children:"# Initialize\nterraform init\n\n# Format code\nterraform fmt\n\n# Validate configuration\nterraform validate\n\n# Plan changes\nterraform plan\nterraform plan -out=tfplan\n\n# Apply changes\nterraform apply\nterraform apply tfplan\nterraform apply -auto-approve\n\n# Destroy infrastructure\nterraform destroy\nterraform destroy -target=aws_instance.web\n\n# Show current state\nterraform show\n\n# Output values\nterraform output\nterraform output instance_ip\n\n# Refresh state\nterraform refresh\n\n# Graph dependencies\nterraform graph | dot -Tpng > graph.png\n"})}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.terraform.io/docs",children:"Terraform Documentation"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://registry.terraform.io/",children:"Terraform Registry"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://learn.hashicorp.com/terraform",children:"Learn Terraform"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"https://www.terraform-best-practices.com/",children:"Terraform Best Practices"})}),"\n"]}),"\n",(0,s.jsx)(n.hr,{}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.strong,{children:"Master Terraform to automate multi-cloud infrastructure provisioning!"})})]})}function u(e={}){const{wrapper:n}={...(0,t.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(d,{...e})}):d(e)}},8453:(e,n,r)=>{r.d(n,{R:()=>i,x:()=>o});var a=r(6540);const s={},t=a.createContext(s);function i(e){const n=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:i(e.components),a.createElement(t.Provider,{value:n},e.children)}}}]);