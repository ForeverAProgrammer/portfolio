"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[200],{28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>o});var i=n(96540);const s={},r=i.createContext(s);function a(e){const t=i.useContext(r);return i.useMemo(function(){return"function"==typeof e?e(t):{...t,...e}},[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:a(e.components),i.createElement(r.Provider,{value:t},e.children)}},38328:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>l,contentTitle:()=>o,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>d});const i=JSON.parse('{"id":"design-patterns/behavioral/memento","title":"Memento Pattern","description":"Without violating encapsulation, capture and externalise an object\'s internal state so that the object can be restored to this state later.","source":"@site/docs/design-patterns/behavioral/memento.md","sourceDirName":"design-patterns/behavioral","slug":"/design-patterns/behavioral/memento","permalink":"/docs/design-patterns/behavioral/memento","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":10,"frontMatter":{"sidebar_position":10},"sidebar":"tutorialSidebar","previous":{"title":"Mediator Pattern","permalink":"/docs/design-patterns/behavioral/mediator"},"next":{"title":"Visitor Pattern","permalink":"/docs/design-patterns/behavioral/visitor"}}');var s=n(74848),r=n(28453);const a={sidebar_position:10},o="Memento Pattern",l={},d=[{value:"Problem",id:"problem",level:2},{value:"Design Principles Applied",id:"design-principles-applied",level:2},{value:"Key Roles",id:"key-roles",level:2},{value:"UML Diagram",id:"uml-diagram",level:2},{value:"Implementation",id:"implementation",level:2},{value:"Example 1: Text Editor with Undo",id:"example-1-text-editor-with-undo",level:3},{value:"Step 1: Define the Memento",id:"step-1-define-the-memento",level:3},{value:"Step 2: Define the Originator",id:"step-2-define-the-originator",level:3},{value:"Step 3: Define the Caretaker",id:"step-3-define-the-caretaker",level:3},{value:"Step 4: Client Usage",id:"step-4-client-usage",level:3},{value:"Example 2: Game Checkpoint",id:"example-2-game-checkpoint",level:2},{value:"Real-World Examples",id:"real-world-examples",level:2},{value:"Memento vs Similar Patterns",id:"memento-vs-similar-patterns",level:2}];function c(e){const t={code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",mermaid:"mermaid",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,r.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(t.header,{children:(0,s.jsx)(t.h1,{id:"memento-pattern",children:"Memento Pattern"})}),"\n",(0,s.jsx)(t.p,{children:"Without violating encapsulation, capture and externalise an object's internal state so that the object can be restored to this state later."}),"\n",(0,s.jsx)(t.h2,{id:"problem",children:"Problem"}),"\n",(0,s.jsx)(t.p,{children:"You need to implement undo/redo or snapshot functionality, but saving state directly exposes the internal details of an object, breaking encapsulation."}),"\n",(0,s.jsx)(t.p,{children:(0,s.jsx)(t.strong,{children:"Common Scenarios:"})}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsx)(t.li,{children:"Undo/redo in text editors or drawing applications"}),"\n",(0,s.jsx)(t.li,{children:"Game save states and checkpoints"}),"\n",(0,s.jsx)(t.li,{children:"Transaction rollback in databases"}),"\n",(0,s.jsx)(t.li,{children:"Wizard-style forms where users can go back"}),"\n",(0,s.jsx)(t.li,{children:"Version history for documents or configurations"}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"design-principles-applied",children:"Design Principles Applied"}),"\n",(0,s.jsxs)(t.ol,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Encapsulation"})," - The Originator's internal state is never exposed to the Caretaker"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Single Responsibility"})," - State saving is separated from the object that owns the state"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Open/Closed Principle"})," - Add new state snapshots without modifying the Originator"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"key-roles",children:"Key Roles"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Role"}),(0,s.jsx)(t.th,{children:"Responsibility"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Originator"})}),(0,s.jsx)(t.td,{children:"The object whose state is saved. Creates and restores mementos"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Memento"})}),(0,s.jsx)(t.td,{children:"Stores a snapshot of the Originator's state. Opaque to the Caretaker"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Caretaker"})}),(0,s.jsx)(t.td,{children:"Holds mementos and decides when to save/restore. Never reads memento contents"})]})]})]}),"\n",(0,s.jsx)(t.h2,{id:"uml-diagram",children:"UML Diagram"}),"\n",(0,s.jsx)(t.mermaid,{value:'classDiagram\n    class Originator {\n        -state\n        +createMemento() Memento\n        +restore(Memento)\n        +getState()\n        +setState()\n    }\n    class Memento {\n        -state\n        +getState()\n    }\n    class Caretaker {\n        -mementos\n        +save()\n        +undo()\n    }\n    class Client {\n        <<actor>>\n    }\n    note for Client "Represents any code that uses the pattern, not a concrete class"\n    Client --\x3e Originator\n    Client --\x3e Caretaker\n    Caretaker o-- Memento : mementos\n    Originator ..> Memento : creates'}),"\n",(0,s.jsx)(t.h2,{id:"implementation",children:"Implementation"}),"\n",(0,s.jsx)(t.h3,{id:"example-1-text-editor-with-undo",children:"Example 1: Text Editor with Undo"}),"\n",(0,s.jsx)(t.h3,{id:"step-1-define-the-memento",children:"Step 1: Define the Memento"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"// Memento \u2014 stores a snapshot of the editor's text\n// Only the Originator (Editor) can read its state\npublic class EditorMemento {\n    private final String text;\n    private final int cursorPosition;\n\n    public EditorMemento(String text, int cursorPosition) {\n        this.text = text;\n        this.cursorPosition = cursorPosition;\n    }\n\n    // Package-private so only classes in the same package (the Editor) can access state\n    String getText() { return text; }\n    int getCursorPosition() { return cursorPosition; }\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"step-2-define-the-originator",children:"Step 2: Define the Originator"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'// Originator \u2014 the text editor whose state we want to snapshot\npublic class TextEditor {\n    private String text = "";\n    private int cursorPosition = 0;\n\n    public void type(String words) {\n        text += words;\n        cursorPosition = text.length();\n    }\n\n    public void delete(int characters) {\n        if (characters > text.length()) characters = text.length();\n        text = text.substring(0, text.length() - characters);\n        cursorPosition = text.length();\n    }\n\n    // Creates a snapshot of current state\n    public EditorMemento save() {\n        return new EditorMemento(text, cursorPosition);\n    }\n\n    // Restores state from a snapshot\n    public void restore(EditorMemento memento) {\n        this.text = memento.getText();\n        this.cursorPosition = memento.getCursorPosition();\n    }\n\n    public String getText() { return text; }\n}\n'})}),"\n",(0,s.jsx)(t.h3,{id:"step-3-define-the-caretaker",children:"Step 3: Define the Caretaker"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:"// Caretaker \u2014 manages the history of snapshots\n// It stores and retrieves mementos but never inspects their contents\npublic class EditorHistory {\n    private final Deque<EditorMemento> history = new ArrayDeque<>();\n\n    public void save(TextEditor editor) {\n        history.push(editor.save());\n    }\n\n    public void undo(TextEditor editor) {\n        if (!history.isEmpty()) {\n            editor.restore(history.pop());\n        }\n    }\n\n    public int size() { return history.size(); }\n}\n"})}),"\n",(0,s.jsx)(t.h3,{id:"step-4-client-usage",children:"Step 4: Client Usage"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'TextEditor editor = new TextEditor();\nEditorHistory history = new EditorHistory();\n\neditor.type("Hello");\nhistory.save(editor);      // snapshot 1: "Hello"\n\neditor.type(", World");\nhistory.save(editor);      // snapshot 2: "Hello, World"\n\neditor.type("!!!");\nSystem.out.println(editor.getText()); // Hello, World!!!\n\nhistory.undo(editor);\nSystem.out.println(editor.getText()); // Hello, World\n\nhistory.undo(editor);\nSystem.out.println(editor.getText()); // Hello\n'})}),"\n",(0,s.jsx)(t.h2,{id:"example-2-game-checkpoint",children:"Example 2: Game Checkpoint"}),"\n",(0,s.jsx)(t.pre,{children:(0,s.jsx)(t.code,{className:"language-java",children:'public class GameState {\n    private final int level;\n    private final int health;\n    private final int score;\n\n    public GameState(int level, int health, int score) {\n        this.level = level;\n        this.health = health;\n        this.score = score;\n    }\n\n    int getLevel()  { return level; }\n    int getHealth() { return health; }\n    int getScore()  { return score; }\n}\n\npublic class Game {\n    private int level  = 1;\n    private int health = 100;\n    private int score  = 0;\n\n    public void progress(int levelsGained, int healthLost, int pointsScored) {\n        level  += levelsGained;\n        health -= healthLost;\n        score  += pointsScored;\n    }\n\n    public GameState save() {\n        return new GameState(level, health, score);\n    }\n\n    public void restore(GameState state) {\n        this.level  = state.getLevel();\n        this.health = state.getHealth();\n        this.score  = state.getScore();\n    }\n\n    @Override\n    public String toString() {\n        return "Level=" + level + ", Health=" + health + ", Score=" + score;\n    }\n}\n\n// Usage\nGame game = new Game();\ngame.progress(2, 20, 300);\nSystem.out.println(game); // Level=3, Health=80, Score=300\n\nGameState checkpoint = game.save();\n\ngame.progress(1, 90, 100); // bad run, nearly died\nSystem.out.println(game);  // Level=4, Health=-10, Score=400\n\ngame.restore(checkpoint);\nSystem.out.println(game);  // Level=3, Health=80, Score=300\n'})}),"\n",(0,s.jsx)(t.h2,{id:"real-world-examples",children:"Real-World Examples"}),"\n",(0,s.jsxs)(t.ul,{children:["\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:(0,s.jsx)(t.code,{children:"javax.swing.undo.UndoManager"})})," \u2014 Java Swing's built-in undo framework uses the Memento concept"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Git commits"})," \u2014 each commit is a snapshot (memento) of the repository state"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Database transactions"})," \u2014 a savepoint captures state that can be rolled back to"]}),"\n",(0,s.jsxs)(t.li,{children:[(0,s.jsx)(t.strong,{children:"Serialization"})," \u2014 serialising an object to bytes/JSON is a form of memento"]}),"\n"]}),"\n",(0,s.jsx)(t.h2,{id:"memento-vs-similar-patterns",children:"Memento vs Similar Patterns"}),"\n",(0,s.jsxs)(t.table,{children:[(0,s.jsx)(t.thead,{children:(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.th,{children:"Pattern"}),(0,s.jsx)(t.th,{children:"Intent"})]})}),(0,s.jsxs)(t.tbody,{children:[(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Memento"})}),(0,s.jsx)(t.td,{children:"Snapshot and restore an object's private state without breaking encapsulation"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Command"})}),(0,s.jsx)(t.td,{children:"Supports undo by storing the inverse operation, not a full state snapshot"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"Prototype"})}),(0,s.jsx)(t.td,{children:"Clones an object's state, but the clone is a fully usable copy, not an opaque token"})]}),(0,s.jsxs)(t.tr,{children:[(0,s.jsx)(t.td,{children:(0,s.jsx)(t.strong,{children:"State"})}),(0,s.jsx)(t.td,{children:"Changes an object's behaviour based on its current state; doesn't capture history"})]})]})]})]})}function h(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,s.jsx)(t,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}}}]);