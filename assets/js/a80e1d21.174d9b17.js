"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[4725],{4462:(n,e,s)=>{s.r(e),s.d(e,{assets:()=>o,contentTitle:()=>t,default:()=>p,frontMatter:()=>i,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"devops/infrastructure-as-code/ansible","title":"Ansible","description":"Master Ansible for agentless automation, configuration management, and application deployment. Learn to automate server setup, software installation, and deployments at scale.","source":"@site/docs/devops/infrastructure-as-code/ansible.md","sourceDirName":"devops/infrastructure-as-code","slug":"/devops/infrastructure-as-code/ansible","permalink":"/portfolio/docs/devops/infrastructure-as-code/ansible","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"tutorialSidebar","previous":{"title":"Terraform","permalink":"/portfolio/docs/devops/infrastructure-as-code/terraform"},"next":{"title":"Monitoring & Logging","permalink":"/portfolio/docs/devops/monitoring/"}}');var l=s(4848),r=s(8453);const i={sidebar_position:2},t="Ansible",o={},c=[{value:"What is Ansible?",id:"what-is-ansible",level:2},{value:"Key Features",id:"key-features",level:3},{value:"Installation",id:"installation",level:2},{value:"Ansible Architecture",id:"ansible-architecture",level:2},{value:"Inventory",id:"inventory",level:2},{value:"INI Format (inventory.ini)",id:"ini-format-inventoryini",level:3},{value:"YAML Format (inventory.yml)",id:"yaml-format-inventoryyml",level:3},{value:"Dynamic Inventory",id:"dynamic-inventory",level:3},{value:"Ad-Hoc Commands",id:"ad-hoc-commands",level:2},{value:"Playbooks",id:"playbooks",level:2},{value:"Basic Playbook",id:"basic-playbook",level:3},{value:"Playbook with Variables",id:"playbook-with-variables",level:3},{value:"Variables from File",id:"variables-from-file",level:3},{value:"Handlers",id:"handlers",level:2},{value:"Templates (Jinja2)",id:"templates-jinja2",level:2},{value:"Roles",id:"roles",level:2},{value:"Role Structure",id:"role-structure",level:3},{value:"Ansible Vault",id:"ansible-vault",level:2},{value:"Common Modules",id:"common-modules",level:2},{value:"Package Management",id:"package-management",level:3},{value:"File Operations",id:"file-operations",level:3},{value:"Service Management",id:"service-management",level:3},{value:"User Management",id:"user-management",level:3},{value:"Docker",id:"docker",level:3},{value:"Complete Example: Full Stack Deployment",id:"complete-example-full-stack-deployment",level:2},{value:"Best Practices",id:"best-practices",level:2},{value:"CI/CD Integration",id:"cicd-integration",level:2},{value:"Useful Commands",id:"useful-commands",level:2},{value:"Resources",id:"resources",level:2}];function d(n){const e={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.header,{children:(0,l.jsx)(e.h1,{id:"ansible",children:"Ansible"})}),"\n",(0,l.jsx)(e.p,{children:"Master Ansible for agentless automation, configuration management, and application deployment. Learn to automate server setup, software installation, and deployments at scale."}),"\n",(0,l.jsx)(e.h2,{id:"what-is-ansible",children:"What is Ansible?"}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"Ansible"})," is an open-source automation tool that automates software provisioning, configuration management, and application deployment using simple, human-readable YAML files called playbooks."]}),"\n",(0,l.jsx)(e.h3,{id:"key-features",children:"Key Features"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Agentless"})," - No software to install on managed nodes (uses SSH)"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Simple"})," - YAML syntax, easy to learn"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Powerful"})," - Orchestrate complex deployments"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Idempotent"})," - Safe to run multiple times"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Extensible"})," - Thousands of modules available"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Multi-Platform"})," - Linux, Windows, network devices, cloud"]}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"installation",children:"Installation"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Linux (Ubuntu/Debian):"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"sudo apt update\nsudo apt install ansible\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"macOS:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"brew install ansible\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Using pip:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"pip install ansible\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Verify installation:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ansible --version\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"ansible-architecture",children:"Ansible Architecture"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Control Node             \u2502\n\u2502   (Your machine)           \u2502\n\u2502   - Ansible installed      \u2502\n\u2502   - Inventory file         \u2502\n\u2502   - Playbooks             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n           \u2502 SSH\n     \u250c\u2500\u2500\u2500\u2500\u2500\u2534\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n     \u2502            \u2502          \u2502\n\u250c\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2510 \u250c\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502Managed  \u2502  \u2502Managed \u2502 \u2502Managed \u2502\n\u2502Node 1   \u2502  \u2502Node 2  \u2502 \u2502Node 3  \u2502\n\u2502(server) \u2502  \u2502(server)\u2502 \u2502(server)\u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"inventory",children:"Inventory"}),"\n",(0,l.jsx)(e.p,{children:"Define your servers in an inventory file."}),"\n",(0,l.jsx)(e.h3,{id:"ini-format-inventoryini",children:"INI Format (inventory.ini)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ini",children:"# Single host\nweb1.example.com\n\n# Group of hosts\n[webservers]\nweb1.example.com\nweb2.example.com\nweb3.example.com\n\n[databases]\ndb1.example.com\ndb2.example.com\n\n# Host with variables\n[webservers]\nweb1.example.com ansible_user=ubuntu ansible_port=2222\n\n# Group variables\n[webservers:vars]\nansible_user=ubuntu\nansible_python_interpreter=/usr/bin/python3\n\n# Nested groups\n[production:children]\nwebservers\ndatabases\n"})}),"\n",(0,l.jsx)(e.h3,{id:"yaml-format-inventoryyml",children:"YAML Format (inventory.yml)"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"all:\n  children:\n    webservers:\n      hosts:\n        web1.example.com:\n        web2.example.com:\n      vars:\n        ansible_user: ubuntu\n        http_port: 80\n\n    databases:\n      hosts:\n        db1.example.com:\n          ansible_host: 10.0.1.50\n        db2.example.com:\n          ansible_host: 10.0.1.51\n"})}),"\n",(0,l.jsx)(e.h3,{id:"dynamic-inventory",children:"Dynamic Inventory"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# AWS dynamic inventory\nansible-inventory -i aws_ec2.yml --graph\n\n# Custom script\n#!/usr/bin/env python3\nimport json\n\ninventory = {\n    "webservers": {\n        "hosts": ["web1.example.com", "web2.example.com"]\n    },\n    "_meta": {\n        "hostvars": {}\n    }\n}\n\nprint(json.dumps(inventory))\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"ad-hoc-commands",children:"Ad-Hoc Commands"}),"\n",(0,l.jsx)(e.p,{children:"Run single tasks without a playbook:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# Ping all hosts\nansible all -m ping -i inventory.ini\n\n# Check uptime\nansible webservers -m shell -a "uptime"\n\n# Install package\nansible webservers -m apt -a "name=nginx state=present" --become\n\n# Copy file\nansible webservers -m copy -a "src=./index.html dest=/var/www/html/"\n\n# Restart service\nansible webservers -m service -a "name=nginx state=restarted" --become\n\n# Gather facts\nansible webservers -m setup\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"playbooks",children:"Playbooks"}),"\n",(0,l.jsx)(e.p,{children:"YAML files defining automation tasks."}),"\n",(0,l.jsx)(e.h3,{id:"basic-playbook",children:"Basic Playbook"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# webserver.yml\n---\n- name: Configure web servers\n  hosts: webservers\n  become: yes  # Run as sudo\n\n  tasks:\n    - name: Update apt cache\n      apt:\n        update_cache: yes\n\n    - name: Install nginx\n      apt:\n        name: nginx\n        state: present\n\n    - name: Start nginx service\n      service:\n        name: nginx\n        state: started\n        enabled: yes\n\n    - name: Copy index.html\n      copy:\n        src: files/index.html\n        dest: /var/www/html/index.html\n        owner: www-data\n        group: www-data\n        mode: '0644'\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Run playbook:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ansible-playbook -i inventory.ini webserver.yml\n"})}),"\n",(0,l.jsx)(e.h3,{id:"playbook-with-variables",children:"Playbook with Variables"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'---\n- name: Deploy application\n  hosts: webservers\n  become: yes\n\n  vars:\n    app_name: myapp\n    app_version: 1.0.0\n    app_port: 8080\n\n  tasks:\n    - name: Create app directory\n      file:\n        path: "/opt/{{ app_name }}"\n        state: directory\n        mode: \'0755\'\n\n    - name: Deploy application\n      copy:\n        src: "{{ app_name }}-{{ app_version }}.jar"\n        dest: "/opt/{{ app_name }}/app.jar"\n\n    - name: Create systemd service\n      template:\n        src: templates/app.service.j2\n        dest: "/etc/systemd/system/{{ app_name }}.service"\n      notify: Restart application\n\n  handlers:\n    - name: Restart application\n      systemd:\n        name: "{{ app_name }}"\n        state: restarted\n        daemon_reload: yes\n'})}),"\n",(0,l.jsx)(e.h3,{id:"variables-from-file",children:"Variables from File"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# vars/main.yml\napp_name: myapp\napp_version: 1.0.0\ndatabase_host: db.example.com\ndatabase_port: 5432\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# playbook.yml\n---\n- name: Deploy application\n  hosts: webservers\n  become: yes\n  vars_files:\n    - vars/main.yml\n\n  tasks:\n    - name: Configure application\n      template:\n        src: config.j2\n        dest: /etc/myapp/config.yml\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"handlers",children:"Handlers"}),"\n",(0,l.jsx)(e.p,{children:"Run tasks only when notified (typically for service restarts):"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'---\n- name: Configure nginx\n  hosts: webservers\n  become: yes\n\n  tasks:\n    - name: Install nginx\n      apt:\n        name: nginx\n        state: present\n\n    - name: Copy nginx config\n      template:\n        src: nginx.conf.j2\n        dest: /etc/nginx/nginx.conf\n      notify:\n        - Reload nginx\n        - Send notification\n\n  handlers:\n    - name: Reload nginx\n      service:\n        name: nginx\n        state: reloaded\n\n    - name: Send notification\n      debug:\n        msg: "Nginx configuration changed"\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"templates-jinja2",children:"Templates (Jinja2)"}),"\n",(0,l.jsx)(e.p,{children:"Dynamic configuration files:"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"templates/nginx.conf.j2:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-jinja2",children:"server {\n    listen {{ http_port }};\n    server_name {{ server_name }};\n\n    root /var/www/{{ app_name }};\n    index index.html;\n\n    location / {\n        try_files $uri $uri/ =404;\n    }\n\n    {% if enable_ssl %}\n    listen 443 ssl;\n    ssl_certificate /etc/ssl/certs/{{ server_name }}.crt;\n    ssl_certificate_key /etc/ssl/private/{{ server_name }}.key;\n    {% endif %}\n}\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Using template:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- name: Deploy nginx config\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/sites-available/{{ app_name }}\n  vars:\n    http_port: 80\n    server_name: example.com\n    app_name: myapp\n    enable_ssl: true\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"roles",children:"Roles"}),"\n",(0,l.jsx)(e.p,{children:"Organize playbooks into reusable components."}),"\n",(0,l.jsx)(e.h3,{id:"role-structure",children:"Role Structure"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"roles/\n\u2514\u2500\u2500 webserver/\n    \u251c\u2500\u2500 tasks/\n    \u2502   \u2514\u2500\u2500 main.yml\n    \u251c\u2500\u2500 handlers/\n    \u2502   \u2514\u2500\u2500 main.yml\n    \u251c\u2500\u2500 templates/\n    \u2502   \u2514\u2500\u2500 nginx.conf.j2\n    \u251c\u2500\u2500 files/\n    \u2502   \u2514\u2500\u2500 index.html\n    \u251c\u2500\u2500 vars/\n    \u2502   \u2514\u2500\u2500 main.yml\n    \u251c\u2500\u2500 defaults/\n    \u2502   \u2514\u2500\u2500 main.yml\n    \u2514\u2500\u2500 meta/\n        \u2514\u2500\u2500 main.yml\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"roles/webserver/tasks/main.yml:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\n- name: Install nginx\n  apt:\n    name: nginx\n    state: present\n\n- name: Copy nginx config\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/sites-available/default\n  notify: Reload nginx\n\n- name: Start nginx\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"roles/webserver/handlers/main.yml:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\n- name: Reload nginx\n  service:\n    name: nginx\n    state: reloaded\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"roles/webserver/defaults/main.yml:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\nhttp_port: 80\nserver_name: localhost\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Using a role:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\n- name: Configure web servers\n  hosts: webservers\n  become: yes\n\n  roles:\n    - webserver\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"ansible-vault",children:"Ansible Vault"}),"\n",(0,l.jsx)(e.p,{children:"Encrypt sensitive data:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Create encrypted file\nansible-vault create secrets.yml\n\n# Edit encrypted file\nansible-vault edit secrets.yml\n\n# Encrypt existing file\nansible-vault encrypt vars/passwords.yml\n\n# Decrypt file\nansible-vault decrypt vars/passwords.yml\n\n# View encrypted file\nansible-vault view secrets.yml\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"secrets.yml (after creating):"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\ndb_password: SuperSecretPassword123!\napi_key: abc123def456\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Using encrypted variables:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\n- name: Deploy with secrets\n  hosts: webservers\n  become: yes\n  vars_files:\n    - secrets.yml\n\n  tasks:\n    - name: Configure database connection\n      template:\n        src: db_config.j2\n        dest: /etc/myapp/db.conf\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Run with vault:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Prompt for password\nansible-playbook playbook.yml --ask-vault-pass\n\n# Use password file\nansible-playbook playbook.yml --vault-password-file ~/.vault_pass.txt\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"common-modules",children:"Common Modules"}),"\n",(0,l.jsx)(e.h3,{id:"package-management",children:"Package Management"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# APT (Ubuntu/Debian)\n- name: Install packages\n  apt:\n    name:\n      - nginx\n      - postgresql\n      - python3-pip\n    state: present\n    update_cache: yes\n\n# YUM (RHEL/CentOS)\n- name: Install packages\n  yum:\n    name:\n      - httpd\n      - mariadb-server\n    state: present\n"})}),"\n",(0,l.jsx)(e.h3,{id:"file-operations",children:"File Operations"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# Create directory\n- name: Create directory\n  file:\n    path: /opt/myapp\n    state: directory\n    mode: '0755'\n    owner: ubuntu\n    group: ubuntu\n\n# Copy file\n- name: Copy file\n  copy:\n    src: files/app.conf\n    dest: /etc/myapp/app.conf\n    mode: '0644'\n\n# Download file\n- name: Download file\n  get_url:\n    url: https://example.com/app.jar\n    dest: /opt/myapp/app.jar\n\n# Create symlink\n- name: Create symlink\n  file:\n    src: /opt/myapp/app-1.0.0\n    dest: /opt/myapp/current\n    state: link\n"})}),"\n",(0,l.jsx)(e.h3,{id:"service-management",children:"Service Management"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# Start service\n- name: Start nginx\n  service:\n    name: nginx\n    state: started\n    enabled: yes\n\n# Restart service\n- name: Restart application\n  systemd:\n    name: myapp\n    state: restarted\n    daemon_reload: yes\n"})}),"\n",(0,l.jsx)(e.h3,{id:"user-management",children:"User Management"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# Create user\n- name: Create application user\n  user:\n    name: appuser\n    state: present\n    shell: /bin/bash\n    groups: docker\n    append: yes\n"})}),"\n",(0,l.jsx)(e.h3,{id:"docker",children:"Docker"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'# Pull Docker image\n- name: Pull image\n  docker_image:\n    name: nginx:latest\n    source: pull\n\n# Run container\n- name: Run container\n  docker_container:\n    name: webserver\n    image: nginx:latest\n    ports:\n      - "80:80"\n    volumes:\n      - /data:/usr/share/nginx/html\n    state: started\n    restart_policy: always\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"complete-example-full-stack-deployment",children:"Complete Example: Full Stack Deployment"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Project Structure:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"ansible-project/\n\u251c\u2500\u2500 inventory/\n\u2502   \u251c\u2500\u2500 production\n\u2502   \u2514\u2500\u2500 staging\n\u251c\u2500\u2500 group_vars/\n\u2502   \u251c\u2500\u2500 all.yml\n\u2502   \u251c\u2500\u2500 webservers.yml\n\u2502   \u2514\u2500\u2500 databases.yml\n\u251c\u2500\u2500 roles/\n\u2502   \u251c\u2500\u2500 common/\n\u2502   \u251c\u2500\u2500 webserver/\n\u2502   \u251c\u2500\u2500 database/\n\u2502   \u2514\u2500\u2500 application/\n\u251c\u2500\u2500 playbooks/\n\u2502   \u251c\u2500\u2500 site.yml\n\u2502   \u251c\u2500\u2500 webservers.yml\n\u2502   \u2514\u2500\u2500 databases.yml\n\u2514\u2500\u2500 ansible.cfg\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"ansible.cfg:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ini",children:"[defaults]\ninventory = inventory/production\nhost_key_checking = False\nretry_files_enabled = False\nroles_path = roles\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"inventory/production:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ini",children:"[webservers]\nweb1.example.com\nweb2.example.com\n\n[databases]\ndb1.example.com\n\n[all:vars]\nansible_user=ubuntu\nansible_python_interpreter=/usr/bin/python3\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"group_vars/all.yml:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\nenvironment: production\napp_name: myapp\napp_version: 1.0.0\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"playbooks/site.yml:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"---\n- name: Configure all servers\n  hosts: all\n  become: yes\n  roles:\n    - common\n\n- name: Configure web servers\n  hosts: webservers\n  become: yes\n  roles:\n    - webserver\n    - application\n\n- name: Configure databases\n  hosts: databases\n  become: yes\n  roles:\n    - database\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Deploy:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ansible-playbook playbooks/site.yml\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"1. Use Roles for Organization"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{children:"roles/\n\u251c\u2500\u2500 common/\n\u251c\u2500\u2500 webserver/\n\u2514\u2500\u2500 database/\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"2. Idempotent Tasks"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# Good - can run multiple times safely\n- name: Ensure nginx is installed\n  apt:\n    name: nginx\n    state: present\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"3. Use Check Mode (Dry Run)"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"ansible-playbook playbook.yml --check\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"4. Tagging"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- name: Install packages\n  apt:\n    name: nginx\n  tags: [install, nginx]\n\n- name: Configure nginx\n  template:\n    src: nginx.conf.j2\n    dest: /etc/nginx/nginx.conf\n  tags: [configure, nginx]\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:"# Run only install tags\nansible-playbook playbook.yml --tags install\n\n# Skip configure tags\nansible-playbook playbook.yml --skip-tags configure\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"5. Use Variables Wisely"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"# defaults/main.yml - default values\nhttp_port: 80\n\n# vars/main.yml - constants\napp_name: myapp\n\n# group_vars/ - per-group overrides\n# host_vars/ - per-host overrides\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"6. Error Handling"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"- name: Start service\n  service:\n    name: myapp\n    state: started\n  ignore_errors: yes\n\n- name: Check if file exists\n  stat:\n    path: /etc/myapp/config.yml\n  register: config_file\n\n- name: Create config if missing\n  template:\n    src: config.yml.j2\n    dest: /etc/myapp/config.yml\n  when: not config_file.stat.exists\n"})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"cicd-integration",children:"CI/CD Integration"}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"GitHub Actions:"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:'# .github/workflows/ansible.yml\nname: Ansible Deployment\n\non:\n  push:\n    branches: [main]\n\njobs:\n  deploy:\n    runs-on: ubuntu-latest\n    steps:\n      - uses: actions/checkout@v3\n\n      - name: Install Ansible\n        run: |\n          pip install ansible\n\n      - name: Run playbook\n        env:\n          ANSIBLE_VAULT_PASSWORD: ${{ secrets.VAULT_PASSWORD }}\n        run: |\n          echo "$ANSIBLE_VAULT_PASSWORD" > vault_pass.txt\n          ansible-playbook playbooks/site.yml --vault-password-file vault_pass.txt\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"useful-commands",children:"Useful Commands"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-bash",children:'# Check syntax\nansible-playbook playbook.yml --syntax-check\n\n# List tasks\nansible-playbook playbook.yml --list-tasks\n\n# List hosts\nansible-playbook playbook.yml --list-hosts\n\n# Step through playbook\nansible-playbook playbook.yml --step\n\n# Start at specific task\nansible-playbook playbook.yml --start-at-task="Install nginx"\n\n# Limit to specific hosts\nansible-playbook playbook.yml --limit webservers\n\n# Increase verbosity\nansible-playbook playbook.yml -v\nansible-playbook playbook.yml -vv\nansible-playbook playbook.yml -vvv\n'})}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.h2,{id:"resources",children:"Resources"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://docs.ansible.com/",children:"Ansible Documentation"})}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.a,{href:"https://galaxy.ansible.com/",children:"Ansible Galaxy"})," - Community roles"]}),"\n",(0,l.jsx)(e.li,{children:(0,l.jsx)(e.a,{href:"https://github.com/ansible/ansible-examples",children:"Ansible Examples"})}),"\n",(0,l.jsx)(e.li,{children:'"Ansible for DevOps" by Jeff Geerling'}),"\n"]}),"\n",(0,l.jsx)(e.hr,{}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"Master Ansible to automate configuration management and deployments at scale!"})})]})}function p(n={}){const{wrapper:e}={...(0,r.R)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(d,{...n})}):d(n)}},8453:(n,e,s)=>{s.d(e,{R:()=>i,x:()=>t});var a=s(6540);const l={},r=a.createContext(l);function i(n){const e=a.useContext(r);return a.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function t(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(l):n.components||l:i(n.components),a.createElement(r.Provider,{value:e},n.children)}}}]);