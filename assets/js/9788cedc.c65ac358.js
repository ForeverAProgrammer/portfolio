"use strict";(globalThis.webpackChunkmy_profile_site=globalThis.webpackChunkmy_profile_site||[]).push([[948],{21172:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>p,frontMatter:()=>t,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"devops/gitops","title":"GitOps","description":"Master GitOps for declarative, Git-based continuous deployment. Learn to use ArgoCD for automated Kubernetes deployments with Git as the single source of truth.","source":"@site/docs/devops/gitops.md","sourceDirName":"devops","slug":"/devops/gitops","permalink":"/docs/devops/gitops","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":6,"frontMatter":{"sidebar_position":6},"sidebar":"tutorialSidebar","previous":{"title":"DevOps Security","permalink":"/docs/devops/security"},"next":{"title":"Git Cheat Sheet","permalink":"/docs/devops/git"}}');var i=a(74848),r=a(28453);const t={sidebar_position:6},l="GitOps",o={},c=[{value:"What is GitOps?",id:"what-is-gitops",level:2},{value:"Core Principles",id:"core-principles",level:3},{value:"GitOps Workflow",id:"gitops-workflow",level:2},{value:"ArgoCD",id:"argocd",level:2},{value:"What is ArgoCD?",id:"what-is-argocd",level:3},{value:"Key Features",id:"key-features",level:3},{value:"Installing ArgoCD",id:"installing-argocd",level:2},{value:"Install in Kubernetes",id:"install-in-kubernetes",level:3},{value:"Install ArgoCD CLI",id:"install-argocd-cli",level:3},{value:"Creating Your First Application",id:"creating-your-first-application",level:2},{value:"Repository Structure",id:"repository-structure",level:3},{value:"base/deployment.yaml",id:"basedeploymentyaml",level:3},{value:"base/service.yaml",id:"baseserviceyaml",level:3},{value:"base/kustomization.yaml",id:"basekustomizationyaml",level:3},{value:"overlays/production/kustomization.yaml",id:"overlaysproductionkustomizationyaml",level:3},{value:"Deploying with ArgoCD",id:"deploying-with-argocd",level:2},{value:"Via UI",id:"via-ui",level:3},{value:"Via CLI",id:"via-cli",level:3},{value:"Via YAML",id:"via-yaml",level:3},{value:"Auto Sync and Self-Healing",id:"auto-sync-and-self-healing",level:2},{value:"Automated Sync",id:"automated-sync",level:3},{value:"Manual Sync",id:"manual-sync",level:3},{value:"Multi-Environment Setup",id:"multi-environment-setup",level:2},{value:"Repository Structure",id:"repository-structure-1",level:3},{value:"argocd-apps/dev-myapp.yaml",id:"argocd-appsdev-myappyaml",level:3},{value:"argocd-apps/prod-myapp.yaml",id:"argocd-appsprod-myappyaml",level:3},{value:"App of Apps Pattern",id:"app-of-apps-pattern",level:2},{value:"apps/app-of-apps.yaml",id:"appsapp-of-appsyaml",level:3},{value:"Working with Helm",id:"working-with-helm",level:2},{value:"Helm Repository",id:"helm-repository",level:3},{value:"Helm Chart in Git",id:"helm-chart-in-git",level:3},{value:"Secrets Management",id:"secrets-management",level:2},{value:"Sealed Secrets",id:"sealed-secrets",level:3},{value:"Monitoring and Notifications",id:"monitoring-and-notifications",level:2},{value:"Prometheus Metrics",id:"prometheus-metrics",level:3},{value:"Slack Notifications",id:"slack-notifications",level:3},{value:"Best Practices",id:"best-practices",level:2},{value:"Troubleshooting",id:"troubleshooting",level:2},{value:"Resources",id:"resources",level:2},{value:"Official Documentation",id:"official-documentation",level:3},{value:"Tools",id:"tools",level:3},{value:"Learning",id:"learning",level:3}];function d(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.header,{children:(0,i.jsx)(n.h1,{id:"gitops",children:"GitOps"})}),"\n",(0,i.jsx)(n.p,{children:"Master GitOps for declarative, Git-based continuous deployment. Learn to use ArgoCD for automated Kubernetes deployments with Git as the single source of truth."}),"\n",(0,i.jsx)(n.h2,{id:"what-is-gitops",children:"What is GitOps?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"GitOps"})," is a modern approach to continuous deployment where the desired state of your infrastructure and applications is defined in Git, and automated processes ensure the actual state matches the desired state."]}),"\n",(0,i.jsx)(n.h3,{id:"core-principles",children:"Core Principles"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Git as Single Source of Truth"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"All infrastructure and application configuration in Git"}),"\n",(0,i.jsx)(n.li,{children:"Version controlled"}),"\n",(0,i.jsx)(n.li,{children:"Auditable history"}),"\n",(0,i.jsx)(n.li,{children:"Declarative definitions"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Automated Synchronization"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Continuous reconciliation"}),"\n",(0,i.jsx)(n.li,{children:"Automated deployment"}),"\n",(0,i.jsx)(n.li,{children:"Self-healing systems"}),"\n",(0,i.jsx)(n.li,{children:"Drift detection and correction"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Pull-Based Deployment"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Agents pull changes from Git"}),"\n",(0,i.jsx)(n.li,{children:"No external access to cluster required"}),"\n",(0,i.jsx)(n.li,{children:"Enhanced security"}),"\n",(0,i.jsx)(n.li,{children:"Better audit trail"}),"\n"]}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Declarative Configuration"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Describe desired state"}),"\n",(0,i.jsx)(n.li,{children:"System converges to that state"}),"\n",(0,i.jsx)(n.li,{children:"Idempotent operations"}),"\n",(0,i.jsx)(n.li,{children:"Predictable behavior"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"gitops-workflow",children:"GitOps Workflow"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Developer                              \u2502\n\u2502   1. Write code                          \u2502\n\u2502   2. Create Pull Request                 \u2502\n\u2502   3. Review and merge                    \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502\n               \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Git Repository (Source of Truth)       \u2502\n\u2502   - Kubernetes manifests                 \u2502\n\u2502   - Helm charts                          \u2502\n\u2502   - Kustomize overlays                   \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502 Pull changes\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   GitOps Operator (ArgoCD)               \u2502\n\u2502   1. Monitor Git repository              \u2502\n\u2502   2. Detect changes                      \u2502\n\u2502   3. Sync to cluster                     \u2502\n\u2502   4. Report status                       \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n               \u2502 Apply\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502   Kubernetes Cluster                     \u2502\n\u2502   - Deployments                          \u2502\n\u2502   - Services                             \u2502\n\u2502   - ConfigMaps                           \u2502\n\u2502   - Secrets                              \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"argocd",children:"ArgoCD"}),"\n",(0,i.jsx)(n.h3,{id:"what-is-argocd",children:"What is ArgoCD?"}),"\n",(0,i.jsxs)(n.p,{children:[(0,i.jsx)(n.strong,{children:"ArgoCD"})," is a declarative, GitOps continuous delivery tool for Kubernetes. It automatically synchronizes applications deployed in Kubernetes with their desired state defined in Git repositories."]}),"\n",(0,i.jsx)(n.h3,{id:"key-features",children:"Key Features"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Automated Deployment"})," - Sync apps from Git to Kubernetes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multiple Sources"})," - Helm, Kustomize, plain YAML"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Health Assessment"})," - Monitor application health"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Rollback"})," - Easy rollback to previous versions"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Multi-Cluster"})," - Manage multiple clusters"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"SSO Integration"})," - OIDC, OAuth2, SAML"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"RBAC"})," - Fine-grained access control"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.strong,{children:"Web UI"})," - Visual application management"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"installing-argocd",children:"Installing ArgoCD"}),"\n",(0,i.jsx)(n.h3,{id:"install-in-kubernetes",children:"Install in Kubernetes"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Create namespace\nkubectl create namespace argocd\n\n# Install ArgoCD\nkubectl apply -n argocd -f https://raw.githubusercontent.com/argoproj/argo-cd/stable/manifests/install.yaml\n\n# Wait for pods to be ready\nkubectl wait --for=condition=ready pod -l app.kubernetes.io/name=argocd-server -n argocd --timeout=300s\n\n# Get initial admin password\nkubectl -n argocd get secret argocd-initial-admin-secret -o jsonpath="{.data.password}" | base64 -d && echo\n\n# Port forward to access UI\nkubectl port-forward svc/argocd-server -n argocd 8080:443\n\n# Access at https://localhost:8080\n# Username: admin\n# Password: (from above command)\n'})}),"\n",(0,i.jsx)(n.h3,{id:"install-argocd-cli",children:"Install ArgoCD CLI"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Linux\ncurl -sSL -o argocd-linux-amd64 https://github.com/argoproj/argo-cd/releases/latest/download/argocd-linux-amd64\nsudo install -m 555 argocd-linux-amd64 /usr/local/bin/argocd\nrm argocd-linux-amd64\n\n# macOS\nbrew install argocd\n\n# Login via CLI\nargocd login localhost:8080 --username admin --password <password>\n\n# Change password\nargocd account update-password\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"creating-your-first-application",children:"Creating Your First Application"}),"\n",(0,i.jsx)(n.h3,{id:"repository-structure",children:"Repository Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"my-app-repo/\n\u251c\u2500\u2500 base/\n\u2502   \u251c\u2500\u2500 deployment.yaml\n\u2502   \u251c\u2500\u2500 service.yaml\n\u2502   \u2514\u2500\u2500 kustomization.yaml\n\u251c\u2500\u2500 overlays/\n\u2502   \u251c\u2500\u2500 dev/\n\u2502   \u2502   \u251c\u2500\u2500 kustomization.yaml\n\u2502   \u2502   \u2514\u2500\u2500 replica-patch.yaml\n\u2502   \u251c\u2500\u2500 staging/\n\u2502   \u2502   \u2514\u2500\u2500 kustomization.yaml\n\u2502   \u2514\u2500\u2500 production/\n\u2502       \u2514\u2500\u2500 kustomization.yaml\n\u2514\u2500\u2500 README.md\n"})}),"\n",(0,i.jsx)(n.h3,{id:"basedeploymentyaml",children:"base/deployment.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: myapp\nspec:\n  replicas: 2\n  selector:\n    matchLabels:\n      app: myapp\n  template:\n    metadata:\n      labels:\n        app: myapp\n    spec:\n      containers:\n      - name: myapp\n        image: myapp:latest\n        ports:\n        - containerPort: 8080\n        resources:\n          requests:\n            memory: "256Mi"\n            cpu: "250m"\n          limits:\n            memory: "512Mi"\n            cpu: "500m"\n'})}),"\n",(0,i.jsx)(n.h3,{id:"baseserviceyaml",children:"base/service.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: Service\nmetadata:\n  name: myapp\nspec:\n  selector:\n    app: myapp\n  ports:\n  - protocol: TCP\n    port: 80\n    targetPort: 8080\n  type: LoadBalancer\n"})}),"\n",(0,i.jsx)(n.h3,{id:"basekustomizationyaml",children:"base/kustomization.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\n\nresources:\n  - deployment.yaml\n  - service.yaml\n"})}),"\n",(0,i.jsx)(n.h3,{id:"overlaysproductionkustomizationyaml",children:"overlays/production/kustomization.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: kustomize.config.k8s.io/v1beta1\nkind: Kustomization\n\nbases:\n  - ../../base\n\nreplicas:\n  - name: myapp\n    count: 5\n\nimages:\n  - name: myapp\n    newTag: v1.0.0\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"deploying-with-argocd",children:"Deploying with ArgoCD"}),"\n",(0,i.jsx)(n.h3,{id:"via-ui",children:"Via UI"}),"\n",(0,i.jsxs)(n.ol,{children:["\n",(0,i.jsx)(n.li,{children:"Log in to ArgoCD UI"}),"\n",(0,i.jsx)(n.li,{children:'Click "+ NEW APP"'}),"\n",(0,i.jsxs)(n.li,{children:["Fill in details:","\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:["Application Name: ",(0,i.jsx)(n.code,{children:"myapp"})]}),"\n",(0,i.jsxs)(n.li,{children:["Project: ",(0,i.jsx)(n.code,{children:"default"})]}),"\n",(0,i.jsxs)(n.li,{children:["Sync Policy: ",(0,i.jsx)(n.code,{children:"Automatic"})]}),"\n",(0,i.jsxs)(n.li,{children:["Repository URL: ",(0,i.jsx)(n.code,{children:"https://github.com/username/my-app-repo"})]}),"\n",(0,i.jsxs)(n.li,{children:["Path: ",(0,i.jsx)(n.code,{children:"overlays/production"})]}),"\n",(0,i.jsxs)(n.li,{children:["Cluster: ",(0,i.jsx)(n.code,{children:"https://kubernetes.default.svc"})]}),"\n",(0,i.jsxs)(n.li,{children:["Namespace: ",(0,i.jsx)(n.code,{children:"default"})]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(n.li,{children:'Click "CREATE"'}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"via-cli",children:"Via CLI"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Create application\nargocd app create myapp \\\n  --repo https://github.com/username/my-app-repo \\\n  --path overlays/production \\\n  --dest-server https://kubernetes.default.svc \\\n  --dest-namespace default \\\n  --sync-policy automated \\\n  --auto-prune \\\n  --self-heal\n\n# List applications\nargocd app list\n\n# Get application details\nargocd app get myapp\n\n# Sync application\nargocd app sync myapp\n\n# View application logs\nargocd app logs myapp\n\n# Delete application\nargocd app delete myapp\n"})}),"\n",(0,i.jsx)(n.h3,{id:"via-yaml",children:"Via YAML"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# application.yaml\napiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: myapp\n  namespace: argocd\nspec:\n  project: default\n\n  # Source repository\n  source:\n    repoURL: https://github.com/username/my-app-repo\n    targetRevision: main\n    path: overlays/production\n\n  # Destination cluster\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: default\n\n  # Sync policy\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n      allowEmpty: false\n    syncOptions:\n      - CreateNamespace=true\n\n    retry:\n      limit: 5\n      backoff:\n        duration: 5s\n        factor: 2\n        maxDuration: 3m\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f application.yaml\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"auto-sync-and-self-healing",children:"Auto Sync and Self-Healing"}),"\n",(0,i.jsx)(n.h3,{id:"automated-sync",children:"Automated Sync"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"syncPolicy:\n  automated:\n    prune: true  # Delete resources not in Git\n    selfHeal: true  # Revert manual changes\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"ArgoCD automatically syncs when Git changes"}),"\n",(0,i.jsx)(n.li,{children:"Detects drift and corrects it"}),"\n",(0,i.jsxs)(n.li,{children:["Removes resources not in Git (if ",(0,i.jsx)(n.code,{children:"prune: true"}),")"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"manual-sync",children:"Manual Sync"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"syncPolicy: {}  # No automated sync\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Behavior:"})}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Manual approval required"}),"\n",(0,i.jsx)(n.li,{children:"Better for production environments"}),"\n",(0,i.jsx)(n.li,{children:"Use CLI or UI to sync"}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"multi-environment-setup",children:"Multi-Environment Setup"}),"\n",(0,i.jsx)(n.h3,{id:"repository-structure-1",children:"Repository Structure"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"gitops-repo/\n\u251c\u2500\u2500 apps/\n\u2502   \u2514\u2500\u2500 myapp/\n\u2502       \u251c\u2500\u2500 base/\n\u2502       \u2514\u2500\u2500 overlays/\n\u2502           \u251c\u2500\u2500 dev/\n\u2502           \u251c\u2500\u2500 staging/\n\u2502           \u2514\u2500\u2500 production/\n\u2514\u2500\u2500 argocd-apps/\n    \u251c\u2500\u2500 dev-myapp.yaml\n    \u251c\u2500\u2500 staging-myapp.yaml\n    \u2514\u2500\u2500 prod-myapp.yaml\n"})}),"\n",(0,i.jsx)(n.h3,{id:"argocd-appsdev-myappyaml",children:"argocd-apps/dev-myapp.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: myapp-dev\n  namespace: argocd\nspec:\n  project: default\n  source:\n    repoURL: https://github.com/username/gitops-repo\n    targetRevision: main\n    path: apps/myapp/overlays/dev\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: dev\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n      - CreateNamespace=true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"argocd-appsprod-myappyaml",children:"argocd-apps/prod-myapp.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: myapp-prod\n  namespace: argocd\nspec:\n  project: default\n  source:\n    repoURL: https://github.com/username/gitops-repo\n    targetRevision: production  # Different branch\n    path: apps/myapp/overlays/production\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: production\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: false  # Manual approval for prod\n    syncOptions:\n      - CreateNamespace=true\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"app-of-apps-pattern",children:"App of Apps Pattern"}),"\n",(0,i.jsx)(n.p,{children:"Manage multiple applications with a single parent app."}),"\n",(0,i.jsx)(n.h3,{id:"appsapp-of-appsyaml",children:"apps/app-of-apps.yaml"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: app-of-apps\n  namespace: argocd\nspec:\n  project: default\n  source:\n    repoURL: https://github.com/username/gitops-repo\n    targetRevision: main\n    path: argocd-apps\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: argocd\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"kubectl apply -f apps/app-of-apps.yaml\n"})}),"\n",(0,i.jsxs)(n.p,{children:["This creates all child applications defined in ",(0,i.jsx)(n.code,{children:"argocd-apps/"}),"."]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"working-with-helm",children:"Working with Helm"}),"\n",(0,i.jsx)(n.h3,{id:"helm-repository",children:"Helm Repository"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: nginx-ingress\n  namespace: argocd\nspec:\n  project: default\n  source:\n    chart: nginx-ingress\n    repoURL: https://helm.nginx.com/stable\n    targetRevision: 0.17.0\n    helm:\n      values: |\n        controller:\n          replicaCount: 3\n          service:\n            type: LoadBalancer\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: ingress-nginx\n  syncPolicy:\n    automated:\n      prune: true\n      selfHeal: true\n    syncOptions:\n      - CreateNamespace=true\n"})}),"\n",(0,i.jsx)(n.h3,{id:"helm-chart-in-git",children:"Helm Chart in Git"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: myapp\n  namespace: argocd\nspec:\n  project: default\n  source:\n    repoURL: https://github.com/username/my-helm-chart\n    targetRevision: main\n    path: charts/myapp\n    helm:\n      valueFiles:\n        - values-production.yaml\n      parameters:\n        - name: image.tag\n          value: v1.0.0\n        - name: replicaCount\n          value: "5"\n  destination:\n    server: https://kubernetes.default.svc\n    namespace: production\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"secrets-management",children:"Secrets Management"}),"\n",(0,i.jsx)(n.h3,{id:"sealed-secrets",children:"Sealed Secrets"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Install Sealed Secrets controller\nkubectl apply -f https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.18.0/controller.yaml\n\n# Install kubeseal CLI\nwget https://github.com/bitnami-labs/sealed-secrets/releases/download/v0.18.0/kubeseal-0.18.0-linux-amd64.tar.gz\ntar xfz kubeseal-0.18.0-linux-amd64.tar.gz\nsudo install -m 755 kubeseal /usr/local/bin/kubeseal\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Create sealed secret:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:'# Create regular secret\nkubectl create secret generic db-credentials \\\n  --from-literal=password=SuperSecret123! \\\n  --dry-run=client -o yaml > secret.yaml\n\n# Seal it\nkubeseal -f secret.yaml -w sealed-secret.yaml\n\n# Commit sealed-secret.yaml to Git (safe!)\ngit add sealed-secret.yaml\ngit commit -m "Add database credentials"\ngit push\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"sealed-secret.yaml (safe to commit):"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: bitnami.com/v1alpha1\nkind: SealedSecret\nmetadata:\n  name: db-credentials\nspec:\n  encryptedData:\n    password: AgBy3i4OJSWK+PiTySYZZA9rO43cGDEq...\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"monitoring-and-notifications",children:"Monitoring and Notifications"}),"\n",(0,i.jsx)(n.h3,{id:"prometheus-metrics",children:"Prometheus Metrics"}),"\n",(0,i.jsx)(n.p,{children:"ArgoCD exposes metrics for Prometheus:"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: v1\nkind: ServiceMonitor\nmetadata:\n  name: argocd-metrics\n  namespace: argocd\nspec:\n  selector:\n    matchLabels:\n      app.kubernetes.io/name: argocd-server-metrics\n  endpoints:\n  - port: metrics\n"})}),"\n",(0,i.jsx)(n.h3,{id:"slack-notifications",children:"Slack Notifications"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# argocd-notifications-cm ConfigMap\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-notifications-cm\n  namespace: argocd\ndata:\n  service.slack: |\n    token: $slack-token\n\n  template.app-deployed: |\n    message: |\n      Application {{.app.metadata.name}} is now running version {{.app.status.sync.revision}}.\n    slack:\n      attachments: |\n        [{\n          "title": "{{ .app.metadata.name}}",\n          "title_link":"{{.context.argocdUrl}}/applications/{{.app.metadata.name}}",\n          "color": "#18be52",\n          "fields": [\n          {\n            "title": "Sync Status",\n            "value": "{{.app.status.sync.status}}",\n            "short": true\n          },\n          {\n            "title": "Repository",\n            "value": "{{.app.spec.source.repoURL}}",\n            "short": true\n          }\n          ]\n        }]\n\n  trigger.on-deployed: |\n    - when: app.status.operationState.phase in [\'Succeeded\']\n      send: [app-deployed]\n'})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Subscribe application:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\nkind: Application\nmetadata:\n  name: myapp\n  annotations:\n    notifications.argoproj.io/subscribe.on-deployed.slack: my-channel\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"best-practices",children:"Best Practices"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"1. Separate App and Config Repos"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"app-repo/          # Application code\nconfig-repo/       # Kubernetes manifests\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"2. Use Branches for Environments"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"main           \u2192 development\nstaging        \u2192 staging\nproduction     \u2192 production\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"3. Implement Progressive Delivery"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"1. Deploy to dev (auto-sync)\n2. Run tests\n3. Deploy to staging (auto-sync)\n4. Manual approval\n5. Deploy to production (manual sync)\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"4. Structure with Kustomize"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{children:"base/              # Common resources\noverlays/\n  dev/             # Dev-specific\n  staging/         # Staging-specific\n  production/      # Prod-specific\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"5. Use Projects for Multi-Tenancy"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"apiVersion: argoproj.io/v1alpha1\nkind: AppProject\nmetadata:\n  name: team-a\n  namespace: argocd\nspec:\n  destinations:\n  - namespace: 'team-a-*'\n    server: https://kubernetes.default.svc\n  sourceRepos:\n  - https://github.com/company/team-a-apps\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"6. Enable RBAC"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:"# argocd-rbac-cm ConfigMap\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-rbac-cm\n  namespace: argocd\ndata:\n  policy.default: role:readonly\n  policy.csv: |\n    p, role:org-admin, applications, *, */*, allow\n    p, role:org-admin, clusters, get, *, allow\n    g, team-a, role:org-admin\n"})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"troubleshooting",children:"Troubleshooting"}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Application OutOfSync:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check diff\nargocd app diff myapp\n\n# View current vs desired state\nkubectl get deployment myapp -o yaml\nargocd app manifests myapp\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Sync Fails:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"# Check sync status\nargocd app get myapp\n\n# View logs\nargocd app logs myapp --follow\n\n# Manual sync with prune\nargocd app sync myapp --prune\n"})}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Health Check Failures:"})}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-yaml",children:'# Custom health check\napiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: argocd-cm\n  namespace: argocd\ndata:\n  resource.customizations: |\n    argoproj.io/Application:\n      health.lua: |\n        hs = {}\n        hs.status = "Progressing"\n        hs.message = ""\n        if obj.status ~= nil then\n          if obj.status.health ~= nil then\n            hs.status = obj.status.health.status\n            if obj.status.health.message ~= nil then\n              hs.message = obj.status.health.message\n            end\n          end\n        end\n        return hs\n'})}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.h2,{id:"resources",children:"Resources"}),"\n",(0,i.jsx)(n.h3,{id:"official-documentation",children:"Official Documentation"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/",children:"ArgoCD Documentation"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://opengitops.dev/",children:"GitOps Principles"})}),"\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://github.com/cncf/tag-app-delivery",children:"CNCF GitOps Working Group"})}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"tools",children:"Tools"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://argoproj.github.io/argo-cd/",children:"ArgoCD"})," - GitOps CD for Kubernetes"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://fluxcd.io/",children:"Flux"})," - Alternative GitOps tool"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://github.com/bitnami-labs/sealed-secrets",children:"Sealed Secrets"})," - Encrypt Kubernetes secrets"]}),"\n"]}),"\n",(0,i.jsx)(n.h3,{id:"learning",children:"Learning"}),"\n",(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:(0,i.jsx)(n.a,{href:"https://argo-cd.readthedocs.io/en/stable/getting_started/",children:"ArgoCD Getting Started"})}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://kustomize.io/",children:"Kustomize"})," - Kubernetes config management"]}),"\n",(0,i.jsxs)(n.li,{children:[(0,i.jsx)(n.a,{href:"https://helm.sh/",children:"Helm"})," - Kubernetes package manager"]}),"\n"]}),"\n",(0,i.jsx)(n.hr,{}),"\n",(0,i.jsx)(n.p,{children:(0,i.jsx)(n.strong,{children:"Master GitOps with ArgoCD for reliable, automated Kubernetes deployments!"})})]})}function p(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,n,a)=>{a.d(n,{R:()=>t,x:()=>l});var s=a(96540);const i={},r=s.createContext(i);function t(e){const n=s.useContext(r);return s.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:t(e.components),s.createElement(r.Provider,{value:n},e.children)}}}]);