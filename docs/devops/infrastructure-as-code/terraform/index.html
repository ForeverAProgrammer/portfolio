<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-devops/infrastructure-as-code/terraform" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.9.2">
<title data-rh="true">Terraform | Kristina Haynes</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:image" content="https://kristina.codes/img/social-card.jpg"><meta data-rh="true" name="twitter:image" content="https://kristina.codes/img/social-card.jpg"><meta data-rh="true" property="og:url" content="https://kristina.codes/docs/devops/infrastructure-as-code/terraform/"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Terraform | Kristina Haynes"><meta data-rh="true" name="description" content="Master Terraform for multi-cloud infrastructure provisioning using declarative configuration. Learn to automate infrastructure across AWS, Azure, and GCP."><meta data-rh="true" property="og:description" content="Master Terraform for multi-cloud infrastructure provisioning using declarative configuration. Learn to automate infrastructure across AWS, Azure, and GCP."><link data-rh="true" rel="icon" href="/img/favicon.ico"><link data-rh="true" rel="canonical" href="https://kristina.codes/docs/devops/infrastructure-as-code/terraform/"><link data-rh="true" rel="alternate" href="https://kristina.codes/docs/devops/infrastructure-as-code/terraform/" hreflang="en"><link data-rh="true" rel="alternate" href="https://kristina.codes/docs/devops/infrastructure-as-code/terraform/" hreflang="x-default"><script data-rh="true" type="application/ld+json">{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"DevOps","item":"https://kristina.codes/docs/devops/"},{"@type":"ListItem","position":2,"name":"Infrastructure as Code","item":"https://kristina.codes/docs/devops/infrastructure-as-code/"},{"@type":"ListItem","position":3,"name":"Terraform","item":"https://kristina.codes/docs/devops/infrastructure-as-code/terraform"}]}</script><link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Kristina Haynes RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Kristina Haynes Atom Feed">




<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-21C6F7B0PE"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-21C6F7B0PE",{anonymize_ip:!0})</script><link rel="stylesheet" href="/assets/css/styles.2ec9d87a.css">
<script src="/assets/js/runtime~main.61e6cbc7.js" defer="defer"></script>
<script src="/assets/js/main.03368c67.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<svg style="display: none;"><defs>
<symbol id="theme-svg-external-link" viewBox="0 0 24 24"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"/></symbol>
</defs></svg>
<script>!function(){var t=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();document.documentElement.setAttribute("data-theme",t||(window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light")),document.documentElement.setAttribute("data-theme-choice",t||"system")}(),function(){try{const c=new URLSearchParams(window.location.search).entries();for(var[t,e]of c)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/logo.svg"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="theme-layout-navbar navbar navbar--fixed-top"><div class="navbar__inner"><div class="theme-layout-navbar-left navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><div class="navbar__logo"><img src="/img/logo.svg" alt="kristina.codes Logo" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/logo.svg" alt="kristina.codes Logo" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">kristina.codes</b></a><a class="navbar__item navbar__link" href="/">Home</a><a class="navbar__item navbar__link" href="/projects/">Projects</a><a class="navbar__item navbar__link" href="/docs/intro/">Documentation</a><a class="navbar__item navbar__link" href="/blog/">Blog</a><a href="https://kristina.codes/files/resume.pdf" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Resume<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></div><div class="theme-layout-navbar-right navbar__items navbar__items--right"><a href="https://github.com/ForeverAProgrammer" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="system mode" aria-label="Switch between dark and light mode (currently system mode)"><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" aria-hidden="true" class="toggleIcon_g3eP systemToggleIcon_QzmC"><path fill="currentColor" d="m12 21c4.971 0 9-4.029 9-9s-4.029-9-9-9-9 4.029-9 9 4.029 9 9 9zm4.95-13.95c1.313 1.313 2.05 3.093 2.05 4.95s-0.738 3.637-2.05 4.95c-1.313 1.313-3.093 2.05-4.95 2.05v-14c1.857 0 3.637 0.737 4.95 2.05z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="theme-layout-main main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/intro/"><span title="Welcome to the Documentation" class="linkLabel_WmDU">Welcome to the Documentation</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/cloud/"><span title="Cloud Platforms" class="categoryLinkLabel_W154">Cloud Platforms</span></a><button aria-label="Expand sidebar category &#x27;Cloud Platforms&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/database/"><span title="Database" class="categoryLinkLabel_W154">Database</span></a><button aria-label="Expand sidebar category &#x27;Database&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/design-patterns/"><span title="Design Patterns" class="categoryLinkLabel_W154">Design Patterns</span></a><button aria-label="Expand sidebar category &#x27;Design Patterns&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" href="/docs/devops/"><span title="DevOps" class="categoryLinkLabel_W154">DevOps</span></a><button aria-label="Collapse sidebar category &#x27;DevOps&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/docker/"><span title="Docker Guide" class="linkLabel_WmDU">Docker Guide</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/kubernetes/"><span title="Kubernetes Handbook" class="linkLabel_WmDU">Kubernetes Handbook</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/cicd/"><span title="CI/CD Setup" class="linkLabel_WmDU">CI/CD Setup</span></a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist menu__link--active" tabindex="0" href="/docs/devops/infrastructure-as-code/"><span title="Infrastructure as Code" class="categoryLinkLabel_W154">Infrastructure as Code</span></a><button aria-label="Collapse sidebar category &#x27;Infrastructure as Code&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/devops/infrastructure-as-code/terraform/"><span title="Terraform" class="linkLabel_WmDU">Terraform</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-3 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/infrastructure-as-code/ansible/"><span title="Ansible" class="linkLabel_WmDU">Ansible</span></a></li></ul></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/monitoring/"><span title="Monitoring &amp; Logging" class="linkLabel_WmDU">Monitoring &amp; Logging</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/security/"><span title="DevOps Security" class="linkLabel_WmDU">DevOps Security</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/gitops/"><span title="GitOps" class="linkLabel_WmDU">GitOps</span></a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/devops/git/"><span title="Git Cheat Sheet" class="linkLabel_WmDU">Git Cheat Sheet</span></a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/frameworks/"><span title="Frontend Frameworks" class="categoryLinkLabel_W154">Frontend Frameworks</span></a><button aria-label="Expand sidebar category &#x27;Frontend Frameworks&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/languages/"><span title="Programming Languages" class="categoryLinkLabel_W154">Programming Languages</span></a><button aria-label="Expand sidebar category &#x27;Programming Languages&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/linux/"><span title="Linux" class="categoryLinkLabel_W154">Linux</span></a><button aria-label="Expand sidebar category &#x27;Linux&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/testing/"><span title="Testing" class="categoryLinkLabel_W154">Testing</span></a><button aria-label="Expand sidebar category &#x27;Testing&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="categoryLink_byQd menu__link menu__link--sublist" href="/docs/web-development/"><span title="Web Development" class="categoryLinkLabel_W154">Web Development</span></a><button aria-label="Expand sidebar category &#x27;Web Development&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/devops/"><span>DevOps</span></a></li><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/docs/devops/infrastructure-as-code/"><span>Infrastructure as Code</span></a></li><li class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link">Terraform</span></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Terraform</h1></header>
<p>Master Terraform for multi-cloud infrastructure provisioning using declarative configuration. Learn to automate infrastructure across AWS, Azure, and GCP.</p>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="what-is-terraform">What is Terraform?<a href="#what-is-terraform" class="hash-link" aria-label="Direct link to What is Terraform?" title="Direct link to What is Terraform?" translate="no">​</a></h2>
<p><strong>Terraform</strong> is an open-source Infrastructure as Code (IaC) tool created by HashiCorp that allows you to define and provision infrastructure using a declarative configuration language called HCL (HashiCorp Configuration Language).</p>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="key-features">Key Features<a href="#key-features" class="hash-link" aria-label="Direct link to Key Features" title="Direct link to Key Features" translate="no">​</a></h3>
<ul>
<li class=""><strong>Multi-Cloud</strong> - AWS, Azure, GCP, and 1000+ providers</li>
<li class=""><strong>Declarative</strong> - Define what you want, Terraform handles how</li>
<li class=""><strong>State Management</strong> - Tracks infrastructure state</li>
<li class=""><strong>Plan Before Apply</strong> - Preview changes before execution</li>
<li class=""><strong>Resource Graph</strong> - Automatic dependency resolution</li>
<li class=""><strong>Modules</strong> - Reusable infrastructure components</li>
</ul>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="installation">Installation<a href="#installation" class="hash-link" aria-label="Direct link to Installation" title="Direct link to Installation" translate="no">​</a></h2>
<p><strong>Linux/macOS:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Download Terraform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget https://releases.hashicorp.com/terraform/1.6.0/terraform_1.6.0_linux_amd64.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">unzip terraform_1.6.0_linux_amd64.zip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo mv terraform /usr/local/bin/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Verify installation</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform version</span><br></span></code></pre></div></div>
<p><strong>Using Package Managers:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># macOS (Homebrew)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">brew install terraform</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ubuntu/Debian</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">wget -O- https://apt.releases.hashicorp.com/gpg | sudo gpg --dearmor -o /usr/share/keyrings/hashicorp-archive-keyring.gpg</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">echo &quot;deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] https://apt.releases.hashicorp.com $(lsb_release -cs) main&quot; | sudo tee /etc/apt/sources.list.d/hashicorp.list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">sudo apt update &amp;&amp; sudo apt install terraform</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="terraform-workflow">Terraform Workflow<a href="#terraform-workflow" class="hash-link" aria-label="Direct link to Terraform Workflow" title="Direct link to Terraform Workflow" translate="no">​</a></h2>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  1. terraform init                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Initialize working directory     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Download providers              │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────┬───────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  2. terraform plan                │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Preview changes                  │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Show what will be created       │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────┬───────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  3. terraform apply               │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Create/update infrastructure     │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Ask for confirmation            │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────┬───────────────────┘</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">               ↓</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">┌──────────────────────────────────┐</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  4. terraform destroy             │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  Remove all infrastructure        │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">│  (when needed)                   │</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└──────────────────────────────────┘</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="hcl-syntax-basics">HCL Syntax Basics<a href="#hcl-syntax-basics" class="hash-link" aria-label="Direct link to HCL Syntax Basics" title="Direct link to HCL Syntax Basics" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="resource-block">Resource Block<a href="#resource-block" class="hash-link" aria-label="Direct link to Resource Block" title="Direct link to Resource Block" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_instance&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ami           = &quot;ami-0c55b159cbfafe1f0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_type = &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;WebServer&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Syntax:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># resource &quot;&lt;TYPE&gt;&quot; &quot;&lt;NAME&gt;&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">#   &lt;ARGUMENT&gt; = &lt;VALUE&gt;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># }</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="variable-block">Variable Block<a href="#variable-block" class="hash-link" aria-label="Direct link to Variable Block" title="Direct link to Variable Block" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;instance_type&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;EC2 instance type&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;instance_count&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Number of instances&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;tags&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Resource tags&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = map(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment = &quot;dev&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Project     = &quot;myapp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="output-block">Output Block<a href="#output-block" class="hash-link" aria-label="Direct link to Output Block" title="Direct link to Output Block" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;instance_ip&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Public IP of instance&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       = aws_instance.web.public_ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;instance_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value = aws_instance.web.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="data-source">Data Source<a href="#data-source" class="hash-link" aria-label="Direct link to Data Source" title="Direct link to Data Source" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">data &quot;aws_ami&quot; &quot;ubuntu&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  most_recent = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  owners      = [&quot;099720109477&quot;] # Canonical</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name   = &quot;name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    values = [&quot;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_instance&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ami           = data.aws_ami.ubuntu.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_type = &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="complete-example-aws-infrastructure">Complete Example: AWS Infrastructure<a href="#complete-example-aws-infrastructure" class="hash-link" aria-label="Direct link to Complete Example: AWS Infrastructure" title="Direct link to Complete Example: AWS Infrastructure" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="project-structure">Project Structure<a href="#project-structure" class="hash-link" aria-label="Direct link to Project Structure" title="Direct link to Project Structure" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform-project/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── main.tf           # Main configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── variables.tf      # Variable definitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── outputs.tf        # Output definitions</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">├── terraform.tfvars  # Variable values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── provider.tf       # Provider configuration</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="providertf">provider.tf<a href="#providertf" class="hash-link" aria-label="Direct link to provider.tf" title="Direct link to provider.tf" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required_version = &quot;&gt;= 1.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  required_providers {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    aws = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      source  = &quot;hashicorp/aws&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      version = &quot;~&gt; 5.0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backend &quot;s3&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bucket         = &quot;my-terraform-state&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key            = &quot;prod/terraform.tfstate&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    region         = &quot;us-east-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    encrypt        = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dynamodb_table = &quot;terraform-locks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">provider &quot;aws&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  region = var.aws_region</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default_tags {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      ManagedBy = &quot;Terraform&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Project   = var.project_name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="variablestf">variables.tf<a href="#variablestf" class="hash-link" aria-label="Direct link to variables.tf" title="Direct link to variables.tf" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;aws_region&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;AWS region&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = &quot;us-east-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;project_name&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Project name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;environment&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Environment (dev, staging, prod)&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  validation {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    condition     = contains([&quot;dev&quot;, &quot;staging&quot;, &quot;prod&quot;], var.environment)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    error_message = &quot;Environment must be dev, staging, or prod.&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;instance_type&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;EC2 instance type&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;vpc_cidr&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;VPC CIDR block&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = &quot;10.0.0.0/16&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="maintf">main.tf<a href="#maintf" class="hash-link" aria-label="Direct link to main.tf" title="Direct link to main.tf" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># VPC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_vpc&quot; &quot;main&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block           = var.vpc_cidr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_dns_hostnames = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_dns_support   = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.project_name}-vpc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Internet Gateway</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_internet_gateway&quot; &quot;main&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.project_name}-igw&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Public Subnet</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_subnet&quot; &quot;public&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count                   = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id                  = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block              = cidrsubnet(var.vpc_cidr, 8, count.index)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone       = data.aws_availability_zones.available.names[count.index]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map_public_ip_on_launch = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.project_name}-public-${count.index + 1}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Route Table</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table&quot; &quot;public&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_block = &quot;0.0.0.0/0&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    gateway_id = aws_internet_gateway.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.project_name}-public-rt&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Route Table Association</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_route_table_association&quot; &quot;public&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count          = 2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id      = aws_subnet.public[count.index].id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  route_table_id = aws_route_table.public.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Security Group</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_security_group&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name        = &quot;${var.project_name}-web-sg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Security group for web servers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id      = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ingress {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description = &quot;HTTP&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ingress {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description = &quot;HTTPS&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ingress {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    description = &quot;SSH&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = 22</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = [&quot;0.0.0.0/0&quot;]  # Restrict in production!</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  egress {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = &quot;-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.project_name}-web-sg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Data source for AMI</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">data &quot;aws_ami&quot; &quot;ubuntu&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  most_recent = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  owners      = [&quot;099720109477&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  filter {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    name   = &quot;name&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    values = [&quot;ubuntu/images/hvm-ssd/ubuntu-focal-20.04-amd64-server-*&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># EC2 Instance</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_instance&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count         = var.environment == &quot;prod&quot; ? 2 : 1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ami           = data.aws_ami.ubuntu.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_type = var.instance_type</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id     = aws_subnet.public[count.index % 2].id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_security_group_ids = [aws_security_group.web.id]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  user_data = &lt;&lt;-EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              #!/bin/bash</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              apt-get update</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              apt-get install -y nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              systemctl start nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              systemctl enable nginx</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              echo &quot;&lt;h1&gt;Hello from ${var.project_name} - Instance ${count.index + 1}&lt;/h1&gt;&quot; &gt; /var/www/html/index.html</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">              EOF</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Name = &quot;${var.project_name}-web-${count.index + 1}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="outputstf">outputs.tf<a href="#outputstf" class="hash-link" aria-label="Direct link to outputs.tf" title="Direct link to outputs.tf" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;vpc_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;VPC ID&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       = aws_vpc.main.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;instance_ips&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Public IPs of web servers&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       = aws_instance.web[*].public_ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;instance_ids&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Instance IDs&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       = aws_instance.web[*].id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="terraformtfvars">terraform.tfvars<a href="#terraformtfvars" class="hash-link" aria-label="Direct link to terraform.tfvars" title="Direct link to terraform.tfvars" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">project_name  = &quot;myapp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">environment   = &quot;dev&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aws_region    = &quot;us-east-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">instance_type = &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">vpc_cidr      = &quot;10.0.0.0/16&quot;</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="terraform-modules">Terraform Modules<a href="#terraform-modules" class="hash-link" aria-label="Direct link to Terraform Modules" title="Direct link to Terraform Modules" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="creating-a-module">Creating a Module<a href="#creating-a-module" class="hash-link" aria-label="Direct link to Creating a Module" title="Direct link to Creating a Module" translate="no">​</a></h3>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">modules/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">└── vpc/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── main.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ├── variables.tf</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    └── outputs.tf</span><br></span></code></pre></div></div>
<p><strong>modules/vpc/main.tf:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_vpc&quot; &quot;this&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block           = var.cidr_block</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_dns_hostnames = var.enable_dns_hostnames</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  enable_dns_support   = var.enable_dns_support</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = merge(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var.tags,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Name = var.name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_subnet&quot; &quot;public&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count                   = length(var.public_subnet_cidrs)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  vpc_id                  = aws_vpc.this.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block              = var.public_subnet_cidrs[count.index]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  availability_zone       = var.azs[count.index]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  map_public_ip_on_launch = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = merge(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    var.tags,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      Name = &quot;${var.name}-public-${count.index + 1}&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  )</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>modules/vpc/variables.tf:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;name&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Name of VPC&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;cidr_block&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;CIDR block for VPC&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;public_subnet_cidrs&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;List of public subnet CIDR blocks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = list(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;azs&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Availability zones&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = list(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;enable_dns_hostnames&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Enable DNS hostnames&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;enable_dns_support&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Enable DNS support&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = bool</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;tags&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Tags to apply to resources&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type        = map(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default     = {}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>modules/vpc/outputs.tf:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;vpc_id&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;VPC ID&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       = aws_vpc.this.id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">output &quot;public_subnet_ids&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  description = &quot;Public subnet IDs&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  value       = aws_subnet.public[*].id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="using-a-module">Using a Module<a href="#using-a-module" class="hash-link" aria-label="Direct link to Using a Module" title="Direct link to Using a Module" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module &quot;vpc&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = &quot;./modules/vpc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name                 = &quot;my-vpc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  cidr_block           = &quot;10.0.0.0/16&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  public_subnet_cidrs  = [&quot;10.0.1.0/24&quot;, &quot;10.0.2.0/24&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  azs                  = [&quot;us-east-1a&quot;, &quot;us-east-1b&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment = &quot;production&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    ManagedBy   = &quot;Terraform&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use module outputs</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_instance&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  subnet_id = module.vpc.public_subnet_ids[0]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ... other configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="state-management">State Management<a href="#state-management" class="hash-link" aria-label="Direct link to State Management" title="Direct link to State Management" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="local-state-not-recommended-for-teams">Local State (Not Recommended for Teams)<a href="#local-state-not-recommended-for-teams" class="hash-link" aria-label="Direct link to Local State (Not Recommended for Teams)" title="Direct link to Local State (Not Recommended for Teams)" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># terraform.tfstate stored locally</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Simple but problematic for teams</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="remote-state-recommended">Remote State (Recommended)<a href="#remote-state-recommended" class="hash-link" aria-label="Direct link to Remote State (Recommended)" title="Direct link to Remote State (Recommended)" translate="no">​</a></h3>
<p><strong>S3 Backend:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backend &quot;s3&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    bucket         = &quot;my-terraform-state&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    key            = &quot;prod/terraform.tfstate&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    region         = &quot;us-east-1&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    encrypt        = true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    dynamodb_table = &quot;terraform-locks&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>Create S3 Backend:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Create S3 bucket</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aws s3 mb s3://my-terraform-state --region us-east-1</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable versioning</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aws s3api put-bucket-versioning \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --bucket my-terraform-state \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --versioning-configuration Status=Enabled</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create DynamoDB table for locking</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">aws dynamodb create-table \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --table-name terraform-locks \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --attribute-definitions AttributeName=LockID,AttributeType=S \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --key-schema AttributeName=LockID,KeyType=HASH \</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  --billing-mode PAY_PER_REQUEST</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="state-commands">State Commands<a href="#state-commands" class="hash-link" aria-label="Direct link to State Commands" title="Direct link to State Commands" translate="no">​</a></h3>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># List resources in state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform state list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Show resource details</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform state show aws_instance.web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Move resource in state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform state mv aws_instance.web aws_instance.web_server</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Remove resource from state (doesn&#x27;t destroy)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform state rm aws_instance.web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Pull remote state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform state pull</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Import existing resource</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform import aws_instance.web i-0123456789abcdef</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="workspaces">Workspaces<a href="#workspaces" class="hash-link" aria-label="Direct link to Workspaces" title="Direct link to Workspaces" translate="no">​</a></h2>
<p>Manage multiple environments with the same configuration:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># List workspaces</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace list</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Create new workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace new dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace new staging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace new prod</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Switch workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace select dev</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Show current workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Delete workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform workspace delete dev</span><br></span></code></pre></div></div>
<p><strong>Use workspace in configuration:</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_instance&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_type = terraform.workspace == &quot;prod&quot; ? &quot;t3.large&quot; : &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Environment = terraform.workspace</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="advanced-features">Advanced Features<a href="#advanced-features" class="hash-link" aria-label="Direct link to Advanced Features" title="Direct link to Advanced Features" translate="no">​</a></h2>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="for-each">For Each<a href="#for-each" class="hash-link" aria-label="Direct link to For Each" title="Direct link to For Each" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;users&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = map(object({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    role = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;alice&quot; = { role = &quot;admin&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;bob&quot;   = { role = &quot;user&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    &quot;carol&quot; = { role = &quot;user&quot; }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_iam_user&quot; &quot;users&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  for_each = var.users</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name     = each.key</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  tags = {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    Role = each.value.role</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="dynamic-blocks">Dynamic Blocks<a href="#dynamic-blocks" class="hash-link" aria-label="Direct link to Dynamic Blocks" title="Direct link to Dynamic Blocks" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;ingress_rules&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  type = list(object({</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    from_port   = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    to_port     = number</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    protocol    = string</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    cidr_blocks = list(string)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }))</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  default = [</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      from_port   = 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      to_port     = 80</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      protocol    = &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      from_port   = 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      to_port     = 443</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      protocol    = &quot;tcp&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cidr_blocks = [&quot;0.0.0.0/0&quot;]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ]</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_security_group&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  name = &quot;web-sg&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  dynamic &quot;ingress&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    for_each = var.ingress_rules</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    content {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      from_port   = ingress.value.from_port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      to_port     = ingress.value.to_port</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      protocol    = ingress.value.protocol</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      cidr_blocks = ingress.value.cidr_blocks</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<h3 class="anchor anchorTargetStickyNavbar_Vzrq" id="conditional-expressions">Conditional Expressions<a href="#conditional-expressions" class="hash-link" aria-label="Direct link to Conditional Expressions" title="Direct link to Conditional Expressions" translate="no">​</a></h3>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">resource &quot;aws_instance&quot; &quot;web&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  ami           = var.ami_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  instance_type = var.environment == &quot;prod&quot; ? &quot;t3.large&quot; : &quot;t3.micro&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # Create instance only in production</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  count = var.environment == &quot;prod&quot; ? 1 : 0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="best-practices">Best Practices<a href="#best-practices" class="hash-link" aria-label="Direct link to Best Practices" title="Direct link to Best Practices" translate="no">​</a></h2>
<p><strong>1. Use Version Control</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">git init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git add .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">git commit -m &quot;Initial Terraform configuration&quot;</span><br></span></code></pre></div></div>
<p><strong>2. Use Remote State</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  backend &quot;s3&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    # ... configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>3. Use Variables</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Don&#x27;t hardcode values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use variables for flexibility</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">variable &quot;instance_type&quot; {}</span><br></span></code></pre></div></div>
<p><strong>4. Use Modules for Reusability</strong></p>
<div class="language-hcl codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-hcl codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">module &quot;vpc&quot; {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  source = &quot;./modules/vpc&quot;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  # ...</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre></div></div>
<p><strong>5. Always Run Plan Before Apply</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan -out=tfplan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply tfplan</span><br></span></code></pre></div></div>
<p><strong>6. Use .gitignore</strong></p>
<div class="language-text codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># .gitignore</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.terraform/</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.tfstate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.tfstate.backup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">.terraform.lock.hcl</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">*.tfvars  # If contains secrets</span><br></span></code></pre></div></div>
<p><strong>7. Format and Validate</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">terraform fmt -recursive</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform validate</span><br></span></code></pre></div></div>
<p><strong>8. Use Linting and Security Scanning</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">tfsec .</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">checkov -d .</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="common-commands">Common Commands<a href="#common-commands" class="hash-link" aria-label="Direct link to Common Commands" title="Direct link to Common Commands" translate="no">​</a></h2>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_QJqH"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain"># Initialize</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform init</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Format code</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform fmt</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Validate configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform validate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Plan changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform plan -out=tfplan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Apply changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply tfplan</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform apply -auto-approve</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Destroy infrastructure</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform destroy -target=aws_instance.web</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Show current state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform show</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Output values</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform output</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform output instance_ip</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Refresh state</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform refresh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Graph dependencies</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">terraform graph | dot -Tpng &gt; graph.png</span><br></span></code></pre></div></div>
<hr>
<h2 class="anchor anchorTargetStickyNavbar_Vzrq" id="resources">Resources<a href="#resources" class="hash-link" aria-label="Direct link to Resources" title="Direct link to Resources" translate="no">​</a></h2>
<ul>
<li class=""><a href="https://www.terraform.io/docs" target="_blank" rel="noopener noreferrer" class="">Terraform Documentation</a></li>
<li class=""><a href="https://registry.terraform.io/" target="_blank" rel="noopener noreferrer" class="">Terraform Registry</a></li>
<li class=""><a href="https://learn.hashicorp.com/terraform" target="_blank" rel="noopener noreferrer" class="">Learn Terraform</a></li>
<li class=""><a href="https://www.terraform-best-practices.com/" target="_blank" rel="noopener noreferrer" class="">Terraform Best Practices</a></li>
</ul>
<hr>
<p><strong>Master Terraform to automate multi-cloud infrastructure provisioning!</strong></p></div></article><nav class="docusaurus-mt-lg pagination-nav" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/devops/infrastructure-as-code/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Infrastructure as Code</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/devops/infrastructure-as-code/ansible/"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Ansible</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#what-is-terraform" class="table-of-contents__link toc-highlight">What is Terraform?</a><ul><li><a href="#key-features" class="table-of-contents__link toc-highlight">Key Features</a></li></ul></li><li><a href="#installation" class="table-of-contents__link toc-highlight">Installation</a></li><li><a href="#terraform-workflow" class="table-of-contents__link toc-highlight">Terraform Workflow</a></li><li><a href="#hcl-syntax-basics" class="table-of-contents__link toc-highlight">HCL Syntax Basics</a><ul><li><a href="#resource-block" class="table-of-contents__link toc-highlight">Resource Block</a></li><li><a href="#variable-block" class="table-of-contents__link toc-highlight">Variable Block</a></li><li><a href="#output-block" class="table-of-contents__link toc-highlight">Output Block</a></li><li><a href="#data-source" class="table-of-contents__link toc-highlight">Data Source</a></li></ul></li><li><a href="#complete-example-aws-infrastructure" class="table-of-contents__link toc-highlight">Complete Example: AWS Infrastructure</a><ul><li><a href="#project-structure" class="table-of-contents__link toc-highlight">Project Structure</a></li><li><a href="#providertf" class="table-of-contents__link toc-highlight">provider.tf</a></li><li><a href="#variablestf" class="table-of-contents__link toc-highlight">variables.tf</a></li><li><a href="#maintf" class="table-of-contents__link toc-highlight">main.tf</a></li><li><a href="#outputstf" class="table-of-contents__link toc-highlight">outputs.tf</a></li><li><a href="#terraformtfvars" class="table-of-contents__link toc-highlight">terraform.tfvars</a></li></ul></li><li><a href="#terraform-modules" class="table-of-contents__link toc-highlight">Terraform Modules</a><ul><li><a href="#creating-a-module" class="table-of-contents__link toc-highlight">Creating a Module</a></li><li><a href="#using-a-module" class="table-of-contents__link toc-highlight">Using a Module</a></li></ul></li><li><a href="#state-management" class="table-of-contents__link toc-highlight">State Management</a><ul><li><a href="#local-state-not-recommended-for-teams" class="table-of-contents__link toc-highlight">Local State (Not Recommended for Teams)</a></li><li><a href="#remote-state-recommended" class="table-of-contents__link toc-highlight">Remote State (Recommended)</a></li><li><a href="#state-commands" class="table-of-contents__link toc-highlight">State Commands</a></li></ul></li><li><a href="#workspaces" class="table-of-contents__link toc-highlight">Workspaces</a></li><li><a href="#advanced-features" class="table-of-contents__link toc-highlight">Advanced Features</a><ul><li><a href="#for-each" class="table-of-contents__link toc-highlight">For Each</a></li><li><a href="#dynamic-blocks" class="table-of-contents__link toc-highlight">Dynamic Blocks</a></li><li><a href="#conditional-expressions" class="table-of-contents__link toc-highlight">Conditional Expressions</a></li></ul></li><li><a href="#best-practices" class="table-of-contents__link toc-highlight">Best Practices</a></li><li><a href="#common-commands" class="table-of-contents__link toc-highlight">Common Commands</a></li><li><a href="#resources" class="table-of-contents__link toc-highlight">Resources</a></li></ul></div></div></div></div></main></div></div></div><footer class="theme-layout-footer footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Navigation</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/">Home</a></li><li class="footer__item"><a class="footer__link-item" href="/projects/">Projects</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/intro/">Documentation</a></li><li class="footer__item"><a class="footer__link-item" href="/blog/">Blog</a></li><li class="footer__item"><a href="https://kristina.codes/files/resume.pdf" target="_blank" rel="noopener noreferrer" class="footer__link-item">Resume<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/ForeverAProgrammer" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li><li class="footer__item"><a href="https://www.linkedin.com/in/kristina-haynes-94915147" target="_blank" rel="noopener noreferrer" class="footer__link-item">LinkedIn<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div><div class="theme-layout-footer-column col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="mailto:kristinathecoder@gmail.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Email<svg width="13.5" height="13.5" aria-label="(opens in new tab)" class="iconExternalLink_nPIU"><use href="#theme-svg-external-link"></use></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2026 kristina.codes</div></div></div></footer></div>
</body>
</html>